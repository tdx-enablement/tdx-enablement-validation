libvirt (8.6.0-v3.6.mvp16) jammy; urgency=medium

  * Fix CVE-2023-2700
 -- Jialei Feng <jialei.feng@intel.com>  Tue, 19 Sep 2023 11:33:05 -0700

libvirt (8.6.0-v3.5.mvp15) jammy; urgency=medium

  * Remove shmemdev for non-hugepage VM
 -- Jialei Feng <jialei.feng@intel.com>  Mon, 11 Sep 2023 13:37:05 -0700

libvirt (8.6.0-v3.4.mvp14) jammy; urgency=medium

  * Remove fzrm,fsrs,fsrc from SapphireRapids CPU model
 -- Jialei Feng <jialei.feng@intel.com>  Wed, 2 Aug 2023 17:02:05 -0700

libvirt (8.6.0-v3.3.mvp13) jammy; urgency=medium

  * Add CPU feature amx
 -- Jialei Feng <jialei.feng@intel.com>  Tue, 1 Aug 2023 15:14:05 -0700

libvirt (8.6.0-v3.2.mvp12) jammy; urgency=medium

  * Support for new UPM 2M
  * Support for SapphireRapids CPU model
 -- Jialei Feng <jialei.feng@intel.com>  Wed, 26 Jul 2023 15:26:05 -0700

libvirt (8.6.0-v2.7.mvp11) jammy; urgency=medium

  * Support UPM 2M
 -- Jialei Feng <jialei.feng@intel.com>  Mon, 24 Jul 2023 16:18:05 -0700

libvirt (8.6.0-v2.6.mvp10) jammy; urgency=medium

  * Support TDX live migration
 -- Jialei Feng <jialei.feng@intel.com>  Wed, 28 Jun 2023 16:03:05 -0700

libvirt (8.6.0-v2.5.mvp9) jammy; urgency=medium

  * Expand vTPM memory
 -- Jialei Feng <jialei.feng@intel.com>  Sun, 25 Jun 2023 15:33:05 -0700

libvirt (8.6.0-v2.4.mvp8) jammy; urgency=medium

  * Fix vTPM
 -- Jialei Feng <jialei.feng@intel.com>  Mon, 19 Jun 2023 15:41:05 -0700

libvirt (8.6.0-v2.3.mvp7) jammy; urgency=medium

  * Revert UPM 2M
 -- Jialei Feng <jialei.feng@intel.com>  Thu, 15 Jun 2023 15:09:05 -0700

libvirt (8.6.0-v2.2.mvp6) jammy; urgency=medium

  * Fix libvirt-python install error
 -- Jialei Feng <jialei.feng@intel.com>  Wed, 14 Jun 2023 19:03:05 -0700

libvirt (8.6.0-v2.1.mvp5) jammy; urgency=medium

  * Support vTPM
 -- Jialei Feng <jialei.feng@intel.com>  Tue, 13 Jun 2023 16:33:05 -0700

libvirt (8.6.0-2022.11.17.mvp4) jammy; urgency=medium

  * Support UPM 2M
 -- Jialei Feng <jialei.feng@intel.com>  Thu, 8 Jun 2023 13:55:05 -0700

libvirt (8.6.0-2022.11.17.mvp2) jammy; urgency=medium

  * Support private-memfd
 -- Jialei Feng <jialei.feng@intel.com>  Tue, 14 Feb 2023 15:06:05 -0700

libvirt (8.6.0-2022.11.17.mvp1) jammy; urgency=medium

  * TDX patches
 -- Jialei Feng <jialei.feng@intel.com>  Fri, 18 Nov 2022 15:20:05 -0700

libvirt (8.1.0-2022.04.20.mvp14) jammy; urgency=medium

  * TDX patches
    intel-mvp-tdx-libvirt-8.1.0-2022.04.20.mvp14
 -- Juro Bystricky <juro.bystricky@intel.com>  Mon, 20 Jun 2022 10:04:05 -0700

libvirt (8.0.0-1ubuntu7) jammy; urgency=medium

  * d/p/ubuntu-aa/0035-apparmor-separate-swtpm-rules.patch: Patch the libvirtd
    and libvirt-qemu apparmor profiles to allow swtpm to use its own profile
    (LP: #1968187)

 -- Lena Voytek <lena.voytek@canonical.com>  Tue, 12 Apr 2022 10:04:05 -0700

libvirt (8.0.0-1ubuntu6) jammy; urgency=medium

  * d/control: recommend swtpm-tools (LP: #1948748)

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Mon, 04 Apr 2022 07:30:15 +0200

libvirt (8.0.0-1ubuntu5) jammy; urgency=medium

  * apparmor: Fix QEMU access for UEFI variable files. Backported from
    upstream master commit 7aec69b7fb9d0c. (Closes: #1006324, LP: #1962035)
    Refresh apparmor_profiles_local_include.patch to resolve the conflict.

 -- Martin Pitt <martin.pitt@ubuntu.com>  Wed, 09 Mar 2022 13:43:40 +0100

libvirt (8.0.0-1ubuntu4) jammy; urgency=medium

  * No-change rebuild against libwireshark15.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Mon, 07 Mar 2022 18:34:34 +0000

libvirt (8.0.0-1ubuntu3) jammy; urgency=medium

  * Revert "d/rules, d/libvirt-daemon-system.{postinst,prerm}: never stop
    system services and sockets."
    Due to the fix being in debhelper we no more need this mitigation now.
    (LP: #1959054)

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Thu, 17 Feb 2022 10:08:01 +0100

libvirt (8.0.0-1ubuntu2) jammy; urgency=medium

  * No-change rebuild to update maintainer scripts, see LP: 1959054

 -- Dave Jones <dave.jones@canonical.com>  Wed, 16 Feb 2022 17:04:47 +0000

libvirt (8.0.0-1ubuntu1) jammy; urgency=medium

  * Merge 8.0.0 from Debian unstable (LP: #1946869)
    Among many other fixes and improvements this fixes ceph usage
    in regard to apparmor (LP: #1588576)
    Remaining changes:
    - libvirt-uri.sh: Automatically switch default libvirt URI for users
      via user profile (xen URI on dom0, qemu:///system otherwise)
      [contains lintian fixups of 6.6.0-1ubuntu1]
    - Disable libssh2 support (universe dependency)
    - d/control: add libzfslinux-dev to build-deps
    - d/control: drop libvirt-lxc, vbox and xen drivers to suggest
    - d/control: breaks replaces for augeas lenses move in 6.0.0-1
      (follows Debian, droppable >22.04)
    - debian/patches/ubuntu/ovmf_paths.patch: adjust paths to secboot.fd UEFI
      Secure Boot enabled variants of the OVMF firmware and variable store for
      the paths where we ship these files in Ubuntu.
    - Set qemu-group to kvm (for compat with older ubuntu)
    - Additional apport package-hook
    - Autostart default bridged network (As upstream does, but not Debian).
      In addition to just enabling it our solution provides:
      + do not autostart if subnet is already taken (e.g. in guests).
      + iterate some alternative subnets before giving up
    - d/p/ubuntu/Allow-libvirt-group-to-access-the-socket.patch: This is
      the group based access to libvirt functions as it was used in Ubuntu
      for quite a long time.
      + d/p/ubuntu/daemon-augeas-fix-expected.patch fix some related tests
        due to the group access change.
      + d/libvirt-daemon-system.postinst: add users in sudo to the libvirt
        group.
    - d/p/u/parallel-shutdown.patch: set parallel shutdown by default.
    - Update README.Debian with Ubuntu changes
    - d/p/ubuntu/ubuntu_machine_type.patch: accept ubuntu types as pci440fx
    - fix autopkgtests (LP 1899180)
      + d/t/control, d/t/smoke-qemu-session: fixup smoke-qemu-session by making
        vmlinuz available and accessible (Debian bug 848314)
      + d/t/control: fix smoke-qemu-session by ensuring the service will run
        installing libvirt-daemon-system
      + d/t/smoke-lxc: fix smoke-lxc by ignoring potential issues on destroy as
        long as the following undefine succeeds
      + d/t/smoke-lxc: use systemd instead of sysV to restart the service
      + d/t/control, d/t/smoke-lxc: retry service restart and skip test if
        failing; This was flaky on some release/architectures
      + d/t/smoke-lxc: retry check_domain being flaky on arm64
    - dnsmasq related enhancements
      [now contains dnsmasq-as-priv-user of 6.6.0-1ubuntu1]
      + run dnsmasq as libvirt-dnsmasq (LP: 1743718)
      + d/libvirt-daemon-system.postinst: add libvirt-dnsmasq user and group
      + d/libvirt-daemon-system.postrm: remove libvirt-dnsmasq user and group
        on purge
      + d/p/ubuntu/dnsmasq-as-priv-user: write dnsmasq config with user
        libvirt-dnsmasq and adapt the self tests to expect that config
      + d/libvirt-daemon-system.postinst: fix old libvirt-dnsmasq users group
      + Add dnsmasq configuration to work with system wide dnsmasq-base
    - d/p/ubuntu/set-default-machine-to-ubuntu.patch: to select default
      machine type correctly with newer qemu/libvirt
    - d/p/ubuntu/lp-1861125-ubuntu-models: recognize Ubuntu models for
      (LP 1861125) fixups
    - d/p/ubuntu/wait-for-qemu-kvm.patch - avoid hangs on startup (LP 1887592)
    - Apparmor Delta that is Ubuntu specific or yet to be upstreamed
      split into logical pieces. File names in debian/patches/ubuntu-aa/:
      + 0020-virt-aa-helper-ubuntu-storage-paths.patch:
        apparmor, virt-aa-helper: Allow various storage pools and image
        locations
      + 0029-appmor-libvirt-qemu-Add-9p-support.patch: appmor,
        libvirt-qemu: Add 9p support
      + 0031-virt-aa-helper-Ask-for-no-deny-rule-for-readonly-dis.patch:
        virt-aa-helper: Ask for no deny rule for readonly disk (renamed and
        reworded, was virt-aa-helper-no-explicity-deny-for-basefiles.patch)
      + 0032-apparmor-libvirt-qemu-Allow-reading-charm-specific-c.patch:
        apparmor, libvirt-qemu: Allow reading charm-specific ceph config
      + 0033-UBUNTU-only-apparmor-for-kvm.powerpc-LP-1680384.patch: allow
        commands executed by ubuntu only kvm wrapper on ppc64el
        (LP 1686621 LP 1680384 LP 1784023)
      + 0034-apparmor-virt-aa-helper-access-for-snapped-nova.patch:
        apparmor, virt-aa-helper: access for snapped nova
      + lp-1815910-allow-vhost-net.patch: avoid apparmor issues
        with vhost-net/vhost-vsock/vhost-scsi hotplug (LP: 1815910)
    - libvirt should not use user/group tss for swtpm (LP 1948880)
      + d/libvirt-daemon-system.postinst: own swtpm logdir by user swtpm
      + d/p/u/swtpm-by-swtpm-user.patch: change default spawned swtpm processes
        to user swtpm
      + d/p/u/swtpm-by-swtpm-user.patch: adapt expected self test results
      + d/control: suggest swtpm-tools
      + d/libvirt-daemon-system.postinst: create user/group swtpm if not present
        due to swtpm-tools (LP 1951975)
  * Dropped changes [in Debian now]:
    - d/control: add libtirpc for rpc.h with glibc >=2.32
    - various patch refreshes and .symbols updated from 7.0.0 - 7.6.0
    - debian/rules: disable the netcf backend. (LP: 1764314)
    - d/libvirt-clients.install: completions no more are symlinked to vsh
    - d/rules: disable the now auto-built vstorage backend
    - not-installed: split daemon man pages are no yet installed
    - d/rules: disable the new Cloud Hypervisor driver
    - d/rules: enable more features explicitly
    - d/rules: use apparmor_profiles=enabled instead of the now rejected
      value true
    - rules: Explicitly set remote_default_mode
    - rules: Rework installation of AppArmor-related files
    - d/control, d/rules: enable libssh (LP 1939416)
  * Dropped changes [upstream now]:
    - d/p/u/lp-1913266-*: add vsock options to be usable with s390x secure
      execution (LP 1913266)
    - d/p/u/lp-1927519-virt-aa-helper-Purge-profile-if-corrupted.patch: avoid
      issues due to corrupted apparmor profiles (LP 1927519)
    - Toleration for qemu >=6.0 handling of props (LP 1932264)
    - Persistent vfio-ccw device assignments (LP 1887929)
  * Dropped changes [no more needed]:
    - remove Debian debian/Revert-m4-virt-xdr-rewrite-XDR-check.patch as with
      recent ubuntu glibx 2.32 it is breaking the build
    - update d/p/debian/Revert-m4-virt-xdr-rewrite-XDR-check.patch: to detect
      XDR functions from glibc
    - d/t/smoke-lxc: skip before systemd 248 due to a known bug (LP 1934966)
    - d/t/smoke-lxc: skip if cgroup v1&v2 are present (systemd 248
      was not enough)
  * Added changes:
    - d/p/u/dnsmasq-as-priv-user: update for 8.0.0
    - Add recent upstream fixes to 8.0
      + d/p/backport/qemuDomainSetupDisk-Initialize-targetPaths.patch to work
        in containers like LXD (without guest start would hang).
      + d/p/backport/util-fix-syslog-facility-value.patch to ensure logs
        get passed to syslog/journal correctly.
   - d/rules, d/libvirt-daemon-system.{postinst,postrm}: never stop
     libvirt system services and sockets (LP: #1959054). This allows
     to unblock some transitions that wait on libvirt now; The intention is
     that it is fixed in debhelper and libvirt reverts this change before
     jammy release.

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Mon, 24 Jan 2022 08:49:08 +0100

libvirt (8.0.0-1) unstable; urgency=medium

  * [a26cc81] New upstream version 8.0.0
  * [9f18b0d] patches: Drop backports
  * [7ea1214] patches: Add backport/qemu-fix-inactive-snapshot-revert.patch
  * [9454a95] patches: Add backport/Revert-report-error-when-[...].patch
  * [ec3b590] control: Drop dependency on radvd
    - libvirt no longer uses it
  * [19eb356] control: Drop build dependency on parted
    - The parted binary is only needed at runtime

 -- Andrea Bolognani <eof@kiyuko.org>  Sat, 22 Jan 2022 19:22:57 +0100

libvirt (7.10.0-3) unstable; urgency=medium

  * [16b245a] control: Improve multiarch support
    - Mark libvirt-{daemon-system-systemd,doc} as Multi-Arch: foreign
    - Mark libvirt-wireshark as Multi-Arch: same
    - Mark libvirt-daemon-driver-* as Multi-Arch: no
  * [ef19843] control: Move Recommends on LVM to -daemon package
    - It's used by the storage driver, not the client library
  * [a10f605] control: Update Uploaders field
    - Add Andrea Bolognani, remove Laurent Léonard
  * [c74efcb] control: Drop obsolete version constraints
    - They're satisfied on our expected backport targets (Debian 11
      and Ubuntu 20.04)
  * [1ad0b3a] control: Drop all Pre-Depends
    - They're not necessary on our expected backport targets

 -- Andrea Bolognani <eof@kiyuko.org>  Sun, 09 Jan 2022 11:28:35 +0100

libvirt (7.10.0-2) unstable; urgency=medium

  * Team upload

  [ Andrea Bolognani ]
  * [26f63eb] control: Build-Depend on python3:any to fix cross-building
  * [b14268f] patches: Backport fix for CVE-2021-4147

  [ Joachim Falk ]
  * [9ae5f14] Fix reboot command for LXC containers (Closes: #991773)

 -- Andrea Bolognani <eof@kiyuko.org>  Wed, 29 Dec 2021 10:37:15 +0100

libvirt (7.10.0-1) unstable; urgency=medium

  * Team upload

  * [0817e92] New upstream version 7.10.0
  * [2d2fb25] patches: Drop backported patches

 -- Andrea Bolognani <eof@kiyuko.org>  Wed, 08 Dec 2021 00:24:01 +0100

libvirt (7.9.0-1) unstable; urgency=medium

  * Team upload

  * [2c54c68] New upstream version 7.9.0
    - Closes: #994061
    - Fixes FTBFS (Closes: #997108)
  * [6ca05a9] patches: Update ZFS enablement patches
    - Replace the Debian-specific patch
        debian/Set-defaults-for-zfs-tools.patch
      with backported upstream patches
        backport/meson-Enable-ZFS-storage-backend-even-more-often.patch
        backport/meson-Stop-looking-up-ZFS-programs-at-build-time.patch
  * [32a1e7b] patches: Add backport/wireshark-Switch-to-tvb_bytes_to_str.patch
    - Needed to build against Wireshark 3.6.0
  * [30fdaae] libvirt-daemon-system: Make QEMU cache directory root-owned
    - Recent changes in libvirt make it possible to be more strict
  * [8c2f99b] tests: No longer skip smoke-lxc with both cgroups v1&v2 present
    - The bug that made this workaround necessary has been resolved
  * [803bd5a] control: Bump Standards-Version to 4.6.0
    - No changes needed

 -- Andrea Bolognani <eof@kiyuko.org>  Mon, 06 Dec 2021 21:56:00 +0100

libvirt (7.6.0-0ubuntu3) jammy; urgency=medium

  * d/libvirt-daemon-system.postinst: create user/group swtpm if not present
    due to swtpm-tools (LP: #1951975)

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Wed, 24 Nov 2021 07:50:53 +0100

libvirt (7.6.0-0ubuntu2) jammy; urgency=medium

  * d/p/u/lp-1927519-virt-aa-helper-Purge-profile-if-corrupted.patch: avoid
    issues due to corrupted apparmor profiles (LP: #1927519)
  * libvirt should not use user/group tss for swtpm (LP: #1948880)
    - d/libvirt-daemon-system.postinst: own swtpm logdir by user swtpm
    - d/p/u/swtpm-by-swtpm-user.patch: change default spawned swtpm processes
      to user swtpm
    - d/p/u/swtpm-by-swtpm-user.patch: adapt expected self test results
    - d/control: suggest swtpm-tools

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Thu, 11 Nov 2021 12:11:38 +0100

libvirt (7.6.0-0ubuntu1) impish; urgency=medium

  * Merge v7.6.0 from upstream and unreleased changes from Debian git.
    Among other bugs this fixes copy-storage-inc based migrations (LP: #1936778)
    - New upstream version 7.5.0
    - New upstream version 7.6.0
    - symbols: Bump symbol versions
    - refresh d/p/debian/Set-defaults-for-zfs-tools.patch for v7.5.0
    - patches: Refresh patches
    - d/rules: disable the new Cloud Hypervisor driver
    - d/rules: enable more features explicitly
    - d/rules: use apparmor_profiles=enabled instead of the now rejected
      value true
    - update d/p/debian/Revert-m4-virt-xdr-rewrite-XDR-check.patch: to detect
      XDR functions from glibc
  * d/control, d/rules: enable libssh (LP: #1939416)
  * refresh ubuntu patches for v7.6.0
  * Further fixups for v7.6.0 (thanks to Andrea Bolognani)
    - rules: Explicitly set remote_default_mode
    - rules: Rework installation of AppArmor-related files

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Wed, 11 Aug 2021 08:11:16 +0200

libvirt (7.6.0-1) unstable; urgency=medium

  * Team upload

  [ Andrea Bolognani ]
  * [a256a80] New upstream version 7.6.0
    - Fixes CVE-2021-3667 (Closes: #991594)
  * [4a96793] rules: Disable netcf support
    - netcf support is considered deprecated upstream

  [ Christian Ehrhardt ]
  * [ac145fd] d/rules: disable the new Cloud Hypervisor driver
    - Cloud Hypervisor is not available in Debian
  * [4bafac5] d/control, d/rules: enable libssh
    - Closes: #985969
    - LP: #1939416
  * [fbc728f] d/t/smoke-lxc: skip if cgroup v1&v2 are present
    - This works around an upstream bug which causes the LXC driver
      to break when both v1 and v2 cgroups are in use
  * [8d2e0fe] d/control: add libtirpc for rpc.h with glibc >=2.31-14
    - Switch from glibc's legacy RPC implementation, which is now
      disabled in the Debian package, to libtirpc's one

 -- Andrea Bolognani <eof@kiyuko.org>  Thu, 19 Aug 2021 21:16:21 +0200

libvirt (7.4.0-0ubuntu3) impish; urgency=medium

  * d/t/smoke-lxc: skip if cgroup v1&v2 are present (systemd 248
    was not enough)

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Thu, 08 Jul 2021 14:20:53 +0200

libvirt (7.4.0-0ubuntu2) impish; urgency=medium

  * d/t/smoke-lxc: skip before systemd 248 due to a known bug (LP: #1934966)

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Thu, 08 Jul 2021 09:33:49 +0200

libvirt (7.4.0-0ubuntu1) impish; urgency=medium

  * Merge v7.4.0 from upstream,
    among a lot of new features and fixes this closes a few of issues
    reported against Ubuntu
    - Toleration for qemu >=6.0 handling of props (LP: #1932264)
    - Persistent vfio-ccw device assignments (LP: #1887929)
    - Drop patches that are upstream in v7.4.0
      - d/p/b/meson-Fix-cross-building-of-dtrace-probes.patch
      - d/p/b/apparmor-let-image-label-setting-loop-over-backing-files.patch
      - d/p/r/systemd-Revert-remote-Add-libvirtd-dependency-to-virt-gue.patch
      - d/p/u/lp-1913266-*: add vsock options to be usable with s390x
      - d/p/u/lp-1921754-*: EPYC-Rome-v2
      - d/p/u/lp-1921880-*: EPYC-Milan
    - d/libvirt-clients.install: completions no more are symlinked to vsh
    - Revert "disable firewalld support (universe dependency)"
      This does not add a runtime dependency and while firewalld isn't in
      main that way users can install and use it from universe.
      (LP: #1928113)
    - d/libvirt0.symbols: bump symbol versions for 7.4.0
    - d/rules: disable the now auto-built vstorage backend
    - not-installed: split daemon man pages are no yet installed

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Thu, 17 Jun 2021 10:33:27 +0200

libvirt (7.0.0-3) unstable; urgency=medium

  * Team upload

  * [5ae74e0] libvirtd: Improve default file
  * [b11d3c3] virtlogd: Fix some bugs in the sysv init script

 -- Andrea Bolognani <eof@kiyuko.org>  Fri, 26 Feb 2021 16:46:34 +0100

libvirt (7.0.0-2ubuntu2) hirsute; urgency=medium

  * d/p/u/lp-1921754*: add EPYC-Rome-v2 as v1 missed IBRS and thereby fails
    on some HW/Guest combinations e.g. Windows 10 on Threadripper
    (LP: #1921754)
  * d/p/u/lp-1921880*: add EPYC-Milan features and named cpu type support
    (LP: #1921880)

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Wed, 07 Apr 2021 13:33:46 +0200

libvirt (7.0.0-2ubuntu1) hirsute; urgency=medium

  * Merge with Debian 7.0.0-1 from Debian unstable
    Remaining changes:
    - libvirt-uri.sh: Automatically switch default libvirt URI for users
      via user profile (xen URI on dom0, qemu:///system otherwise)
      [contains lintian fixups of 6.6.0-1ubuntu1]
    - Disable libssh2 support (universe dependency)
    - Disable firewalld support (universe dependency)
    - d/control: add libzfslinux-dev to build-deps
    - d/control: drop libvirt-lxc, vbox and xen drivers to suggest
    - d/control: breaks replaces for augeas lenses move in 6.0.0-1
      (follows Debian, droppable >22.04)
    - debian/rules: disable the netcf backend. (LP: 1764314)
    - debian/patches/ubuntu/ovmf_paths.patch: adjust paths to secboot.fd UEFI
      Secure Boot enabled variants of the OVMF firmware and variable store for
      the paths where we ship these files in Ubuntu.
    - Set qemu-group to kvm (for compat with older ubuntu)
    - Additional apport package-hook
    - Autostart default bridged network (As upstream does, but not Debian).
      In addition to just enabling it our solution provides:
      + do not autostart if subnet is already taken (e.g. in guests).
      + iterate some alternative subnets before giving up
    - d/p/ubuntu/Allow-libvirt-group-to-access-the-socket.patch: This is
      the group based access to libvirt functions as it was used in Ubuntu
      for quite a long time.
      + d/p/ubuntu/daemon-augeas-fix-expected.patch fix some related tests
        due to the group access change.
      + d/libvirt-daemon-system.postinst: add users in sudo to the libvirt
        group.
    - ubuntu/parallel-shutdown.patch: set parallel shutdown by default.
    - Update README.Debian with Ubuntu changes
    - d/p/ubuntu/ubuntu_machine_type.patch: accept ubuntu types as pci440fx
    - fix autopkgtests (LP 1899180)
      + d/t/control, d/t/smoke-qemu-session: fixup smoke-qemu-session by making
        vmlinuz available and accessible (Debian bug 848314)
      + d/t/control: fix smoke-qemu-session by ensuring the service will run
        installing libvirt-daemon-system
      + d/t/smoke-lxc: fix smoke-lxc by ignoring potential issues on destroy as
        long as the following undefine succeeds
      + d/t/smoke-lxc: use systemd instead of sysV to restart the service
      + d/t/control, d/t/smoke-lxc: retry service restart and skip test if
        failing; This was flaky on some release/architectures
      + d/t/smoke-lxc: retry check_domain being flaky on arm64
    - dnsmasq related enhancements
      [now contains dnsmasq-as-priv-user of 6.6.0-1ubuntu1]
      + run dnsmasq as libvirt-dnsmasq (LP: 1743718)
      + d/libvirt-daemon-system.postinst: add libvirt-dnsmasq user and group
      + d/libvirt-daemon-system.postrm: remove libvirt-dnsmasq user and group
        on purge
      + d/p/ubuntu/dnsmasq-as-priv-user: write dnsmasq config with user
        libvirt-dnsmasq and adapt the self tests to expect that config
      + d/libvirt-daemon-system.postinst: fix old libvirt-dnsmasq users group
      + Add dnsmasq configuration to work with system wide dnsmasq-base
    - d/p/ubuntu/set-default-machine-to-ubuntu.patch: to select default
      machine type correctly with newer qemu/libvirt
    - d/p/ubuntu/lp-1861125-ubuntu-models: recognize Ubuntu models for
      (LP 1861125) fixups
    - d/p/ubuntu/wait-for-qemu-kvm.patch - avoid hangs on startup (LP 1887592)
    - remove Debian debian/Revert-m4-virt-xdr-rewrite-XDR-check.patch as with
      recent ubuntu glibx 2.32 it is breaking the build
    - d/control: add libtirpc for rpc.h with glibc >=2.32
    - Apparmor Delta that is Ubuntu specific or yet to be upstreamed
      split into logical pieces. File names in debian/patches/ubuntu-aa/:
      + 0020-virt-aa-helper-ubuntu-storage-paths.patch:
        apparmor, virt-aa-helper: Allow various storage pools and image
        locations
      + 0029-appmor-libvirt-qemu-Add-9p-support.patch: appmor,
        libvirt-qemu: Add 9p support
      + 0031-virt-aa-helper-Ask-for-no-deny-rule-for-readonly-dis.patch:
        virt-aa-helper: Ask for no deny rule for readonly disk (renamed and
        reworded, was virt-aa-helper-no-explicity-deny-for-basefiles.patch)
      + 0032-apparmor-libvirt-qemu-Allow-reading-charm-specific-c.patch:
        apparmor, libvirt-qemu: Allow reading charm-specific ceph config
      + 0033-UBUNTU-only-apparmor-for-kvm.powerpc-LP-1680384.patch: allow
        commands executed by ubuntu only kvm wrapper on ppc64el
        (LP 1686621 LP 1680384 LP 1784023)
      + 0034-apparmor-virt-aa-helper-access-for-snapped-nova.patch:
        apparmor, virt-aa-helper: access for snapped nova
      + lp-1815910-allow-vhost-net.patch: avoid apparmor issues
        with vhost-net/vhost-vsock/vhost-scsi hotplug (LP: 1815910)
    - d/p/u/lp-1913266-*: add vsock options to be usable with s390x secure
      execution (LP 1913266)
  * Dropped Changes [in Debian now]
    - Avoid various issues around service/socket status after install/reinstall
      and on upgrades (LP 1914054).
      - d/rules: let sockets use --no-stop-on-upgrade to avoid false positives
      - d/rules: --no-restart-after-upgrade does not prevent restarts
      - d/rules: avoid --no-start which breaks .sockets on re-install
      - d/rules: start, but do not restart libvirt-guests.service
    - Dependency improvements yet unreleased from salsa/debian/master thanks
      to Andrea Bolognani (Debian #981435).
      - control: Always explicitly depend on libvirt0
      - control: Always use versioned deps for libvirt components
    - d/control: extend demotion of libvirt-lxc related dependencies to
      libvirt-login-shell

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Tue, 23 Feb 2021 12:16:08 +0100

libvirt (7.0.0-2) unstable; urgency=medium

  * Team upload

  [ Matthew Gabeler-Lee ]
  * [7391555] control: recommend qemu support for iscsi-direct
    - Closes: #981284

  [ Andrea Bolognani ]
  * [8048eef] control: Always use versioned deps for libvirt components
    - Closes: #981435
  * [effe0cd] control: Always explicitly depend on libvirt0
  * [d3c8ec2] control: Bump Standards-Version to 4.5.1

  [ Christian Ehrhardt ]
  * [3cbe8f9] d/control: avoid libvirt-clients to pull in libvirt-daemon
  * [295944d] systemd: start, but do not restart libvirt-guests.service
  * [ddbad4b] systemd: do not restart sockets

 -- Andrea Bolognani <eof@kiyuko.org>  Wed, 10 Feb 2021 23:23:32 +0100

libvirt (7.0.0-1ubuntu2) hirsute; urgency=medium

  * d/control: extend demotion of libvirt-lxc related dependencies to
    libvirt-login-shell

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Thu, 04 Feb 2021 13:44:49 +0100

libvirt (7.0.0-1ubuntu1) hirsute; urgency=medium

  * Merge with Debian 7.0.0-1 from Debian unstable
    This fixes unwanted conffile prompts (LP: #1906248)
    Remaining changes:
    - libvirt-uri.sh: Automatically switch default libvirt URI for users
      via user profile (xen URI on dom0, qemu:///system otherwise)
      [contains lintian fixups of 6.6.0-1ubuntu1]
    - Disable libssh2 support (universe dependency)
    - Disable firewalld support (universe dependency)
    - d/control: add libzfslinux-dev to build-deps
    - d/control: drop libvirt-lxc, vbox and xen drivers to suggest
    - d/control: breaks replaces for augeas lenses move in 6.0.0-1
      (follows Debian, droppable >22.04)
    - debian/rules: disable the netcf backend. (LP: 1764314)
    - debian/patches/ubuntu/ovmf_paths.patch: adjust paths to secboot.fd UEFI
      Secure Boot enabled variants of the OVMF firmware and variable store for
      the paths where we ship these files in Ubuntu.
    - Set qemu-group to kvm (for compat with older ubuntu)
    - Additional apport package-hook
    - Autostart default bridged network (As upstream does, but not Debian).
      In addition to just enabling it our solution provides:
      + do not autostart if subnet is already taken (e.g. in guests).
      + iterate some alternative subnets before giving up
    - d/p/ubuntu/Allow-libvirt-group-to-access-the-socket.patch: This is
      the group based access to libvirt functions as it was used in Ubuntu
      for quite a long time.
      + d/p/ubuntu/daemon-augeas-fix-expected.patch fix some related tests
        due to the group access change.
      + d/libvirt-daemon-system.postinst: add users in sudo to the libvirt
        group.
    - ubuntu/parallel-shutdown.patch: set parallel shutdown by default.
    - Update README.Debian with Ubuntu changes
    - d/p/ubuntu/ubuntu_machine_type.patch: accept ubuntu types as pci440fx
    - fix autopkgtests (LP 1899180)
      + d/t/control, d/t/smoke-qemu-session: fixup smoke-qemu-session by making
        vmlinuz available and accessible (Debian bug 848314)
      + d/t/control: fix smoke-qemu-session by ensuring the service will run
        installing libvirt-daemon-system
      + d/t/smoke-lxc: fix smoke-lxc by ignoring potential issues on destroy as
        long as the following undefine succeeds
      + d/t/smoke-lxc: use systemd instead of sysV to restart the service
      + d/t/control, d/t/smoke-lxc: retry service restart and skip test if
        failing; This was flaky on some release/architectures
      + d/t/smoke-lxc: retry check_domain being flaky on arm64
    - dnsmasq related enhancements
      [now contains dnsmasq-as-priv-user of 6.6.0-1ubuntu1]
      + run dnsmasq as libvirt-dnsmasq (LP: 1743718)
      + d/libvirt-daemon-system.postinst: add libvirt-dnsmasq user and group
      + d/libvirt-daemon-system.postrm: remove libvirt-dnsmasq user and group
        on purge
      + d/p/ubuntu/dnsmasq-as-priv-user: write dnsmasq config with user
        libvirt-dnsmasq and adapt the self tests to expect that config
      + d/libvirt-daemon-system.postinst: fix old libvirt-dnsmasq users group
      + Add dnsmasq configuration to work with system wide dnsmasq-base
    - d/p/ubuntu/set-default-machine-to-ubuntu.patch: to select default
      machine type correctly with newer qemu/libvirt
    - d/p/ubuntu/lp-1861125-ubuntu-models: recognize Ubuntu models for
      (LP 1861125) fixups
    - d/p/ubuntu/wait-for-qemu-kvm.patch - avoid hangs on startup (LP 1887592)
    - remove Debian debian/Revert-m4-virt-xdr-rewrite-XDR-check.patch as with
      recent ubuntu glibx 2.32 it is breaking the build
    - d/control: add libtirpc for rpc.h with glibc >=2.32
    - Apparmor Delta that is Ubuntu specific or yet to be upstreamed
      split into logical pieces. File names in debian/patches/ubuntu-aa/:
      + 0020-virt-aa-helper-ubuntu-storage-paths.patch:
        apparmor, virt-aa-helper: Allow various storage pools and image
        locations
      + 0029-appmor-libvirt-qemu-Add-9p-support.patch: appmor,
        libvirt-qemu: Add 9p support
      + 0031-virt-aa-helper-Ask-for-no-deny-rule-for-readonly-dis.patch:
        virt-aa-helper: Ask for no deny rule for readonly disk (renamed and
        reworded, was virt-aa-helper-no-explicity-deny-for-basefiles.patch)
      + 0032-apparmor-libvirt-qemu-Allow-reading-charm-specific-c.patch:
        apparmor, libvirt-qemu: Allow reading charm-specific ceph config
      + 0033-UBUNTU-only-apparmor-for-kvm.powerpc-LP-1680384.patch: allow
        commands executed by ubuntu only kvm wrapper on ppc64el
        (LP 1686621 LP 1680384 LP 1784023)
      + 0034-apparmor-virt-aa-helper-access-for-snapped-nova.patch:
        apparmor, virt-aa-helper: access for snapped nova
      + lp-1815910-allow-vhost-net.patch: avoid apparmor issues
        with vhost-net/vhost-vsock/vhost-scsi hotplug (LP: 1815910)
  * Dropped Changes [in Debian now]
    - 0050-local-include-for-libvirt-qemu.patch,
      d/libvirt-daemon-system.postinst: provide a local apparmor include
      for abstraction/libvirt-qemu (LP: 1786019)
  * Dropped Changes [in upstream now]
    - d/p/ubuntu-aa/apparmor-allow-kvm-spice-compat-wrapper.patch: fix migrating
      pre-Focal guests by allowing kvm-spice
    - virt-ssh-helper: fix slow migrations and volume transfers (LP 1904584)
      - d/p/ubuntu/lp-1904584-remote-make-ssh-helper-massively-faster.patch
      - d/p/ubuntu/lp-1904584-util-avoid-glib-event-loop-workaround.patch
  * Dropped Changes [ready for main]
    - d/control: drop mdevctl to a suggest until (LP: #1889248) is ready
  * Added Changes:
    - Avoid various issues around service/socket status after install/reinstall
      and on upgrades (LP: #1914054).
      - d/rules: let sockets use --no-stop-on-upgrade to avoid false positives
      - d/rules: --no-restart-after-upgrade does not prevent restarts
      - d/rules: avoid --no-start which breaks .sockets on re-install
      - d/rules: start, but do not restart libvirt-guests.service
    - d/p/u/lp-1913266-*: add vsock options to be usable with s390x secure
      execution (LP: #1913266)
    - Dependency improvements yet unreleased from salsa/debian/master thanks
      to Andrea Bolognani (Debian #981435).
      - control: Always explicitly depend on libvirt0
      - control: Always use versioned deps for libvirt components

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Mon, 25 Jan 2021 14:32:05 +0100

libvirt (7.0.0-1) unstable; urgency=medium

  * Team upload

  [ Andrea Bolognani ]
  * [561e347] libvirt-daemon-config-nwfilter: Install new nwfilters
  * [56231e3] patches: Add backport/meson-Fix-cross-building-[...].patch
    - Closes: #980334

  [ Christian Ehrhardt ]
  * [6568c68] apparmor: allow hot-plug for qcow backing chains
    - Closes: #981001
  * [8173ce4] libvirt-daemon-config-*: reload libvirtd before restart
  * [dc21d88] systemd: Drop libvirtd dep from virt-guest-shutdown.target
    - Avoids reintroducing: #955216

 -- Andrea Bolognani <eof@kiyuko.org>  Thu, 28 Jan 2021 22:06:43 +0100

libvirt (6.9.0-4) unstable; urgency=medium

  * Team upload

  * [f5c0ebf] control: Strengthen dependencies between packages

 -- Andrea Bolognani <eof@kiyuko.org>  Fri, 22 Jan 2021 22:31:04 +0100

libvirt (6.9.0-3) unstable; urgency=medium

  * Team upload

  * [81999fb] rules: Move virt-aa-helper to libvirt-daemon
  * [b9b6a95] control: Make libvirt-daemon-system-{systemd,sysv} Arch: all

 -- Andrea Bolognani <eof@kiyuko.org>  Tue, 19 Jan 2021 23:10:20 +0100

libvirt (6.9.0-2) experimental; urgency=medium

  * Team upload

  [ Andrea Bolognani ]
  * [55504dd] libvirt-daemon-config-network: New binary package
    - Closes: #973489
  * [0168a25] libvirt-daemon-config-nwfilter: New binary package
  * [7ad0fe3] libvirt-daemon-driver-storage-iscsi-direct: New binary package
    - Closes: #918728
  * [aadb56a] libvirt-login-shell: New binary package
  * [807a8de] libvirt-clients: Move out virt-qemu-run
  * [3af477f] libvirt-daemon: Move out libvirt_lxc
  * [03f8bbb] libvirt-daemon: Move out sanlock-related files
  * [b94f649] libvirt-daemon: Move out bash-completion support
    - Closes: #904036

  [ Guido Günther ]
  * [acb5c16] d/control: Use qemu-system instead of qemu
    - Closes: #966239

  [ Christian Ehrhardt ]
  * [8c1bf5d] d/control: fix circular dependency on libvirt-daemon-driver-qemu
    - Closes: #963898
  * [3d8fdd2] apparmor: add local include for libvirt-qemu & libvirt-lxc

 -- Andrea Bolognani <eof@kiyuko.org>  Thu, 14 Jan 2021 23:51:32 +0100

libvirt (6.9.0-1ubuntu4) hirsute; urgency=medium

  * Improve flaky smoke-lxc test (LP: #1899180)
    - d/t/control, d/t/smoke-lxc: retry service restart and skip test if
      failing; This was flaky on some release/architectures
    - d/t/smoke-lxc: retry check_domain being flaky on arm64

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Fri, 04 Dec 2020 08:12:02 +0100

libvirt (6.9.0-1ubuntu3) hirsute; urgency=high

  * No change rebuild against wireshark 3.4.0

 -- Balint Reczey <rbalint@ubuntu.com>  Mon, 07 Dec 2020 08:06:59 +0100

libvirt (6.9.0-1ubuntu2) hirsute; urgency=medium

  * virt-ssh-helper: fix slow migrations and volume transfers (LP: #1904584)
    - d/p/ubuntu/lp-1904584-remote-make-ssh-helper-massively-faster.patch
    - d/p/ubuntu/lp-1904584-util-avoid-glib-event-loop-workaround.patch

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Thu, 26 Nov 2020 16:52:23 +0100

libvirt (6.9.0-1ubuntu1) hirsute; urgency=medium

  * Merge with Debian 6.8.0-1 from unstable
    Remaining changes:
    - libvirt-uri.sh: Automatically switch default libvirt URI for users
      via user profile (xen URI on dom0, qemu:///system otherwise)
      [contains lintian fixups of 6.6.0-1ubuntu1]
    - Disable libssh2 support (universe dependency)
    - Disable firewalld support (universe dependency)
    - d/control: add libzfslinux-dev to build-deps
    - d/control: drop libvirt-lxc, vbox and xen drivers to suggest
    - d/control: breaks replaces for augeas lenses move in 6.0.0-1
      (follows Debian, droppable >22.04)
    - d/control: drop mdevctl to a suggest until (LP 1889248) is ready
    - debian/rules: disable the netcf backend. (LP: 1764314)
    - debian/patches/ubuntu/ovmf_paths.patch: adjust paths to secboot.fd UEFI
      Secure Boot enabled variants of the OVMF firmware and variable store for
      the paths where we ship these files in Ubuntu.
    - Set qemu-group to kvm (for compat with older ubuntu)
    - Additional apport package-hook
    - Autostart default bridged network (As upstream does, but not Debian).
      In addition to just enabling it our solution provides:
      + do not autostart if subnet is already taken (e.g. in guests).
      + iterate some alternative subnets before giving up
    - d/p/ubuntu/Allow-libvirt-group-to-access-the-socket.patch: This is
      the group based access to libvirt functions as it was used in Ubuntu
      for quite a long time.
      + d/p/ubuntu/daemon-augeas-fix-expected.patch fix some related tests
        due to the group access change.
      + d/libvirt-daemon-system.postinst: add users in sudo to the libvirt
        group.
    - ubuntu/parallel-shutdown.patch: set parallel shutdown by default.
    - Update README.Debian with Ubuntu changes
    - d/p/ubuntu/ubuntu_machine_type.patch: accept ubuntu types as pci440fx
    - fix autopkgtests
      + d/t/control, d/t/smoke-qemu-session: fixup smoke-qemu-session by making
        vmlinuz available and accessible (Debian bug 848314)
      + d/t/control: fix smoke-qemu-session by ensuring the service will run
        installing libvirt-daemon-system
      + d/t/smoke-lxc: fix smoke-lxc by ignoring potential issues on destroy as
        long as the following undefine succeeds
      + d/t/smoke-lxc: use systemd instead of sysV to restart the service
    - dnsmasq related enhancements
      [now contains dnsmasq-as-priv-user of 6.6.0-1ubuntu1]
      + run dnsmasq as libvirt-dnsmasq (LP: 1743718)
      + d/libvirt-daemon-system.postinst: add libvirt-dnsmasq user and group
      + d/libvirt-daemon-system.postrm: remove libvirt-dnsmasq user and group
        on purge
      + d/p/ubuntu/dnsmasq-as-priv-user: write dnsmasq config with user
        libvirt-dnsmasq and adapt the self tests to expect that config
      + d/libvirt-daemon-system.postinst: fix old libvirt-dnsmasq users group
      + Add dnsmasq configuration to work with system wide dnsmasq-base
    - d/p/ubuntu/set-default-machine-to-ubuntu.patch: to select default
      machine type correctly with newer qemu/libvirt
    - d/p/ubuntu/lp-1861125-ubuntu-models: recognize Ubuntu models for
      (LP 1861125) fixups
    - d/p/ubuntu/wait-for-qemu-kvm.patch - avoid hangs on startup (LP 1887592)
    - Apparmor Delta that is Ubuntu specific or yet to be upstreamed
      split into logical pieces. File names in debian/patches/ubuntu-aa/:
      + 0020-virt-aa-helper-ubuntu-storage-paths.patch:
        apparmor, virt-aa-helper: Allow various storage pools and image
        locations
      + 0029-appmor-libvirt-qemu-Add-9p-support.patch: appmor,
        libvirt-qemu: Add 9p support
      + 0031-virt-aa-helper-Ask-for-no-deny-rule-for-readonly-dis.patch:
        virt-aa-helper: Ask for no deny rule for readonly disk (renamed and
        reworded, was virt-aa-helper-no-explicity-deny-for-basefiles.patch)
      + 0032-apparmor-libvirt-qemu-Allow-reading-charm-specific-c.patch:
        apparmor, libvirt-qemu: Allow reading charm-specific ceph config
      + 0033-UBUNTU-only-apparmor-for-kvm.powerpc-LP-1680384.patch: allow
        commands executed by ubuntu only kvm wrapper on ppc64el
        (LP 1686621 LP 1680384 LP 1784023)
      + 0034-apparmor-virt-aa-helper-access-for-snapped-nova.patch:
        apparmor, virt-aa-helper: access for snapped nova
      + 0050-local-include-for-libvirt-qemu.patch,
        d/libvirt-daemon-system.postinst: provide a local apparmor include
        for abstraction/libvirt-qemu (LP: 1786019)
      + lp-1815910-allow-vhost-net.patch: avoid apparmor issues
        with vhost-net/vhost-vsock/vhost-scsi hotplug (LP: 1815910)
  * Dropped Changes [in Debian now]
    - d/p/u/lp-1892826-Revert-m4-virt-xdr-rewrite-XDR-check.patch: avoid clashes
      between libtripc and glibc that break libvirt-lxc (LP 1892826)
  * Dropped Changes [in upstream now]
    - d/p/ubuntu/lp-1901242-util-Fix-logic-in-virFileSetCOW.patch: fix dir pool
      handling on non BTRFS affecting virt-manager, api and commandline pool
      handling (LP 1901242)
    - d/p/ubuntu-aa/lp-1892736-apparmor-allow-libvirtd-to-call-virtiofsd.patch:
      allow libvirt to control virtiofsd (LP 1892736)
    - d/p/ubuntu-aa/apparmor-allow-unmounting-.dev-entries.patch: avoid
      triggering denials in devmapper error path
    - d/p/ubuntu-aa/apparmor-profiles-are-meant-to-allow-adding-permanen.patch:
      (again) allow permanent per guest overrides (LP 1745114)
    - d/p/ubuntu-aa/lp-1847361-load-versioned-module.patch: allow loading
      versioned modules after qemu package upgrades (LP 1847361)
    - d/p/ubuntu-aa/0003-apparmor-libvirt-qemu-Allow-read-access-to-overcommi.
      patch: apparmor, libvirt-qemu: Allow read access to overcommit_memory
    - d/p/ubuntu-aa/0007-apparmor-libvirt-qemu-Allow-owner-read-access-to-PRO.
      patch: apparmor, libvirt-qemu: Allow owner read access to @{PROC}/*/auxv
    - d/p/ubuntu/lp-1887490-*: add named types and definitions for EPYC-Rome
      chips (LP 1887490)
    - 0030-virt-aa-helper-Complete-9p-support.patch: virt-aa-helper:
      add l to 9p file options.
  * Added Changes
    - d/p/ubuntu/daemon-augeas-fix-expected.patch: update for 6.9
    - d/p/ubuntu/Allow-libvirt-group-to-access-the-socket.patch: update for 6.9
    - remove Debian debian/Revert-m4-virt-xdr-rewrite-XDR-check.patch as with
      recent ubuntu glibx 2.32 it is breaking the build
    - d/control: add libtirpc for rpc.h with glibc >=2.32
    - d/p/ubuntu-aa/apparmor-allow-kvm-spice-compat-wrapper.patch: fix migrating
      pre-Focal guests by allowing kvm-spice

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Mon, 02 Nov 2020 12:02:26 +0100

libvirt (6.9.0-1) unstable; urgency=medium

  * Team upload

  * [9328bc8] New upstream version 6.9.0
  * [88c8a9e] patches: Drop backport/rpc-Fix-virt-ssh-helper-detection.patch

 -- Andrea Bolognani <eof@kiyuko.org>  Sun, 08 Nov 2020 15:33:59 +0100

libvirt (6.8.0-1) unstable; urgency=medium

  * Team upload

  * [a09e8f2] New upstream version 6.8.0
  * [11671ad] patches: Drop backport/[...]gluster-module-dep.patch
  * [d4522ee] patches: Add backport/rpc-Fix-virt-ssh-helper-detection.patch
  * [1012105] libvirt-daemon: Install virt-ssh-helper
  * [1070367] control: Drop Build-Depends on netcat-openbsd
  * [509eb72] control: Drop Build-Depends on libdbus-1-dev

 -- Andrea Bolognani <eof@kiyuko.org>  Wed, 28 Oct 2020 01:08:23 +0100

libvirt (6.7.0-3) experimental; urgency=medium

  * Team upload

  * [2a7b4f4] rules: Decrease timeout for tests to 5m
  * [6337ea2] rules: Make dh_missing errors non-fatal for -indep builds

 -- Andrea Bolognani <eof@kiyuko.org>  Sun, 11 Oct 2020 16:29:18 +0200

libvirt (6.7.0-2) experimental; urgency=medium

  * [7b7ff73] patches: Add backport/[...]gluster-module-dep.patch
  * [a9cc391] debhelper: Use compat level 13
  * [b327f9a] rules: Increase timeout for tests to 15m

 -- Andrea Bolognani <eof@kiyuko.org>  Thu, 10 Sep 2020 18:29:25 +0200

libvirt (6.7.0-1) experimental; urgency=medium

  * Team upload

  * [0d7a347] New upstream version 6.7.0
  * [c6306e9] patches: Drop obsolete patches
    The following patches are no longer necessary:
    - backport/apparmor-allow-default-pki-path.patch
    - backport/apparmor-allow-libvirtd-to-call-pygrub.patch
    - backport/apparmor-allow-libvirtd-to-call-virtiofsd.patch
    - backport/tools-fix-libvirt-guests.sh-text-assignments.patch
    - backport/virdevmapper-Don-t-cache-device-mapper-major.patch
    - backport/virdevmapper-Handle-kernel-without-device-mapper-support.patch
    - backport/virdevmapper-Ignore-all-errors-when-opening-dev-mapper-co.patch
    - debian/Prefer-sbin-over-usr-sbin.patch
  * [72f7997] patches: Rewrite build system patches
    The following patches have been rewritten:
    - debian/Revert-m4-virt-xdr-rewrite-XDR-check.patch
    - debian/Set-defaults-for-zfs-tools.patch
  * [37e7b80] patches: Add debian/Use-sensible-editor-by-default.patch
    Replaces use of the removed --with-default-editor configure option
  * [c326ac4] control: Add Build-Depends on meson

 -- Andrea Bolognani <eof@kiyuko.org>  Tue, 01 Sep 2020 23:26:23 +0200

libvirt (6.6.0-2) unstable; urgency=medium

  * Team upload

  [ Christian Ehrhardt ]
  * fix libvirt-lxc that was broken by libtirpc linking issues (LP: #1892826)
    - [92acaf6] add d/p/debian/Revert-m4-virt-xdr-rewrite-XDR-check.patch
    - [90093c0] Revert "control: Add Build-Depends on libtirpc-dev"
  * [c12faf1] replace patches for pki and pygrub with clean upstream backports
  * [6377d90] apparmor: allow libvirtd to call virtiofsd (LP: #1892736)

 -- Andrea Bolognani <eof@kiyuko.org>  Fri, 28 Aug 2020 17:18:51 +0200

libvirt (6.6.0-1ubuntu4) hirsute; urgency=medium

  * d/p/ubuntu/lp-1901242-util-Fix-logic-in-virFileSetCOW.patch: fix dir pool
    handling on non BTRFS affecting virt-manager, api and commandline pool
    handling (LP: #1901242)

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Wed, 28 Oct 2020 07:47:53 +0100

libvirt (6.6.0-1ubuntu3) groovy; urgency=medium

  * d/p/ubuntu/lp-1887490-*: add named types and definitions for EPYC-Rome
    chips (LP: #1887490)

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Thu, 08 Oct 2020 07:36:06 +0200

libvirt (6.6.0-1ubuntu2) groovy; urgency=medium

  * d/p/u/lp-1892826-Revert-m4-virt-xdr-rewrite-XDR-check.patch: avoid clashes
    between libtripc and glibc that break libvirt-lxc (LP: #1892826)
  * d/p/ubuntu-aa/lp-1892736-apparmor-allow-libvirtd-to-call-virtiofsd.patch:
    allow libvirt to control virtiofsd (LP: #1892736)

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Tue, 25 Aug 2020 14:53:26 +0200

libvirt (6.6.0-1ubuntu1) groovy; urgency=medium

  * Merge with Debian 6.6.0-1 from experimental
    Among many other new features and fixes this includes fixes for:
    (LP: #1874647) - Stale libvirt cache leads to VM startup failures
    (LP: #1869796) - bad ordering and dependent restarts of services/sockets
    Remaining changes:
    - d/p/ubuntu-aa/lp-1847361-load-versioned-module.patch: allow loading
      versioned modules after qemu package upgrades (LP 1847361)
    - libvirt-uri.sh: Automatically switch default libvirt URI for users
      via user profile (xen URI on dom0, qemu:///system otherwise)
    - Disable libssh2 support (universe dependency)
    - Disable firewalld support (universe dependency)
    - Set qemu-group to kvm (for compat with older ubuntu)
    - Additional apport package-hook
    - Autostart default bridged network (As upstream does, but not Debian).
      In addition to just enabling it our solution provides:
      + do not autostart if subnet is already taken (e.g. in guests).
      + iterate some alternative subnets before giving up
    - d/p/ubuntu/Allow-libvirt-group-to-access-the-socket.patch: This is
      the group based access to libvirt functions as it was used in Ubuntu
      for quite long.
      + d/p/ubuntu/daemon-augeas-fix-expected.patch fix some related tests
        due to the group access change.
      + d/libvirt-daemon-system.postinst: add users in sudo to the libvirt
        group.
    - ubuntu/parallel-shutdown.patch: set parallel shutdown by default.
    - Update README.Debian with Ubuntu changes
    - d/p/ubuntu/ubuntu_machine_type.patch: accept ubuntu types as pci440fx
    - fix autopkgtests
      + d/t/control, d/t/smoke-qemu-session: fixup smoke-qemu-session by making
        vmlinuz available and accessible (Debian bug 848314)
      + d/t/control: fix smoke-qemu-session by ensuring the service will run
        installing libvirt-daemon-system
      + d/t/smoke-lxc: fix smoke-lxc by ignoring potential issues on destroy as
        long as the following undefine succeeds
      + d/t/smoke-lxc: use systemd instead of sysV to restart the service
    - dnsmasq related enhancements
      + run dnsmasq as libvirt-dnsmasq (LP: 1743718)
      + d/libvirt-daemon-system.postinst: add libvirt-dnsmasq user and group
      + d/libvirt-daemon-system.postrm: remove libvirt-dnsmasq user and group
        on purge
      + d/p/ubuntu/dnsmasq-as-priv-user: write dnsmasq config with user
        libvirt-dnsmasq and adapt the self tests to expect that config
      + d/libvirt-daemon-system.postinst: fix old libvirt-dnsmasq users group
      + Add dnsmasq configuration to work with system wide dnsmasq-base
    - debian/rules: disable the netcf backend. (LP: 1764314)
    - debian/patches/ubuntu/ovmf_paths.patch: adjust paths to secboot.fd UEFI
      Secure Boot enabled variants of the OVMF firmware and variable store for
      the paths where we ship these files in Ubuntu.
    - d/p/ubuntu/set-default-machine-to-ubuntu.patch: to select default
      machine type correctly with newer qemu/libvirt
    - d/control: add libzfslinux-dev to build-deps
    - d/control: drop libvirt-lxc, vbox and xen drivers to suggest
    - d/p/ubuntu/lp-1861125-ubuntu-models: recognize Ubuntu models for
      (LP 1861125) fixups
    - Apparmor Delta that is Ubuntu specific or yet to be upstreamed
      split into logical pieces. File names in debian/patches/ubuntu-aa/:
      + 0003-apparmor-libvirt-qemu-Allow-read-access-to-overcommi.patch:
        apparmor, libvirt-qemu: Allow read access to overcommit_memory
      + 0007-apparmor-libvirt-qemu-Allow-owner-read-access-to-PRO.patch:
        apparmor, libvirt-qemu: Allow owner read access to @{PROC}/*/auxv
      + 0020-virt-aa-helper-ubuntu-storage-paths.patch:
        apparmor, virt-aa-helper: Allow various storage pools and image
        locations
      + 0029-appmor-libvirt-qemu-Add-9p-support.patch: appmor,
        libvirt-qemu: Add 9p support
      + 0030-virt-aa-helper-Complete-9p-support.patch: virt-aa-helper:
        add l to 9p file options.
      + 0031-virt-aa-helper-Ask-for-no-deny-rule-for-readonly-dis.patch:
        virt-aa-helper: Ask for no deny rule for readonly disk (renamed and
        reworded, was virt-aa-helper-no-explicity-deny-for-basefiles.patch)
      + 0032-apparmor-libvirt-qemu-Allow-reading-charm-specific-c.patch:
        apparmor, libvirt-qemu: Allow reading charm-specific ceph config
      + 0033-UBUNTU-only-apparmor-for-kvm.powerpc-LP-1680384.patch: allow
        commands executed by ubuntu only kvm wrapper on ppc64el
        (LP 1686621 LP 1680384 LP 1784023)
      + 0034-apparmor-virt-aa-helper-access-for-snapped-nova.patch:
        apparmor, virt-aa-helper: access for snapped nova
      + 0050-local-include-for-libvirt-qemu.patch,
        d/libvirt-daemon-system.postinst: provide a local apparmor include
        for abstraction/libvirt-qemu (LP: 1786019)
      + lp-1815910-allow-vhost-net.patch: avoid apparmor issues
        with vhost-net/vhost-vsock/vhost-scsi hotplug (LP: 1815910)
  * Dropped changes (in Debian now):
    - Enable some additional features on ppc64el and s390x (for arch parity)
      + systemtap, zfs, numa and numad on s390x.
      + systemtap on ppc64el.
    - enable attr support to store XATTR labels. Among other things
      this allows to properly restore file ownership (LP 691590)
        - d/control: build depend to libattr1-dev
        - d/rules: configure --with-attr
    - Install virt-login-shell-helper
    - Install augeas lenses for all drivers
    - Remove all mentions of Devhelp
    - not-installed: Remove obsolete entries
    - not-installed: List all split daemons files
    - d/control: bump build dep to python3
    - d/control: add python3-docutils as build dependency
    - d/rules: set enable-dependency-tracking to avoid FTBFS
    - d/rules: drop the no more existing phyp option
    - d/rules: drop the no more existing xen configure option
    - minimize patches generated by autoreconf
    - fix build on Debian/Ubuntu in qemuhotplugtest
    - d/libvirt-doc.doc: install rendered docs
    - d/libvirt-daemon-system.examples: drop old examples that are now active
    - d/libvirt-doc.doc-base.libvirt-doc: adapt doc base to new file placement
    - d/libvirt-daemon-system-sysv.lintian-overrides: not shipiing systemd files
    - d/libnss-libvirt.lintian-overrides: accept having two nss so files
    - d/rules: don't ship split daemons just yet
    - d/rules: install /etc/default/* files that are shared between sysv and
      systemd packages
    - d/rules: add libvirt-guests.default to libvirt-daemon-system instead of
      libvirt-daemon-system-sysv
    - d/rules: install virtlockd correctly with defaults file (LP: 1729516)
    - d/rules: also check build time self test results on all architectures
    - d/rules: add --no-restart-after-upgrade to services that are supposed to
      stay up through upgrades - this also applies to related sockets.
  * Dropped changes (part of upstream now):
    - d/p/ubuntu/lp-1879325-*: avoid issues with apparmor metadata labeling
      (LP 1879325)
    - d/p/ubuntu-aa/lp-1871354*: fix apparmor denials on libpmem init
      (LP 1871354)
    - d/p/ubuntu/CVE-CVE-2020-10701-api-disallow-virDomainAgentSetResponseTimeout
      -on-rea.patch: avoid DOS through read only connections
      CVE-2020-10701
    - d/p/ubuntu/lp-1867460-*: fix domcapabilities before capabilities
      and binary autodetection in general (LP 1867460)
    - d/p/stable/lp-1868539-*: stabilize libvirt by backporting upstream
      fixes (LP 1868539)
    - d/p/ubuntu/lp-1853200*: add cpu models without hle/rtm features to have
      modern types on kernels with recent security fixes (LP 1853200)
    - d/p/ubuntu/lp-1868528-*: Fail when fetching CPU Status for invalid CPU
      (LP 1868528)
    - d/p/ubuntu/lp-1865425-*: avoid killing the monitor job in
      qemuDomainSetTimeAgent (LP 1865425)
    - d/p/ubuntu-aa/virt-aa-helper-Add-support-for-smartcard-host-certif.patch:
      allow emulation of smartcard via host certificates
    - d/p/ubuntu/lp-1861125-*: fix non host-model migrations from old machine
      types (LP 1861125)
    - d/p/ubuntu-aa/apparmor-allow-to-call-vhost-user-gpu.patch: do not apparmor
      block vhost-user-gpu usage
    - d/p/ubuntu/lp-1655111*: fix qemu_bridge_helper to work with named
      profiles (LP 1655111)
  * Dropped changes (no more needed):
    - d/control: make libvirt-daemon-driver-storage-rbd a recommend instead of
      just a suggest. This was deprecated since bionic and now will be dropped.
    - Update Vcs-Git and Vcs-Browser fields to point to launchpad
    - d/control: VCS links to use generic Ubuntu launchpad git URLs
    - refreshed patches for libvirt v6.0.0
    - d/libvirt-daemon-system.postrm: change order of libvirt-qemu removal to
      avoid error messages on purge [deluser/delgroup no more report warnings]
    - "Additional apport package-hook": due to context auto updates
      d/libvirt-daemon.install had bad entries which are no more required.
    - d/control, d/rules: Disable rbd and zfs on riscv64 where they are
      unavailable (LP 1872952)
  * Added Changes:
    - d/control: breaks replaces for augeas lenses move in 6.0.0-1
      (follows Debian, droppable >22.04)
    - refresh ubuntu patches for 6.6
      - d/p/ubuntu-aa/0050-local-include-for-libvirt-qemu.patch
      - d/p/ubuntu-aa/0034-apparmor-virt-aa-helper-access-for-snapped-nova.patch
      - d/p/ubuntu-aa/0020-virt-aa-helper-ubuntu-storage-paths.patch
      - d/p/ubuntu/dnsmasq-as-priv-user
      - d/p/ubuntu/Allow-libvirt-group-to-access-the-socket.patch
      - d/p/ubuntu/daemon-augeas-fix-expected.patch
    - d/libvirt-daemon-system.postinst: fix bashism in dnsmasq related
      enhancements
    - d/p/ubuntu/wait-for-qemu-kvm.patch - avoid hangs on startup (LP: #1887592)
    - d/libvirt-clients.lintian-overrides: profile scripts are non executable
    - d/p/ubuntu-aa/apparmor-allow-unmounting-.dev-entries.patch: avoid
      triggering denials in devmapper error path
    - d/p/ubuntu-aa/pparmor-profiles-are-meant-to-allow-adding-permanen.patch:
      (again) allow permanent per guest overrides (LP: #1745114)
    - d/control: drop mdevctl to a suggest until (LP 1889248) is ready

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Thu, 06 Aug 2020 08:04:09 +0200

libvirt (6.6.0-1) unstable; urgency=medium

  * Team upload

  [ Andrea Bolognani ]
  * [ecdcc72] New upstream version 6.6.0
    Includes fix for CVE-2020-14339 (Closes: #966563)
  * [751e146] upstream: Add key for Jiří Denemark
  * [ab2a1b4] control: Add Build-Depends on libtirpc-dev
  * [8714f7d] control: Drop Build-Depends on libncurses5-dev.
  * [1137e33] patches: Assign topic to all patches.
  * [51e52ab] patches: Reorder patches.

  [ Christian Ehrhardt ]
  * [ceab403] d/control, d/rules: feature architecture parity.
    Enable systemtap, numa and numad on more architectures.
  * [dd2d1a9] Drop d/p/apparmor-Allow-[....]-name-service-.patch.
    Doesn't seem to be necessary anymore.
  * [d31eba5] fix device mapper issues.
    Add the following backports:
    - virdevmapper-Don-t-cache-device-mapper-major.patch
    - virdevmapper-Ignore-all-errors-when-opening-dev-mapper-co.patch
    - virdevmapper-Handle-kernel-without-device-mapper-support.patch
  * [3145e31] tools: fix libvirt-guests.sh text assignments
    Add the following backports:
    - tools-fix-libvirt-guests.sh-text-assignments.patch

 -- Andrea Bolognani <eof@kiyuko.org>  Sat, 22 Aug 2020 17:05:23 +0200

libvirt (6.5.0-1) unstable; urgency=medium

  * Team upload

  * [38c0fa7] New upstream version 6.5.0
  * [b8a07b4] control: Add Recommends for mdevctl

 -- Andrea Bolognani <eof@kiyuko.org>  Mon, 27 Jul 2020 22:50:08 +0200

libvirt (6.4.0-2) unstable; urgency=medium

  [ Christian Ehrhardt ]
  * [d0f7eb5] enable attr support to be able to store XATTR labels.
    Among other things this allows to properly restore file ownership
    - d/control: build depend on libattr1-dev
    - d/rules: configure --with-attr
    Fixes: https://bugs.launchpad.net/ubuntu/+source/libvirt/+bug/691590

  [ Andrea Bolognani ]
  * Use consistent layout in packaging files

 -- Guido Günther <agx@sigxcpu.org>  Fri, 10 Jul 2020 16:44:12 +0200

libvirt (6.4.0-1) experimental; urgency=medium

  * Team upload

  * [1662a90] New upstream version 6.4.0
    Includes a fix for CVE-2020-14301 (Closes: #963474)
  * [ad19936] patches: Drop tests-Mock-[...]-for-qemuhotplug.patch
  * [bfc4f8b] rules: Install upstream release notes
  * [995991b] control: Set Rules-Requires-Root: no
  * [dd75022] control: Bump Standards-Version to 4.5.0
  * [fa6aefb] rules: Enable 'bindnow' hardening option

 -- Andrea Bolognani <eof@kiyuko.org>  Sun, 21 Jun 2020 23:59:13 +0200

libvirt (6.2.0-1) experimental; urgency=medium

  * Team upload

  [ Guido Günther ]
  * Upload to experimental
  * [1b6982f] New upstream version 6.2.0
    Contains fix for CVE-2020-10701. (Closes: #955841)
      Thanks to Carnil for the triage
    Contains fix for CVE-2020-12430. (Closes: #959447)

  [ Andrea Bolognani ]
  * [ba77756] patches: Drop all gnulib-related patches
    Specifically:
      openpty-Skip-test-if-no-pty-is-available.patch
      Disable-gnulib-s-test-nonplocking-pipe.sh.patch
      test-posix_openpt-don-t-fail-on-EACCESS.patch
  * [2e0b5f1] patches: Add tests-Mock-[...]-for-qemuhotplug.patch
    Replaces:
      skip-qemuhotplugtest.patch
  * [7c1e182] debhelper: Use debhelper-compat package

 -- Andrea Bolognani <eof@kiyuko.org>  Sun, 03 May 2020 01:32:30 +0200

libvirt (6.0.0-7) unstable; urgency=medium

  [ Laurent Bigonville ]
  * [4e6f909] Disable polkit support on !linux, see: #927896
  * [3ee1c87] Do not build-depends against libglusterfs-dev on non-linux
    architectures

  [ Guido Günther ]
  * [41c33eb] Rediff patches
  * [da804f9] Backport fix for CVE-2020-10701.
    Thanks to Carnil for the triage (Closes: #955841)
  * [a5dd08c] d/rules: systemd: Also pass --no-restart-on-upgrade when using
    --no-start.

  [ Andrea Bolognani ]
  * [0c6a3a0] salsa-ci: Create local pristine-tar branch.

 -- Guido Günther <agx@sigxcpu.org>  Wed, 13 May 2020 12:12:36 +0200

libvirt (6.0.0-6) unstable; urgency=medium

  [ Laurent Bigonville ]
  * [ea7b8b7] autopkgtest exits with 2 when there are skipped tests do not
    consider that as fatal

  [ Guido Günther ]
  * [100e8aa] Don't start or restart socket units on package upgrades.
    Changes get picked up when the corresponding system unit is being restarted.
    This avoids problems when socket and service units of the same service get
    restarted together. See #955483 for details.
  * [ff981d5] Pass --no-auto to dh_instalsystemd.
    This avoids generation of restart snippets for services listed in `Also=`
    sections of the service units. Otherwise these get restarted but we want
    to avoid that and let systemd figure it out all by itself.
    See: #955483, #841095

 -- Guido Günther <agx@sigxcpu.org>  Wed, 08 Apr 2020 17:04:11 +0200

libvirt (6.0.0-5) unstable; urgency=medium

  [ Guido Günther ]
  * [421e865] systemd: Don't restart libvirt-guests on upgrade
    (Closes: #955216)

  [ Laurent Bigonville ]
  * [5f72035] Only run qemu test on amd64
    (Closes: #955278)

 -- Guido Günther <agx@sigxcpu.org>  Tue, 31 Mar 2020 09:39:40 +0200

libvirt (6.0.0-4) unstable; urgency=medium

  * [d7df842] sysv: Don't restart libvirt-guests on upgrade
    (Closes: #954921)

 -- Guido Günther <agx@sigxcpu.org>  Tue, 24 Mar 2020 15:10:20 +0100

libvirt (6.0.0-3) unstable; urgency=medium

  * [de68a4b] Bump Breaks/conflicts.
    While there were conflicts/breaks for the driver split we moved
    the augeas lenses in 6.0.0-1. (Closes: #954032, #953894)

 -- Guido Günther <agx@sigxcpu.org>  Mon, 16 Mar 2020 09:55:01 +0100

libvirt (6.0.0-2) unstable; urgency=medium

  * Upload to unstable

 -- Guido Günther <agx@sigxcpu.org>  Sat, 14 Mar 2020 12:37:22 +0100

libvirt (6.0.0-1) experimental; urgency=medium

  [ Guido Günther ]
  * [33890b9] New upstream version 6.0.0
    (Closes: #939552) 
  * [c9f82be] gitlab-ci: Run autopkgtests

  [ Christian Ehrhardt ]
  * [fa167bc] d/libnss-libvirt.lintian-overrides: accept having two nss so
    files
  * [bf48357] d/libvirt-daemon-system-sysv.lintian-overrides: not shipping
    systemd files.  Packages are split intentionally, ignore this lintian
    warning.
  * [2278598] d/rules: also check build time self test results on all
    architectures
  * [c1be36a] d/rules: drop doc binary cleanup.
  * [6d60c3c] d/rules: don't ship split daemons just yet
  * [33f8dc4] d/p/skip-qemuhotplugtest.patch: fix qemuhotplugtest.
    Skip some elements of qemuhotplugtest that for now break in
    Debian/Ubuntu build environments.
  * [a1734f7] d/rules: add libvirt-guests.default to libvirt-daemon-system
    instead of libvirt-daemon-system-sysv
  * [69f6cfe] d/rules: install /etc/default/* files that are shared between
    sysv and systemd packages
  * [31be682] d/rules: install virtlockd for sysv
    (Closes: #880970)

  [ Andrea Bolognani ]
  * [070d158] Install virt-login-shell-helper.
    This new binary was introduced in libvirt 5.7.0 and is necessary for
    virt-login-shell to work.
  * [143dafb] Install augeas lenses for all drivers.
    These slipped through the cracks when we moved from picking up the
    corresponding directories as a whole to listing the specific files we're
    interested in.
  * [efa4cfe] Remove all mentions of Devhelp.
    As of libvirt 5.8.0, the corresponding files are no longer
    generated.
  * [8ebd427] not-installed: Remove obsolete entries.
    Now that upstream's build system has been fixed and we're picking up the
    documentation from the install location rather than the source directory,
    the corresponding files will no longer be flagged by dh_missing.
  * [ce54aef] not-installed: List all split daemons files.
    Since we're not shipping split daemons yet, the corresponding
    binaries as well as systemd units and augeas lenses will be
    flagged by dh_missing if we don't list them here.
  * [391e39d] symbols: Drop LIBVIRT_5.9.0
    libvirt 5.9.0 didn't introduce any new public symbols.

 -- Guido Günther <agx@sigxcpu.org>  Wed, 12 Feb 2020 13:06:33 +0100

libvirt (6.0.0~rc1-1) experimental; urgency=medium

  [ Guido Günther ]
  * [443fae0] New upstream version 6.0.0~rc1
  * [70c5676] Bump symbol versions
  * [eb6c6c1] gitlab-ci: Build package.
    We unfortunately can't use salsa-ci's prebuilt pipeline since
    that hangs on large jobs:
    https://salsa.debian.org/salsa/support/issues/180
    We redirct output to a file to work around:
    https://salsa.debian.org/salsa/support/issues/191

  [ Christian Ehrhardt ]
  * [cc6b955] refresh d/p/* for v6.0.0
  * [5639ffb] d/control: bump build dep to python3
  * [dc99d35] d/rules: set enable-dependency-tracking to avoid FTBFS.
  * [af131c7] d/rules: drop the no more existing xen configure option
  * [84367d9] d/control: add python3-docutils as build dependency
  * [37f0a5c] d/libvirt-doc.doc: install rendered docs
  * [880f00e] d/libvirt-daemon-system.examples: Drop examples that are now
    conf files
  * [671aeca] d/libvirt-doc.doc-base.libvirt-doc: adapt doc base to new file
    placement

 -- Guido Günther <agx@sigxcpu.org>  Sat, 18 Jan 2020 18:16:20 +0100

libvirt (6.0.0-0ubuntu11) groovy; urgency=medium

  * SECURITY UPDATE: privilege escalation via incorrect socket permissions
    - debian/patches/ubuntu/Allow-libvirt-group-to-access-the-socket.patch:
      updated patch to also set appropriate permissions on socket created
      by systemd.
    - CVE-2020-15708

 -- Marc Deslauriers <marc.deslauriers@ubuntu.com>  Wed, 05 Aug 2020 09:08:34 -0400

libvirt (6.0.0-0ubuntu10) groovy; urgency=medium

  * enable attr support to store XATTR labels. Among other things
    this allows to properly restore file ownership (LP: #691590)
      - d/control: build depend to libattr1-dev
      - d/rules: configure --with-attr

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Mon, 22 Jun 2020 21:30:50 +0200

libvirt (6.0.0-0ubuntu9) groovy; urgency=medium

  * d/p/ubuntu/lp-1879325-*: avoid issues with apparmor metadata labeling
    (LP: #1879325)

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Wed, 20 May 2020 06:59:57 +0200

libvirt (6.0.0-0ubuntu8) focal; urgency=medium

  * d/control, d/rules: Disable rbd and zfs on riscv64 where they are
    unavailable (LP: #1872952)

 -- William Grant <wgrant@ubuntu.com>  Sat, 18 Apr 2020 13:59:21 +1000

libvirt (6.0.0-0ubuntu7) focal; urgency=medium

  * d/p/ubuntu-aa/lp-1871354*: fix apparmor denials on libpmem init
    (LP: #1871354)
  * d/p/ubuntu/CVE-CVE-2020-10701-api-disallow-virDomainAgentSetResponseTimeout
    -on-rea.patch: avoid DOS through read only connections
    CVE-2020-10701

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Wed, 15 Apr 2020 12:29:12 +0200

libvirt (6.0.0-0ubuntu6) focal; urgency=medium

  * d/p/ubuntu/lp-1867460-*: fix domcapabilities before capabilities
    and binary autodetection in general (LP: #1867460)
  * d/p/stable/lp-1868539-*: stabilize libvirt by backporting upstream
    fixes (LP: #1868539)
  * d/p/ubuntu/lp-1853200*: add cpu models without hle/rtm features to have
    modern types on kernels with recent security fixes (LP: #1853200)
  * d/p/ubuntu/lp-1868528-*: Fail when fetching CPU Status for invalid CPU
    (LP: #1868528)

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Fri, 20 Mar 2020 10:34:19 +0100

libvirt (6.0.0-0ubuntu5) focal; urgency=medium

  * d/p/ubuntu-aa/lp-1847361-load-versioned-module.patch: allow loading
    versioned modules after qemu package upgrades (LP: #1847361)

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Tue, 10 Mar 2020 08:58:04 +0100

libvirt (6.0.0-0ubuntu4) focal; urgency=medium

  * d/p/ubuntu/lp-1865425-*: avoid killing the monitor job in
    qemuDomainSetTimeAgent (LP: #1865425)

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Mon, 02 Mar 2020 10:44:22 +0100

libvirt (6.0.0-0ubuntu3) focal; urgency=medium

  * rebuild against libxen-dev 4.11.3 (no change needed)
  * d/p/ubuntu-aa/virt-aa-helper-Add-support-for-smartcard-host-certif.patch:
    allow emulation of smartcard via host certificates
  * d/p/ubuntu/lp-1861125-*: fix non host-model migrations from old machine
    types (LP: #1861125)
  * d/p/ubuntu-aa/apparmor-allow-to-call-vhost-user-gpu.patch: do not apparmor
    block vhost-user-gpu usage

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Wed, 12 Feb 2020 14:20:08 +0100

libvirt (6.0.0-0ubuntu2) focal; urgency=medium

  [ Christian Ehrhardt ]
  * Bring back the ubuntu default URI handling. While no more needed for xen
    its removal made libvirt fallback further to the upstream default
    qemu:///session while Ubuntu forever had and for now wants to keep
    qemu:///system (LP: #1861693)
    - revert 'd/libvirt-clients.maintscript: rm_conffile libvirt-uri.sh that
      was optional for use on xen hosts'
    - libvirt-uri.sh: Automatically switch default libvirt URI for users on
      Xen dom0 via user profile
      [added back former delta]

  [ Andrea Bolognani ]
  * Merge further fixes from debian/experimental
    - Install virt-login-shell-helper
    - Install augeas lenses for all drivers
    - Remove all mentions of Devhelp
    - not-installed: Remove obsolete entries
    - not-installed: List all split daemons files

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Tue, 04 Feb 2020 13:08:49 +0100

libvirt (6.0.0-0ubuntu1) focal; urgency=medium

  * Merged with Debian 5.6.0-4 from experimental and v6.0.0 from upstream
    Among many other new features and fixes this includes fixes for:
    - LP: #1859253 - rbd driver fails to create a new volume
    - LP: #1858341 - rbd driver does not list all volumes in pool
    - LP: #1845506 - Libvirt snapshot doesn't update apparmor profile
    - LP: #1854653 - slow libvirt-guests.sh during shutdown if service is off
    - LP: #1848229 - enable ppc64el to use ccf-assist feature
    - LP: #1853315 - Enable CPU Model Comparison and Baselining on s390x
    - LP: #1853317 - CCW IPL support to boot from ECKD DASDs
    - LP: #1859506 - security: AppArmor profile fixes for swtpm
    Remaining changes:
    - Disable libssh2 support (universe dependency)
    - Disable firewalld support (universe dependency)
    - Set qemu-group to kvm (for compat with older ubuntu)
    - Additional apport package-hook
    - Autostart default bridged network (As upstream does, but not Debian).
      In addition to just enabling it our solution provides:
      + do not autostart if subnet is already taken (e.g. in guests).
      + iterate some alternative subnets before giving up
    - d/p/ubuntu/Allow-libvirt-group-to-access-the-socket.patch: This is
      the group based access to libvirt functions as it was used in Ubuntu
      for quite long.
      + d/p/ubuntu/daemon-augeas-fix-expected.patch fix some related tests
        due to the group access change.
      + d/libvirt-daemon-system.postinst: add users in sudo to the libvirt
        group.
    - ubuntu/parallel-shutdown.patch: set parallel shutdown by default.
    - Update Vcs-Git and Vcs-Browser fields to point to launchpad
    - Update README.Debian with Ubuntu changes
    - Enable some additional features on ppc64el and s390x (for arch parity)
      + systemtap, zfs, numa and numad on s390x.
      + systemtap on ppc64el.
    - d/p/ubuntu/ubuntu_machine_type.patch: accept ubuntu types as pci440fx
    - Further upstreamed apparmor Delta, especially any new one
      Our former delta is split into logical pieces and is either Ubuntu only
      or is part of a continuous upstreaming effort.
      Listing related remaining changes in debian/patches/ubuntu-aa/:
    - fix autopkgtests
      + d/t/control, d/t/smoke-qemu-session: fixup smoke-qemu-session by making
        vmlinuz available and accessible (Debian bug 848314)
      + d/t/control: fix smoke-qemu-session by ensuring the service will run
        installing libvirt-daemon-system
      + d/t/smoke-lxc: fix smoke-lxc by ignoring potential issues on destroy as
        long as the following undefine succeeds
      + d/t/smoke-lxc: use systemd instead of sysV to restart the service
    - dnsmasq related enhancements
      + run dnsmasq as libvirt-dnsmasq (LP: 1743718)
      + d/libvirt-daemon-system.postinst: add libvirt-dnsmasq user and group
      + d/libvirt-daemon-system.postrm: remove libvirt-dnsmasq user and group
        on purge
      + d/p/ubuntu/dnsmasq-as-priv-user: write dnsmasq config with user
        libvirt-dnsmasq and adapt the self tests to expect that config
      + d/libvirt-daemon-system.postinst: fix old libvirt-dnsmasq users group
      + Add dnsmasq configuration to work with system wide dnsmasq-base
    - debian/rules: disable the netcf backend. (LP: 1764314)
    - debian/patches/ubuntu/ovmf_paths.patch: adjust paths to secboot.fd UEFI
      Secure Boot enabled variants of the OVMF firmware and variable store for
      the paths where we ship these files in Ubuntu.
    - d/rules: install virtlockd correctly with defaults file (LP: 1729516)
    - d/rules: also check build time self test results on all architectures
    - d/p/ubuntu/set-default-machine-to-ubuntu.patch: to select default
      machine type correctly with newer qemu/libvirt
    - d/rules: add --no-restart-after-upgrade to services that are supposed to
      stay up through upgrades - this also applies to related sockets.
    - Apparmor Delta that is Ubuntu specific or yet to be upstreamed
      split into logical pieces. File names in debian/patches/ubuntu-aa/:
      + 0003-apparmor-libvirt-qemu-Allow-read-access-to-overcommi.patch:
        apparmor, libvirt-qemu: Allow read access to overcommit_memory
      + 0007-apparmor-libvirt-qemu-Allow-owner-read-access-to-PRO.patch:
        apparmor, libvirt-qemu: Allow owner read access to @{PROC}/*/auxv
      + 0017-apparmor-virt-aa-helper-Allow-access-to-tmp-director.patch:
        apparmor, virt-aa-helper: Allow access to tmp directories
      + 0020-virt-aa-helper-ubuntu-storage-paths.patch:
        apparmor, virt-aa-helper: Allow various storage pools and image
        locations
      + 0021-apparmor-virt-aa-helper-Add-openvswitch-support.patch:
        apparmor, virt-aa-helper: Add openvswitch support
      + 0029-appmor-libvirt-qemu-Add-9p-support.patch: appmor,
        libvirt-qemu: Add 9p support
      + 0030-virt-aa-helper-Complete-9p-support.patch: virt-aa-helper:
        add l to 9p file options.
      + 0031-virt-aa-helper-Ask-for-no-deny-rule-for-readonly-dis.patch:
        virt-aa-helper: Ask for no deny rule for readonly disk (renamed and
        reworded, was virt-aa-helper-no-explicity-deny-for-basefiles.patch)
      + 0032-apparmor-libvirt-qemu-Allow-reading-charm-specific-c.patch:
        apparmor, libvirt-qemu: Allow reading charm-specific ceph config
      + 0033-UBUNTU-only-apparmor-for-kvm.powerpc-LP-1680384.patch: allow
        commands executed by ubuntu only kvm wrapper on ppc64el
        (LP 1686621 LP 1680384 LP 1784023)
      + 0034-apparmor-virt-aa-helper-access-for-snapped-nova.patch:
        apparmor, virt-aa-helper: access for snapped nova
      + 0050-local-include-for-libvirt-qemu.patch,
        d/libvirt-daemon-system.postinst: provide a local apparmor include
        for abstraction/libvirt-qemu (LP: 1786019)
      + lp-1815910-allow-vhost-net.patch: avoid apparmor issues
        with vhost-net/vhost-vsock/vhost-scsi hotplug (LP: 1815910)
  * Dropped changes (in Debian)
    - d/libvirt0.symbols: bump symbol versions for 5.4.0
    - avoid service dependency issues on upgrade (LP: 1786179)
      This will in the long term be resolved in dh_* tools, but to let an
      upgrade work for now we need to drop the sysV scripts (which we don't
      use anyway) and slightly modify the systemd service to work with todays
      dh_systemd_start properly. Can be dropped once Debian bug 905772 is
      resolved in dh_* tools and libvirt uses those new code.
      + d/libvirt-daemon-system.virtlogd.init: removed sysV init file
      + d/libvirt-daemon-system.libvirtd.init: removed sysV init file
      + debian/libvirt-daemon-system.maintscript: rm_conffile for virtlogd
        and lbivirtd sysV init file
      + d/p/ubuntu/avoid-restarting-virtlog-socket.patch: drop Also references
        to virtlogd/virtlockd sockets as they would imply a restart of
        virtlogd breaking it.
      [ we now have split packages for sysv and systemd support ]
    - d/t/control, d/t/smoke-lxc: fix up lxc smoke test isolation
    - Refreshed to match new upstream
      + d/p/Reduce-udevadm-settle-timeout-to-10-seconds.patch
  * Dropped changes (now upstream)
    - d/p/ubuntu/lp-1828495-*: make libvirt able to handle arch_capabilities
      cpu features for the Host. (LP: 1828495 - not closing yet as guest caps
      are still need fixups to work well LP: 1841066)
    - SECURITY UPDATEs: CVE-2019-10161, CVE-2019-10166,
      CVE-2019-10167 and CVE-2019-10168
    - d/p/ubuntu-aa/lp-1833040-Add-openGraphicsFD-rule-for-named-profile.patch:
      avoid issues with remote screen connections like virt-manager due to
      apparmor changes in libvirt 5.1 (LP 1833040)
    - 0001-apparmor-Allow-pygrub-to-run-on-Debian-Ubuntu.patch: apparmor:
      Allow pygrub to run on Debian/Ubuntu
    - update to v5.4.0
  * Dropped changes (Xen demoted to universe)
    - d/p/ubuntu/ubuntu-libxl-qemu-path.patch: this change was split. The
      section that adapts the path of the emulator to the Debian/Ubuntu
      packaging is kept.
    - d/p/ubuntu/ubuntu-libxl-Fix-up-VRAM-to-minimum-requirements.patch: auto
      set VRAM to minimum requirements
    - d/p/ubuntu/xen-default-uri.patch: set default URI on xen hosts
    - Add libxl log directory
    - libvirt-uri.sh: Automatically switch default libvirt URI for users on
      Xen dom0 via user profile (was missing on changelogs before)
  * Dropped changes (no more needed)
    - d/p/ubuntu/apibuild-skip-libvirt-common.h: drop libvirt-common.h from
      included_files to avoid build failures due to duplicate definitions.
      [ finally works in v6.0.0 ]
    - d/control: Revert iptables/ebtables dependency as Eoan still is on 1.6.x
      [ focal has iptables 1.8.3 ]
    - d/rules: adapt iptables binary paths present in Eoan (LP 1832297)
      [ focal has iptables 1.8.3 ]
  * Added Changes:
    - refreshed patches for libvirt v6.0.0
    - d/control: bump build dep to python3
    - d/control: VCS links to use generic Ubuntu launchpad git URLs
    - d/control: add python3-docutils as build dependency
    - d/control: add libzfslinux-dev to build-deps
    - d/rules: set enable-dependency-tracking to avoid FTBFS
    - d/rules: drop the no more existing phyp option
    - d/rules: drop the no more existing xen configure option
    - d/libvirt-clients.maintscript: rm_conffile libvirt-uri.sh that was
      optional for use on xen hosts
    - d/control: drop libvirt-lxc, vbox and xen drivers to suggest
    - minimize patches generated by autoreconf
    - fix build on Debian/Ubuntu in qemuhotplugtest
    - d/libvirt-doc.doc: install rendered docs
    - d/libvirt-daemon-system.examples: drop old examples that are now active
    - d/libvirt-doc.doc-base.libvirt-doc: adapt doc base to new file placement
    - d/libvirt-daemon-system-sysv.lintian-overrides: not shipiing systemd files
    - d/libnss-libvirt.lintian-overrides: accept having two nss so files
    - d/rules: don't ship split daemons just yet
    - d/rules: install /etc/default/* files that are shared between sysv and
      systemd packages
    - d/rules: add libvirt-guests.default to libvirt-daemon-system instead of
      libvirt-daemon-system-sysv
    - d/p/ubuntu/lp-1655111*: fix qemu_bridge_helper to work with  named
      profiles (LP: #1655111)

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Mon, 13 Jan 2020 13:14:14 +0100

libvirt (5.6.0-4) experimental; urgency=medium

  * [d88536d] Introduce libvirt-daemon-system-{systemd,sysv} Move init scripts
    to separate package that allows people to experiment with alternative init
    systems while avoiding the problems that mixed init scripts and systemd
    units have in the current packaging.
    Thanks to Christian Ehrhardt for all the input regarding upgrade
    problems seen in Ubuntu and possible solutions.
    (Closes: #887911, #905772)
  * [c19d230] autopkg tests: Use isolation-machine.
    This avoids running under debian ci since libvirt-lxc in lxc
    doesn't work there. (Closes: #947006)

 -- Guido Günther <agx@sigxcpu.org>  Sun, 12 Jan 2020 13:51:05 +0100

libvirt (5.6.0-3) unstable; urgency=medium

  * Team upload.

  [ Christian Ehrhardt ]
  * Move qemu, lxc, uml, vbox and xen connection drivers into separate
    packages. This reduces the dependencies pulled into default installations.
    (Closes: #901940)
  * d/copyright: Update

  [ Guido Günther ]
  * [362bec6] autopkgtest: Adjust to new path

 -- Guido Günther <agx@sigxcpu.org>  Wed, 27 Nov 2019 11:13:51 +0100

libvirt (5.6.0-2) unstable; urgency=medium

  * Team upload.

  * [4dcbe93] Revert "Disable libvirtd socket activation" (Closes: #935883)
  * [b464de1] Add libvirtd sockets handling

 -- Andrea Bolognani <eof@kiyuko.org>  Wed, 28 Aug 2019 19:39:00 +0200

libvirt (5.6.0-1) unstable; urgency=medium

  * Team upload.

  [ Guido Günther ]
  * [fb43676] d/control: Drop dh-autoreconf build-dep
  * [81d21d5] d/not-installed: Use multi-arch dirs
  * [07d5669] New upstream version 5.6.0
    Fixes CVE-2018-12126, CVE-2018-12127, CVE-2018-12130, CVE-2019-11091,
    CVE-2019-10132
    (Closes: #915107, #931243, #929334)
  * [9f38a9e] apparmor: Allow run pygrub
    (Closes: #931768)
  * Acknowledge NMU. Thanks Jonathan Wiltshire

  [ Christian Ehrhardt ]
  * [c28c3b3] d/libvirt0.install: install translations
  * [c3c4cd4] d/libvirt-daemon-system.install: drop in helper for firewalld
  * [3e8b43c] d/not-installed: ignore default files /etc/sysconfig
  * [c223d7f] d/libvirt-daemon-system.examples: ship sysctl config as example
  * [f19acf6] d/libvirt-daemon-system.install: ship libxl-sanlock.conf
    (Closes: #919484)
  * [483e44a] d/libvirt-doc.docs: fix whitespace issue
  * [4f4751f] d/libvirt-doc.docs: install new doc elements
  * [781e22e] d/not-installed: ignore documentation already being installed
  * [eda89b2] d/no-installed, d/libvirt-doc.docs: do not install fonts
  * [ab67a28] d/copyright: add license for docs/fonts/
  * [2e222a2] d/rules: strip symbolic-functions linker option
  * [39b658c] Revert "d/libvirt-daemon-system.install: ship
    libxl-sanlock.conf"
  * [ce46360] d/rules: install libxl-sanlock.conf dependent on xen being
    enabled

  [ Andrea Bolognani ]
  * [6a2eae3] Simplify and improve watch file
  * [82a1edc] Bump symbol versions
  * [73fccd9] Specify --doc-main-package for dh_installdocs
  * [d48fdf6] Rediff patches
  * [3b16c86] Bump symbol versions
  * [48c9b75] Drop Avahi support
  * [a49de91] Fix AppArmor profile for virt-aa-helper
  * [b8e92da] Disable libvirtd socket activation
  * [73d1e8c] Install kbase articles

 -- Andrea Bolognani <eof@kiyuko.org>  Sun, 25 Aug 2019 16:32:31 +0200

libvirt (5.4.0-0ubuntu5) eoan; urgency=medium

  * No-change upload with strops.h and sys/strops.h removed in glibc.

 -- Matthias Klose <doko@ubuntu.com>  Thu, 05 Sep 2019 11:00:53 +0000

libvirt (5.4.0-0ubuntu4) eoan; urgency=medium

  * d/p/ubuntu/lp-1828495-*: make libvirt able to handle arch_capabilities
    cpu features for the Host. (LP: 1828495 - not closing yet as guest caps
    are still need fixups to work well LP: 1841066)

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Tue, 20 Aug 2019 10:50:08 +0200

libvirt (5.4.0-0ubuntu3) eoan; urgency=medium

  * SECURITY UPDATE: virDomainSaveImageGetXMLDesc does not check for
    read-only connection
    - debian/patches/CVE-2019-10161.patch: add check to
      src/libvirt-domain.c, src/qemu/qemu_driver.c,
      src/remote/remote_protocol.x.
    - CVE-2019-10161
  * SECURITY UPDATE: virDomainManagedSaveDefineXML does not check for
    read-only connection
    - debian/patches/CVE-2019-10166.patch: add check to
      src/libvirt-domain.c.
    - CVE-2019-10166
  * SECURITY UPDATE: virConnectGetDomainCapabilities does not check for
    read-only connection
    - debian/patches/CVE-2019-10167.patch: add check to
      src/libvirt-domain.c.
    - CVE-2019-10167
  * SECURITY UPDATE: virConnect*HypervisorCPU do not check for read-only
    connection
    - debian/patches/CVE-2019-10168.patch: add checks to
      src/libvirt-host.c.
    - CVE-2019-10168

 -- Marc Deslauriers <marc.deslauriers@ubuntu.com>  Tue, 02 Jul 2019 08:08:33 -0400

libvirt (5.4.0-0ubuntu2) eoan; urgency=medium

  * d/p/ubuntu-aa/lp-1833040-Add-openGraphicsFD-rule-for-named-profile.patch:
    avoid issues with remote screen connections like virt-manager due to
    apparmor changes in libvirt 5.1 (LP: #1833040)

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Wed, 19 Jun 2019 14:34:54 +0200

libvirt (5.4.0-0ubuntu1) eoan; urgency=medium

  * Merged with Debian git 5.3.0-1~1.gbp7b1637 and upstreams 5.4 release
    Among many other new features and fixes this includes fixes for:
    LP: #1759509 - virsh dompmwakeup fails to wake VM from dompmsuspend state
    Remaining changes:
    - Disable libssh2 support (universe dependency)
    - Disable firewalld support (universe dependency)
    - Set qemu-group to kvm (for compat with older ubuntu)
    - Additional apport package-hook
    - Autostart default bridged network (As upstream does, but not Debian).
      In addition to just enabling it our solution provides:
      + do not autostart if subnet is already taken (e.g. in guests).
      + iterate some alternative subnets before giving up
    - d/p/ubuntu/Allow-libvirt-group-to-access-the-socket.patch: This is
      the group based access to libvirt functions as it was used in Ubuntu
      for quite long.
      + d/p/ubuntu/daemon-augeas-fix-expected.patch fix some related tests
        due to the group access change.
      + d/libvirt-daemon-system.postinst: add users in sudo to the libvirt
        group.
    - ubuntu/parallel-shutdown.patch: set parallel shutdown by default.
    - Update Vcs-Git and Vcs-Browser fields to point to launchpad
    - Xen related
      - d/p/ubuntu/ubuntu-libxl-qemu-path.patch: this change was split. The
        section that adapts the path of the emulator to the Debian/Ubuntu
        packaging is kept.
      - d/p/ubuntu/ubuntu-libxl-Fix-up-VRAM-to-minimum-requirements.patch: auto
        set VRAM to minimum requirements
      - d/p/ubuntu/xen-default-uri.patch: set default URI on xen hosts
      - Add libxl log directory
      - libvirt-uri.sh: Automatically switch default libvirt URI for users on
        Xen dom0 via user profile (was missing on changelogs before)
    - d/p/ubuntu/apibuild-skip-libvirt-common.h: drop libvirt-common.h from
      included_files to avoid build failures due to duplicate definitions.
    - Update README.Debian with Ubuntu changes
    - Enable some additional features on ppc64el and s390x (for arch parity)
      + systemtap, zfs, numa and numad on s390x.
      + systemtap on ppc64el.
    - d/t/control, d/t/smoke-qemu-session: fixup smoke-qemu-session by making
      vmlinuz available and accessible (Debian bug 848314)
    - d/t/control, d/t/smoke-lxc: fix up lxc smoke test isolation
    - d/p/ubuntu/ubuntu_machine_type.patch: accept ubuntu types as pci440fx
    - Further upstreamed apparmor Delta, especially any new one
      Our former delta is split into logical pieces and is either Ubuntu only
      or is part of a continuous upstreaming effort.
      Listing related remaining changes in debian/patches/ubuntu-aa/:
      + 0001-apparmor-Allow-pygrub-to-run-on-Debian-Ubuntu.patch: apparmor:
        Allow pygrub to run on Debian/Ubuntu
      + 0003-apparmor-libvirt-qemu-Allow-read-access-to-overcommi.patch:
        apparmor, libvirt-qemu: Allow read access to overcommit_memory
      + 0007-apparmor-libvirt-qemu-Allow-owner-read-access-to-PRO.patch:
        apparmor, libvirt-qemu: Allow owner read access to @{PROC}/*/auxv
      + 0017-apparmor-virt-aa-helper-Allow-access-to-tmp-director.patch:
        apparmor, virt-aa-helper: Allow access to tmp directories
      + ubuntu-aa/0020-virt-aa-helper-ubuntu-storage-paths.patch:
        apparmor, virt-aa-helper: Allow various storage pools and image
        locations
      + 0021-apparmor-virt-aa-helper-Add-openvswitch-support.patch:
        apparmor, virt-aa-helper: Add openvswitch support
      + 0029-appmor-libvirt-qemu-Add-9p-support.patch: appmor,
        libvirt-qemu: Add 9p support
      + 0030-virt-aa-helper-Complete-9p-support.patch: virt-aa-helper:
        add l to 9p file options.
      + 0031-virt-aa-helper-Ask-for-no-deny-rule-for-readonly-dis.patch:
        virt-aa-helper: Ask for no deny rule for readonly disk (renamed and
        reworded, was virt-aa-helper-no-explicity-deny-for-basefiles.patch)
      + 0032-apparmor-libvirt-qemu-Allow-reading-charm-specific-c.patch:
        apparmor, libvirt-qemu: Allow reading charm-specific ceph config
      + 0033-UBUNTU-only-apparmor-for-kvm.powerpc-LP-1680384.patch: allow
        commands executed by ubuntu only kvm wrapper on ppc64el
        (LP 1686621 LP 1680384 LP 1784023)
      + 0034-apparmor-virt-aa-helper-access-for-snapped-nova.patch:
        apparmor, virt-aa-helper: access for snapped nova
      + d/p/ubuntu-aa/0050-local-include-for-libvirt-qemu.patch,
        d/libvirt-daemon-system.postinst: provide a local apparmor include
        for abstraction/libvirt-qemu (LP: 1786019)
      + d/p/ubuntu-aa/lp-1815910-allow-vhost-net.patch: avoid apparmor issues
        with vhost-net/vhost-vsock/vhost-scsi hotplug (LP: 1815910)
    - d/rules: enable build time self tests on all architectures
    - dnsmasq related enhancements
      + run dnsmasq as libvirt-dnsmasq (LP: 1743718)
      + d/libvirt-daemon-system.postinst: add libvirt-dnsmasq user and group
      + d/libvirt-daemon-system.postrm: remove libvirt-dnsmasq user and group
        on purge
      + d/p/ubuntu/dnsmasq-as-priv-user: write dnsmasq config with user
        libvirt-dnsmasq and adapt the self tests to expect that config
      + d/libvirt-daemon-system.postinst: fix old libvirt-dnsmasq users group
      + Add dnsmasq configuration to work with system wide dnsmasq-base
    - debian/rules: disable the netcf backend. (LP: 1764314)
    - debian/control: drop libnetcf from Build-Depends.
    - debian/patches/ubuntu/ovmf_paths.patch: adjust paths to secboot.fd UEFI
      Secure Boot enabled variants of the OVMF firmware and variable store for
      the paths where we ship these files in Ubuntu.
    - d/rules: install virtlockd correctly with defaults file (LP: 1729516)
    - d/rules: also check build time self test results on all architectures
    - d/p/ubuntu/set-default-machine-to-ubuntu.patch: to select default
      machine type correctly with newer qemu/libvirt
    - d/t/control: fix smoke-qemu-session by ensuring the service will run
      installing libvirt-daemon-system
    - d/t/smoke-lxc: fix smoke-lxc by ignoring potential issues on destroy as
      long as the following undefine succeeds
    - avoid service dependency issues on upgrade (LP: 1786179)
      This will in the long term be resolved in dh_* tools, but to let an
      upgrade work for now we need to drop the sysV scripts (which we don't
      use anyway) and slightly modify the systemd service to work with todays
      dh_systemd_start properly. Can be dropped once Debian bug 905772 is
      resolved in dh_* tools and libvirt uses those new code.
      - d/libvirt-daemon-system.virtlogd.init: removed sysV init file
      - d/libvirt-daemon-system.libvirtd.init: removed sysV init file
      - debian/libvirt-daemon-system.maintscript: rm_conffile for virtlogd
        and lbivirtd sysV init file
      - d/p/ubuntu/avoid-restarting-virtlog-socket.patch: drop Also references
        to virtlogd/virtlockd sockets as they would imply a restart of
        virtlogd breaking it.
      - d/t/smoke-lxc: use systemd instead of sysV to restart the service
  * Added Changes:
    - Refreshed patches to match new upstream
      - d/p/Reduce-udevadm-settle-timeout-to-10-seconds.patch
      - d/p/ubuntu/ubuntu_machine_type.patch
    - d/control: Revert iptables/ebtables dependency as Eoan still is on 1.6.x
      This can be dropped once >=1.8.1
    - d/rules: adapt iptables binary paths present in Eoan (LP: #1832297)
      This can be dropped once >=1.8.1
    - d/p/ubuntu/dnsmasq-as-priv-user: update to include the new test
      nat-network-mtu
    - revert [c3c4cd4] drop in helper for firewalld as it is disabled on
      Ubuntu [can be squashed with the disabling of firewalld on next merge]
    - d/libvirt0.symbols: bump symbol versions for 5.4.0
    - d/rules: add --no-restart-after-upgrade to services that are supposed to
      stay up through upgrades - this also applies to related sockets.
  * Dropped Changes (upstream)
    - d/p/ubuntu-aa/lp-1804766-*: Allow rendering node access as needed
      for the ease use of mdev and gl devices (LP: 1804766)
    - d/p/ubuntu/lp-1771662-*: fix handling of VFs without associated PF
      (LP: 1771662)
    - d/p/ubuntu/lp-1825195-*.patch: fix issues with old guests that defined
      the never functional osxsave and ospke features (LP: 1825195).
    - d/p/ubuntu-aa/lp-1829223-virt-aa-helper-allow-vhost-scsi.patch fix
      vhost-scsi hotplug in virt-aa-helper (LP: 1829223)
    - SECURITY UPDATE: Add support for md-clear functionality
      + debian/patches/ubuntu/md-clear.patch: Define md-clear CPUID bit in
        src/cpu_map/x86_features.xml.
      + CVE-2018-12126, CVE-2018-12127, CVE-2018-12130, CVE-2019-11091
    - Implement further apparmor rules for usage of gl enabled
      graphics (LP: 1815452)
      + d/p/ubuntu-aa/lp-1815452-more-gl-rules.patch
      + d/p/ubuntu-aa/lp-1815452-virt-aa-helper-rule.patch
    - Implement further apparmor rules for usage of gl enabled
      graphics with nvidia cards (LP: 1817943)
      + d/p/ubuntu-aa/lp-1817943-nvidia-gl-rules.patch
      + d/p/ubuntu-aa/lp-1817943-devices-in-sysfs.patch
  * Dropped Changes (in Debian)
    - d/rules: strip -Bsymbolic-functions from linker flags as it breaks
      libvirt tests

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Fri, 07 Jun 2019 11:55:52 +0200

libvirt (5.3.0-1~1.gbp7b1637) UNRELEASED; urgency=medium

  ** SNAPSHOT build @7b1637605da9224c46ebf3a243fa725d643e7556 **

  [ Guido Günther ]
  * [fb43676] d/control: Drop dh-autoreconf build-dep.
    Not needed for dh compat > 10.
  * [81d21d5] d/not-installed: Use multi-arch dirs.
    Files moved during the dh12 switch.
  * [428ad14] New upstream version 5.3.0~rc2
  * [641e532] New upstream version 5.3.0

  [ Christian Ehrhardt ]
  * [c28c3b3] d/libvirt0.install: install translations
  * [c3c4cd4] d/libvirt-daemon-system.install: drop in helper for firewalld
  * [3e8b43c] d/not-installed: ignore default files /etc/sysconfig
  * [c223d7f] d/libvirt-daemon-system.examples: ship sysctl config as example
  * [f19acf6] d/libvirt-daemon-system.install: ship libxl-sanlock.conf
    (Closes: #919484)

  [ Andrea Bolognani ]
  * [6a2eae3] Simplify and improve watch file.

 -- Guido Günther <agx@sigxcpu.org>  Mon, 06 May 2019 13:06:27 +0200

libvirt (5.2.0-2) experimental; urgency=medium

  [ Guido Günther ]
  * [1ec90c0] d/compat: Switch to debhelper level 12
      * [fb6dd18] d/rules: s/no-restart-on-upgrade/no-stop-on-upgrade/
      * [3764b71] d/rules: --prallel not needed anymore
      * [1d92095] d/control: Add ${misc:Pre-Depends} for
        libvirt-daemon-system. This makes sure we pull in recent enough
        init-system-helpers
  * [02a155b] d/rules: Switch to dh_installsystemd
    dh_systemd_start is no longer used.
  * [bcad111] d/control: Fix typo
  * [8609192] d/control: Drop Debian revision on iptables build-dep.  Any
    version greater than 1.8.1 will do.
  * [447dd58] libnss-libvirt: Install libnss_libvirt-guest as well
    (Closes: #910288)
  * [4fb7d11] d/control: Build-depend on libglusterfs-dev.
    Since this is a recent addition we can drop the versioned dependency.
    (Closes: #919663)
  * [7b4ffeb] d/rules: Newer debhelper puts the libs into multi arch dirs.
    There's no need to move them manually anymore.

  [ Andrea Bolognani ]
  * [dd9cdaa] Use HTTPS for all URLs.
    This gets rid of the debian-watch-uses-insecure-uri informational Lintian
    tag, and then some.
  * [faaec12] Minimize upstream's signing key.
    This gets rid of the public-upstream-key-not-minimal informational Lintian
    tag.
  * [8a0e6f1] Remove Priority field from binary packages.
    This gets rid of the binary-control-field-duplicates-source informational
    Lintian tag.

  [ Christian Ehrhardt ]
  * [08f3a23] d/libvirt-clients.manpages: add virkeycode and virkeyname man
    pages.
  * [0f359de] d/rules: mv logrotate files to silence dh_missing
  * [f36ca33] dh_missing: ignore warning on libtool .la file

 -- Guido Günther <agx@sigxcpu.org>  Mon, 22 Apr 2019 12:20:36 +0200

libvirt (5.2.0-1) experimental; urgency=medium

  * Team upload.

  [ Christian Ehrhardt ]
  * [3997186] d/libvirt-daemon-system.maintscript: remove obsolete conffile
    /etc/logrotate.d/libvirtd.uml became obsolete since UML was dropped in
    libvirt 5.0 (Closes: #920574)
  * [c64d020] d/libvirt-daemon-system.libvirtd.default: clarify libvirtd_opts
    example (Closes: #921713)

  [ Guido Günther ]
  * [dd9d74f] New upstream version 5.2.0
  * [790365e] CVE-2019-3886: Don't allow unprivileged users to use the guest
    agent. Apply upstream patches
    remote-enforce-ACL-write-permission-for-getting-guest-tim.patch
    api-disallow-virDomainGetHostname-for-read-only-connectio.patch
    (Closes: #926418)

  [ Andrea Bolognani ]
  * [453f85d] Rediff patches. The patches
    security-aa-helper-allow-virt-aa-helper-to-read-dev-dri.patch
    security-aa-helper-generate-more-rules-for-gl-devices.patch
    security-aa-helper-gl-devices-in-sysfs-at-arbitrary-depth.patch
    security-aa-helper-nvidia-rules-for-gl-devices.patch
    virt-aa-helper-generate-rules-for-gl-enabled-graphics-dev.patch
    are included in libvirt 5.2.0 and have thus been dropped.
  * [a4294ef] Bump symbol versions.
  * [68394f6] Add tests-Avoid-writing-into-HOME-during-virsh-snapshot.patch

 -- Andrea Bolognani <eof@kiyuko.org>  Sun, 07 Apr 2019 18:39:49 +0200

libvirt (5.1.0-1) experimental; urgency=medium

  [ Laurent Bigonville ]
  * [76e2cb7] Don't recommend ebtables.
    It's part of the iptables package now. (Closes: #918472)

  [ Guido Günther ]
  * [5814c89] New upstream version 5.1.0
  * [55d063d] Rediff patches
  * [1102dae] d/gbp.conf: Switch to experimental
  * [cdf3787] d/rules: Adjust to now versioned wireshark module path

 -- Guido Günther <agx@sigxcpu.org>  Thu, 28 Mar 2019 13:03:29 +0100

libvirt (5.0.0-4) unstable; urgency=medium

  * [0fdc2af] Fix multiple CVEs related to privilege escalations on R/O
    connections.
    - CVE-2019-10161:
      CVE-2019-10161-api-disallow-virDomainSaveImageGetXMLDesc-.patch
    - CVE-2019-10166:
      api-disallow-virDomainManagedSaveDefineXML-on-read-only-c.patch
    - CVE-2019-10167:
      api-disallow-virConnectGetDomainCapabilities-on-read-only.patch
    - CVE-2019-10168:
      api-disallow-virConnect-HypervisorCPU-on-read-only-connec.patch
  * Include /etc/pki/qemu in apparmor (Closes: #930100)

 -- Guido Günther <agx@sigxcpu.org>  Mon, 17 Jun 2019 19:05:40 +0200

libvirt (5.0.0-3) unstable; urgency=medium

  [ Guido Günther ]
  * [6bc6e60] CVE-2019-10132: Fix vir{lock,log}d socket access.
    All patches were cherry-picked from upstream's v5.0-maint branch.
    (Closes: #929334)
  * [09016dd] d/patches: Move security fixes into security/

  [ Joachim Falk ]
  * [5d96699] lxc: Fix killing of lxc containers if cgroup backend v2 is
    unavailable.
    (Closes: #926999)
  * [ea7a491] lxc: Fix container shutdown and host reboot
    (Closes: #927310, #897394)

 -- Guido Günther <agx@sigxcpu.org>  Wed, 22 May 2019 12:31:08 +0200

libvirt (5.0.0-2.1) unstable; urgency=medium

  * Non-maintainer upload.

  [ Guido Günther ]
  * [3a9c65c] d/control: Fix typo
  * [b9935e5] d/control: Drop Debian revision on iptables build-dep.
    Any version greater than 1.8.1 will do.

  [ Salvatore Bonaccorso ]
  * [b811e38] cpu_map: Define md-clear CPUID bit (CVE-2018-12126,
    CVE-2018-12127, CVE-2018-12130, CVE-2019-11091)
    (Closes: #929154)

 -- Salvatore Bonaccorso <carnil@debian.org>  Sun, 19 May 2019 13:50:25 +0200

libvirt (5.0.0-2) unstable; urgency=medium

  [ Laurent Bigonville ]
  * [76e2cb7] Don't recommend ebtables.  It's part of the iptables package now.
    (Closes: #918472)

  [ intrigeri ]
  * [d7a7218] Fix virtio-gpu + virgl support by cherry-picking upstream
    commits virt-manager in current sid still creates new VMs with QXL
    graphics by default, so this bug only affects users who opt in for
    virtio-gpu 3D acceleration.  Still, the option for virtio-gpu + 3D
    acceleration is offered in the virt-manager GUI, so having it broken by
    default is an important problem.
    (Closes: #916587)

  [ Christian Ehrhardt ]
  * [3997186] d/libvirt-daemon-system.maintscript: remove obsolete conffile
    /etc/logrotate.d/libvirtd.uml became obsolete since UML was dropped in
    libvirt 5.0 (Closes: #920574)
  * [c64d020] d/libvirt-daemon-system.libvirtd.default: clarify libvirtd_opts
    example (Closes: #921713)

  [ Guido Günther ]
  * [790365e] CVE-2019-3886: Don't allow unprivileged users to use the guest
    agent. Apply upstream patches
    remote-enforce-ACL-write-permission-for-getting-guest-tim.patch
    api-disallow-virDomainGetHostname-for-read-only-connectio.patch
    (Closes: #926418)

 -- Guido Günther <agx@sigxcpu.org>  Sun, 07 Apr 2019 12:36:21 +0200

libvirt (5.0.0-1ubuntu4) eoan; urgency=medium

  * d/p/ubuntu/lp-1825195-*.patch: fix issues with old guests that defined
    the never functional osxsave and ospke features (LP: #1825195).
  * d/p/series: reorder ubuntu Delta
  * d/p/ubuntu-aa/lp-1815910-allow-vhost-net.patch: avoid apparmor issues
    with vhost-net/vhost-vsock/vhost-scsi hotplug (LP: #1815910)
  * d/p/ubuntu-aa/lp-1829223-virt-aa-helper-allow-vhost-scsi.patch fix
    vhost-scsi hotplug in virt-aa-helper (LP: #1829223)

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Thu, 16 May 2019 10:42:09 +0200

libvirt (5.0.0-1ubuntu3) eoan; urgency=medium

  * SECURITY UPDATE: Add support for md-clear functionality
    - debian/patches/ubuntu/md-clear.patch: Define md-clear CPUID bit in
      src/cpu_map/x86_features.xml.
    - CVE-2018-12126, CVE-2018-12127, CVE-2018-12130, CVE-2019-11091

 -- Marc Deslauriers <marc.deslauriers@ubuntu.com>  Tue, 14 May 2019 14:48:05 -0400

libvirt (5.0.0-1ubuntu2) disco; urgency=medium

  * Implement further apparmor rules for usage of gl enabled
    graphics (LP: #1815452)
    - d/p/ubuntu-aa/lp-1815452-more-gl-rules.patch
    - d/p/ubuntu-aa/lp-1815452-virt-aa-helper-rule.patch
  * Implement further apparmor rules for usage of gl enabled
    graphics with nvidia cards (LP: #1817943)
    - d/p/ubuntu-aa/lp-1817943-nvidia-gl-rules.patch
    - d/p/ubuntu-aa/lp-1817943-devices-in-sysfs.patch
  * d/p/ubuntu-aa/lp-1804766-*: updated to the upstream accepted
    version (no functional change, LP: 1804766)

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Tue, 12 Feb 2019 11:27:14 +0100

libvirt (5.0.0-1ubuntu1) disco; urgency=medium

  * Merged with Debian unstable
    Among many other new features and fixes this includes fixes for:
    LP: #1754871 - 1799446 zPCI passthrough support for KVM
    LP: #1811198 - remove arbitrary limit on socket_id/core_id
    Remaining changes:
    - Disable libssh2 support (universe dependency)
    - Disable firewalld support (universe dependency)
    - Set qemu-group to kvm (for compat with older ubuntu)
    - Additional apport package-hook
    - Autostart default bridged network (As upstream does, but not Debian).
      In addition to just enabling it our solution provides:
      + do not autostart if subnet is already taken (e.g. in guests).
      + iterate some alternative subnets before giving up
    - d/p/ubuntu/Allow-libvirt-group-to-access-the-socket.patch: This is
      the group based access to libvirt functions as it was used in Ubuntu
      for quite long.
      + d/p/ubuntu/daemon-augeas-fix-expected.patch fix some related tests
        due to the group access change.
      + d/libvirt-daemon-system.postinst: add users in sudo to the libvirt
        group.
    - ubuntu/parallel-shutdown.patch: set parallel shutdown by default.
    - Update Vcs-Git and Vcs-Browser fields to point to launchpad
    - Xen related
      - d/p/ubuntu/ubuntu-libxl-qemu-path.patch: this change was split. The
        section that adapts the path of the emulator to the Debian/Ubuntu
        packaging is kept.
      - d/p/ubuntu/ubuntu-libxl-Fix-up-VRAM-to-minimum-requirements.patch: auto
        set VRAM to minimum requirements
      - d/p/ubuntu/xen-default-uri.patch: set default URI on xen hosts
      - Add libxl log directory
      - libvirt-uri.sh: Automatically switch default libvirt URI for users on
        Xen dom0 via user profile (was missing on changelogs before)
    - d/p/ubuntu/apibuild-skip-libvirt-common.h: drop libvirt-common.h from
      included_files to avoid build failures due to duplicate definitions.
    - Update README.Debian with Ubuntu changes
    - Enable some additional features on ppc64el and s390x (for arch parity)
      + systemtap, zfs, numa and numad on s390x.
      + systemtap on ppc64el.
    - d/t/control, d/t/smoke-qemu-session: fixup smoke-qemu-session by making
      vmlinuz available and accessible (Debian bug 848314)
    - d/t/control, d/t/smoke-lxc: fix up lxc smoke test isolation
    - d/p/ubuntu/ubuntu_machine_type.patch: accept ubuntu types as pci440fx
    - Further upstreamed apparmor Delta, especially any new one
      Our former delta is split into logical pieces and is either Ubuntu only
      or is part of a continuous upstreaming effort.
      Listing related remaining changes in debian/patches/ubuntu-aa/:
      + 0001-apparmor-Allow-pygrub-to-run-on-Debian-Ubuntu.patch: apparmor:
        Allow pygrub to run on Debian/Ubuntu
      + 0003-apparmor-libvirt-qemu-Allow-read-access-to-overcommi.patch:
        apparmor, libvirt-qemu: Allow read access to overcommit_memory
      + 0007-apparmor-libvirt-qemu-Allow-owner-read-access-to-PRO.patch:
        apparmor, libvirt-qemu: Allow owner read access to @{PROC}/*/auxv
      + 0017-apparmor-virt-aa-helper-Allow-access-to-tmp-director.patch:
        apparmor, virt-aa-helper: Allow access to tmp directories
      + ubuntu-aa/0020-virt-aa-helper-ubuntu-storage-paths.patch:
        apparmor, virt-aa-helper: Allow various storage pools and image
        locations
      + 0021-apparmor-virt-aa-helper-Add-openvswitch-support.patch:
        apparmor, virt-aa-helper: Add openvswitch support
      + 0029-appmor-libvirt-qemu-Add-9p-support.patch: appmor,
        libvirt-qemu: Add 9p support
      + 0030-virt-aa-helper-Complete-9p-support.patch: virt-aa-helper:
        add l to 9p file options.
      + 0031-virt-aa-helper-Ask-for-no-deny-rule-for-readonly-dis.patch:
        virt-aa-helper: Ask for no deny rule for readonly disk (renamed and
        reworded, was virt-aa-helper-no-explicity-deny-for-basefiles.patch)
      + 0032-apparmor-libvirt-qemu-Allow-reading-charm-specific-c.patch:
        apparmor, libvirt-qemu: Allow reading charm-specific ceph config
      + 0033-UBUNTU-only-apparmor-for-kvm.powerpc-LP-1680384.patch: allow
        commands executed by ubuntu only kvm wrapper on ppc64el
        (LP 1686621 LP 1680384 LP 1784023)
      + 0034-apparmor-virt-aa-helper-access-for-snapped-nova.patch:
        apparmor, virt-aa-helper: access for snapped nova
      + d/p/ubuntu-aa/0050-local-include-for-libvirt-qemu.patch,
        d/libvirt-daemon-system.postinst: provide a local apparmor include
        for abstraction/libvirt-qemu (LP: 1786019)
    - d/rules: enable build time self tests on all architectures
    - dnsmasq related enhancements
      + run dnsmasq as libvirt-dnsmasq (LP: 1743718)
      + d/libvirt-daemon-system.postinst: add libvirt-dnsmasq user and group
      + d/libvirt-daemon-system.postrm: remove libvirt-dnsmasq user and group on
        purge
      + d/p/ubuntu/dnsmasq-as-priv-user: write dnsmasq config with user
        libvirt-dnsmasq and adapt the self tests to expect that config
      + d/libvirt-daemon-system.postinst: fix old libvirt-dnsmasq users group
      + Add dnsmasq configuration to work with system wide dnsmasq-base
    - debian/rules: disable the netcf backend. (LP: 1764314)
    - debian/control: drop libnetcf from Build-Depends.
    - debian/patches/ubuntu/ovmf_paths.patch: adjust paths to secboot.fd UEFI
      Secure Boot enabled variants of the OVMF firmware and variable store for
      the paths where we ship these files in Ubuntu.
    - d/rules: install virtlockd correctly with defaults file (LP: 1729516)
    - avoid service dependency issues on upgrade (LP: 1786179)
      This will in the long term be resolved in dh_* tools, but to let an
      upgrade work for now we need to drop the sysV scripts (which we don't
      use anyway) and slightly modify the systemd service to work with todays
      dh_systemd_start properly. Can be dropped once Debian bug 905772 is
      resolved in dh_* tools and libvirt uses those new code.
      - d/libvirt-daemon-system.virtlogd.init: removed sysV init file
      - d/libvirt-daemon-system.libvirtd.init: removed sysV init file
      - debian/libvirt-daemon-system.maintscript: rm_conffile for virtlogd
        and lbivirtd sysV init file
      - d/p/ubuntu/avoid-restarting-virtlog-socket.patch: drop Also references
        to virtlogd/virtlockd sockets as they would imply a restart of
        virtlogd breaking it.
      - d/t/smoke-lxc: use systemd instead of sysV to restart the service
  * Added Changes:
    - Refresh d/p/ubuntu/ubuntu-libxl-qemu-path.patch for new context
    - d/rules: also check build time self test results on all architectures
    - d/rules: strip -Bsymbolic-functions from linker flags as it breaks
      libvirt tests
    - d/p/ubuntu/set-default-machine-to-ubuntu.patch: to select default
      machine type correctly with newer qemu/libvirt
    - d/p/ubuntu-aa/lp-1804766-*: Allow rendering node access as needed
      for the ease use of mdev and gl devices (LP: #1804766)
    - refreshed d/p/ubuntu-aa for updated paths in libvirt 5.0
    - d/t/control: fix smoke-qemu-session by ensuring the service will run
      installing libvirt-daemon-system
    - d/t/smoke-lxc: fix smoke-lxc by ignoring potential issues on destroy as
      long as the following undefine succeeds
    - d/p/ubuntu/lp-1771662-*: fix handling of VFs without associated PF
      (LP: #1771662)
  * Dropped Changes (upstream)
    - debian/patches/ubuntu/lp1787405-*: Support guest dedicated Crypto
      Adapters on s390x (LP: 1787405)
    - d/p/ubuntu/lp-1802727-netdevbridge-fall-back-to-ioctl-from-sysfs.patch:
      fix libvirt bridge handling in unprivileged containers (LP: 1802906)
    - d/p/ubuntu-aa/lp-1788603-fix-ptrace-rules-with-kernel-4.18.patch:
      avoid issues with newer kernels >=4.18 (LP: 1788603)
    - Fix an issue where guests with plenty of hostdevs attached where detected
      as not shut down due to the kernel needing more time to free up
      resources (LP: 1788226)
      - d/p/ubuntu/lp-1788226-wait-longer-5-30s-on-hard-shutdown.patch
      - d/p/ubuntu/lp-1788226-wait-longer-on-kill-per-assigned-Hostdev.patch
    - 0025-apparmor-fix-newer-virt-manager-1.4.0.patch: Add Apparmor
      permissions so virt-manager 1.4.0 viewing works (LP 1668681 1747442).
    - 0040-apparmor-add-mediation-rules-for-unconfined.patch:
      apparmor: add mediation rules for unconfined guests
    - d/p/ubuntu-aa/0051-allow-user-tmp.patch: some features need tmp, but we
      don't want blanket access. We only allow enumerating the base dir and
      reading owned files. Further features needing /tmp have to add local
      overrides, examples are qemu-smb and some modes of local snapshots.
      (LP: 1365261) Can be dropped >=libvirt 4.7
    - d/p/ubuntu-aa/0052-allow-to-preserve-dev-mountpoints.patch: Allow to
      preserve /dev mountpoints in qemu namespaces (LP: 1786168)
      Can be dropped >=libvirt 4.7
    - d/p/ubuntu/enable-kvm-spice.patch: compat with older Ubuntu qemu/kvm
      which provided a separate kvm-spice. Upstream completely dropped
      alternative types and kvm-spice is a symlink for quite some time.
      Builtin expected binaries work, so drop this delta.
  * Dropped Changes (in Debian)
    - Convert libvirt0, libnss_libvirt and libvirt-dev to multi-arch.

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Tue, 08 Jan 2019 13:09:31 +0100

libvirt (5.0.0-1) unstable; urgency=medium

  * [7346f30] New upstream version 5.0.0
  * [1c46a4c] Drop sheepdog support (Closes: #908071)
  * [b88175f] Bump symbol versions
  * [c13a8da] Rediff patches

 -- Guido Günther <agx@sigxcpu.org>  Wed, 16 Jan 2019 10:31:33 +0100

libvirt (4.10.0-2) unstable; urgency=medium

  [ Marcin Juszkiewicz ]
  * [d143d3c] update Vcs-git tags to point to salsa.debian.org
  * [96995c1] Fix versions in *.NEWS files
  * [8e8286d] Don't mark bash completion as executable
  * [72f8ed3] Use multiarch layout.
    Based on the on what Ubuntu does (Closes: #813062)
  * [9b52c21] Use dpkg-buildflags on configure
    to e.g. get the proper hardening flags.

  [ Andrea Bolognani ]
  * [684bb89] Move data files from libvirt-daemon to libvirt0.
    These files are used internally by the library, so they
    should be shipped along with it rather than with the daemon.
    This is consistent with the upstream libvirt.spec file.
    The pattern is partially expanded in the libvirt0.install
    file to avoid having to remove a specific subset of data
    files later on as part of debian/rules.

  [ Guido Günther ]
  * [a6cbf92] cpu_map is now a directory.
    It used to be a single XML file

 -- Guido Günther <agx@sigxcpu.org>  Tue, 18 Dec 2018 12:55:10 +0100

libvirt (4.10.0-1) unstable; urgency=medium

  * [0cde44d] Remove bridge-utils from recommends.  We don't use brctl since
    ages.  Thanks to Andreas Henriksson
  * [3c22e06] Drop debian/remove-RHism.diff.patch.
    Debian has /usr/bin/service since quiet some time now.
    Thanks to Andrea Bolognani
  * [54a5cdb] New upstream version 4.10.0
  * [87f075c] Rediff patches
  * [f798585] Bump symbol versions
  * [3bfd881] Depend on sensible-utils

 -- Guido Günther <agx@sigxcpu.org>  Thu, 13 Dec 2018 11:58:14 +0100

libvirt (4.7.0-1) unstable; urgency=medium

  * [8ff38ac] New upstream version 4.7.0
    (Closes: #908341)
  * [afdd147] Bump symbol versions
  * [41fa8f5] Rediff patches.
    Drop all jansson related patches. Fixed ustream.

 -- Guido Günther <agx@sigxcpu.org>  Sun, 09 Sep 2018 21:42:33 +0200

libvirt (4.6.0-2ubuntu6) disco; urgency=medium

  * No-change rebuild for readline soname change.

 -- Matthias Klose <doko@ubuntu.com>  Tue, 15 Jan 2019 10:26:04 +0000

libvirt (4.6.0-2ubuntu5) disco; urgency=medium

  * d/p/ubuntu/lp1787405-0008-qemu-mdev-Use-vfio-pci-display-property-only
    -with-vf.patch: fix handling of non PCI vfio display propery (part
    of LP: #1787405)

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Thu, 06 Dec 2018 09:20:39 +0100

libvirt (4.6.0-2ubuntu4) disco; urgency=medium

  * debian/patches/ubuntu/lp1787405-*: Support guest dedicated Crypto
    Adapters on s390x (LP: #1787405)
  * d/p/ubuntu/lp-1802727-netdevbridge-fall-back-to-ioctl-from-sysfs.patch:
    fix libvirt bridge handling in unprivileged containers (LP: #1802906)

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Fri, 09 Nov 2018 07:42:01 +0100

libvirt (4.6.0-2ubuntu3) cosmic; urgency=medium

  * d/p/ubuntu-aa/lp-1788603-fix-ptrace-rules-with-kernel-4.18.patch:
    avoid issues with newer kernels >=4.18 (LP: #1788603)

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Mon, 27 Aug 2018 10:57:57 +0200

libvirt (4.6.0-2ubuntu2) cosmic; urgency=medium

  * Fix an issue where guests with plenty of hostdevs attached where detected
    as not shut down due to the kernel needing more time to free up
    resources (LP: #1788226)
    - d/p/ubuntu/lp-1788226-wait-longer-5-30s-on-hard-shutdown.patch
    - d/p/ubuntu/lp-1788226-wait-longer-on-kill-per-assigned-Hostdev.patch

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Tue, 21 Aug 2018 17:51:43 +0200

libvirt (4.6.0-2ubuntu1) cosmic; urgency=medium

  * Merged with Debian unstable (LP: #1786957).
    Among many other new features and fixes this includes fixes
    for (LP: #1754871), Remaining changes:
    - Disable libssh2 support (universe dependency)
    - Disable firewalld support (universe dependency)
    - Set qemu-group to kvm (for compat with older ubuntu)
    - Additional apport package-hook
    - Autostart default bridged network (As upstream does, but not Debian).
      In addition to just enabling it our solution provides:
      + do not autostart if subnet is already taken (e.g. in guests).
      + iterate some alternative subnets before giving up
    - d/p/ubuntu/Allow-libvirt-group-to-access-the-socket.patch: This is
      the group based access to libvirt functions as it was used in Ubuntu
      for quite long.
      + d/p/ubuntu/daemon-augeas-fix-expected.patch fix some related tests
        due to the group access change.
      + d/libvirt-daemon-system.postinst: add users in sudo to the libvirt
        group.
    - ubuntu/parallel-shutdown.patch: set parallel shutdown by default.
    - d/p/ubuntu/enable-kvm-spice.patch: compat with older Ubuntu qemu/kvm
      which provided a separate kvm-spice.
    - Xen related
      - d/p/ubuntu/ubuntu-libxl-qemu-path.patch: this change was split. The
        section that adapts the path of the emulator to the Debian/Ubuntu
        packaging is kept.
      - d/p/ubuntu/ubuntu-libxl-Fix-up-VRAM-to-minimum-requirements.patch: auto
        set VRAM to minimum requirements
      - d/p/ubuntu/xen-default-uri.patch: set default URI on xen hosts
      - Add libxl log directory
      - libvirt-uri.sh: Automatically switch default libvirt URI for users on
        Xen dom0 via user profile (was missing on changelogs before)
    - d/p/ubuntu/apibuild-skip-libvirt-common.h: drop libvirt-common.h from
      included_files to avoid build failures due to duplicate definitions.
    - Update README.Debian with Ubuntu changes
    - Convert libvirt0, libnss_libvirt and libvirt-dev to multi-arch.
    - Enable some additional features on ppc64el and s390x (for arch parity)
      + systemtap, zfs, numa and numad on s390x.
      + systemtap on ppc64el.
    - d/t/control, d/t/smoke-qemu-session: fixup smoke-qemu-session by making
      vmlinuz available and accessible (Debian bug 848314)
    - d/t/control, d/t/smoke-lxc: fix up lxc smoke test isolation
    - Add dnsmasq configuration to work with system wide dnsmasq (drop >18.04,
      no more UCA onto Xenial then which has global dnsmasq by default).
    - d/p/ubuntu/ubuntu_machine_type.patch: accept ubuntu types as pci440fx
    - Further upstreamed apparmor Delta, especially any new one
      Our former delta is split into logical pieces and is either Ubuntu only
      or is part of a continuous upstreaming effort.
      Listing related remaining changes in debian/patches/ubuntu-aa/:
      + 0001-apparmor-Allow-pygrub-to-run-on-Debian-Ubuntu.patch: apparmor:
        Allow pygrub to run on Debian/Ubuntu
      + 0003-apparmor-libvirt-qemu-Allow-read-access-to-overcommi.patch:
        apparmor, libvirt-qemu: Allow read access to overcommit_memory
      + 0007-apparmor-libvirt-qemu-Allow-owner-read-access-to-PRO.patch:
        apparmor, libvirt-qemu: Allow owner read access to @{PROC}/*/auxv
      + 0017-apparmor-virt-aa-helper-Allow-access-to-tmp-director.patch:
        apparmor, virt-aa-helper: Allow access to tmp directories
      + ubuntu-aa/0020-virt-aa-helper-ubuntu-storage-paths.patch:
        apparmor, virt-aa-helper: Allow various storage pools and image
        locations
      + 0021-apparmor-virt-aa-helper-Add-openvswitch-support.patch:
        apparmor, virt-aa-helper: Add openvswitch support
      + 0025-apparmor-fix-newer-virt-manager-1.4.0.patch: Add Apparmor
        permissions so virt-manager 1.4.0 viewing works (LP 1668681 1747442).
        Can be dropped >=libvirt 4.7
      + 0029-appmor-libvirt-qemu-Add-9p-support.patch: appmor,
        libvirt-qemu: Add 9p support
      + 0030-virt-aa-helper-Complete-9p-support.patch: virt-aa-helper:
        add l to 9p file options.
      + 0031-virt-aa-helper-Ask-for-no-deny-rule-for-readonly-dis.patch:
        virt-aa-helper: Ask for no deny rule for readonly disk (renamed and
        reworded, was virt-aa-helper-no-explicity-deny-for-basefiles.patch)
      + 0032-apparmor-libvirt-qemu-Allow-reading-charm-specific-c.patch:
        apparmor, libvirt-qemu: Allow reading charm-specific ceph config
      + 0033-UBUNTU-only-apparmor-for-kvm.powerpc-LP-1680384.patch: allow
        commands executed by ubuntu only kvm wrapper on ppc64el
        (LP 1686621 & LP 1680384).
      + 0034-apparmor-virt-aa-helper-access-for-snapped-nova.patch:
        apparmor, virt-aa-helper: access for snapped nova
      + 0040-apparmor-add-mediation-rules-for-unconfined.patch:
        apparmor: add mediation rules for unconfined guests
        Can be dropped >=libvirt 4.7
    - d/rules: enable build time self tests on all architectures
    - run dnsmasq as libvirt-dnsmasq (LP: 1743718)
      + d/libvirt-daemon-system.postinst: add libvirt-dnsmasq user and group
      + d/libvirt-daemon-system.postrm: remove libvirt-dnsmasq user and group on
        purge
      + d/p/ubuntu/dnsmasq-as-priv-user: write dnsmas config with user
        libvirt-dnsmasq and adapt the self tests to expect that config
      + d/libvirt-daemon-system.postinst: fix old libvirt-dnsmasq users
    - debian/rules: disable the netcf backend. (LP: 1764314)
    - debian/control: drop libnetcf from Build-Depends.
    - ddebian/patches/ubuntu/ovmf_paths.patch: adjust paths to secboot.fd UEFI
      Secure Boot enabled variants of the OVMF firmware and variable store for
      the paths where we ship these files in Ubuntu.
    - d/rules: install virtlockd correctly with defaults file (LP: 1729516)
  * Added Changes
    - 0032-apparmor-libvirt-qemu-Allow-reading-charm-specific-c.patch:
      updated to take care of no more silencing and thereby hiding denials
      (LP 1719579 is an example)
    - 0032-apparmor-libvirt-qemu-Allow-reading-charm-specific-c.patch:
      updated to also allow the optionally placed ceph asok file (LP: #1779674)
    - 0033-UBUNTU-only-apparmor-for-kvm.powerpc-LP-1680384.patch: prepare
      profile for usrmerge (LP: #1784023)
    - Finalize the libvirt-bin -> libvirt-* transition in the apport
      package-hook.
    - d/p/ubuntu-aa/0050-local-include-for-libvirt-qemu.patch,
      d/libvirt-daemon-system.postinst: provide a local apparmor include
      for abstraction/libvirt-qemu (LP: #1786019)
    - d/p/ubuntu-aa/0051-allow-user-tmp.patch: some features need tmp, but we
      don't want blanket access. We only allow enumerating the base dir and
      reading owned files. Further features needing /tmp have to add local
      overrides, examples are qemu-smb and some modes of local snapshots.
      (LP: #1365261) Can be dropped >=libvirt 4.7
    - d/p/ubuntu-aa/0052-allow-to-preserve-dev-mountpoints.patch: Allow to
      preserve /dev mountpoints in qemu namespaces (LP: #1786168)
      Can be dropped >=libvirt 4.7
    - avoid service dependency issues on upgrade (LP: #1786179)
      This will in the long term be resolved in dh_* tools, but to let an
      upgrade work for now we need to drop the sysV scripts (which we don't
      use anyway) and slightly modify the systemd service to work with todays
      dh_systemd_start properly. Can be dropped once Debian bug 905772 is
      resolved in dh_* tools and libvirt uses those new code.
      - d/libvirt-daemon-system.virtlogd.init: removed sysV init file
      - d/libvirt-daemon-system.libvirtd.init: removed sysV init file
      - debian/libvirt-daemon-system.maintscript: rm_conffile for virtlogd
        and lbivirtd sysV init file
      - d/p/ubuntu/avoid-restarting-virtlog-socket.patch: drop Also references
        to virtlogd/virtlockd sockets as they would imply a restart of
        virtlogd breaking it.
      - d/t/smoke-lxc: use systemd instead of sysV to restart the service
  * Dropped Changes (upstream)
    - d/p/ubuntu/virt-aa-helper-Set-the-supported-features.patch: allow parsing
      of memory slots and other extended features without breaking
      virt-aa-helper (LP: 1746431).
    - d/p/stable/0001-Revert-qemu-monitor-do-not-report-error-on-shutdown.patch
    - d/p/stable/0002-nodedev-Fix-failing-to-parse-PCI-address-for-non-PCI.patch
    - d/p/stable/0003-qemu-assign-correct-type-of-PCI-address-for-vhost-sc.patch
    - d/p/stable/0004-qemu-Refresh-caps-cache-after-booting-a-different-ke.patch
    - d/p/stable/0005-qemu-auto-add-generic-xhci-rather-than-NEC-xhci-to-Q.patch
    - d/p/stable/0006-libvirtd-Explicit-dependency-on-systemd-machined.patch
    - d/p/stable/0007-rpc-fix-race-sending-and-encoding-sasl-data.patch
    - d/p/stable/0008-vhost-user-add-support-reconnect-for-vhost-user-port.patch
    - d/p/stable/0009-qemu-Fix-memory-leak-in-processGuestPanicEvent.patch
    - d/p/stable/0010-storage-util-Properly-ignore-errors-when-backing-vol.patch
    - d/p/stable/0011-conf-Use-correct-attribute-name-in-error-message.patch
    - d/p/stable/0012-util-json-Add-helper-to-return-string-or-number-prop.patch
    - d/p/stable/0013-util-storage-Parse-lun-for-iSCSI-protocol-from-JSON-.patch
    - d/p/stable/0014-virsh-Offer-only-persistent-domains-for-autostart.patch
    - d/p/stable/0015-blockjob-Fix-a-error-checking-of-blockjob-status-in-.patch
    - d/p/stable/0016-qemu-Expose-rx-tx_queue_size-in-qemu.conf-too.patch
    - d/p/stable/0017-qemu-migration-Refresh-device-information-after-tran.patch
    - d/p/stable/0018-qemuDomainRemoveMemoryDevice-unlink-memory-backing-f.patch
    - d/p/stable/0019-vbox-fix-SEGV-during-dumpxml-of-a-serial-port.patch
    - d/p/stable/0020-qemu-Initialize-priv-in-qemuDomainCoreDumpWithFormat.patch
    - d/p/stable/0021-fix-regex-to-check-CN-from-server-certificate.patch
    - d/p/stable/0022-storage-Fix-formatting-and-parsing-of-qemu-type-Unix.patch
    - d/p/stable/0023-util-storage-Remove-detected-authentication-data-for.patch
    - d/p/stable/0024-qemu-blockcopy-Add-check-for-bandwidth.patch
    - d/p/stable/0025-conf-move-generated-member-from-virMacAddr-to-virDom.patch
    - d/p/stable/0026-lxc-Drop-useless-check-in-live-device-update.patch
    - d/p/stable/0027-Pass-oldDev-to-virDomainDefCompatibleDevice-on-devic.patch
    - d/p/stable/0028-qemu-Fix-updating-device-with-boot-order.patch
    - d/p/stable/0030-daemon-fix-rpc-event-leak-on-error-path-in-remoteDis.patch
    - d/p/stable/0029-lxc-fix-rpc-event-leak-on-error-path-in-virLXCContro.patch
    - d/p/stable/0031-qemu-fix-memory-leak-of-vporttype-during-migration.patch
    - d/p/stable/0032-virsh-fixing-segfault-by-pool-autocompleter-function.patch
    - d/p/stable/0033-qemu-Fix-comparison-assignment-in-qemuDomainUpdateDe.patch
    - d/p/stable/0034-qemu-Fix-memory-leak-in-qemuConnectGetAllDomainStats.patch
    - d/p/stable/0035-libvirtd-fix-potential-deadlock-when-reloading.patch
    - d/p/stable/0036-qemu-Use-correct-bus-type-for-input-devices.patch
    - d/p/stable/0037-qemu-hostdev-Fix-the-error-on-VM-start-with-an-mdev-.patch
    - d/p/stable/0038-conf-Fix-crash-in-virDomainDefCompatibleDevice.patch
    - d/p/ubuntu/lp1688508-tools-avoid-text-spilling-into-variables.patch:
      avoid hanging on shutdown (LP: 1688508)
    - d/p/ubuntu-aa/0041-apparmor-add-ro-rule-for-sasl-GSSAPI-
      plugin-on-etc-g.patch fix issues if sasl is configured (LP: 1696471)
    - d/p/ubuntu-aa/0042-virt-aa-helper-resolve-yet-to-be-created-paths.patch
      ensure symlinks are resolved to get valid rules if interim parts of a path
      are a symlink (LP: 1752361)
    - d/p/ubuntu/lp1688508-tools-fix-variable-scope-in-in-check_guests_shutdown:
      avoid issues shutting down more guests than configured for parallel
      shutdown (LP: 1688508)
    - d/p/ubuntu-aa/lp1756394-virt-aa-helper-resolve-file-symlinks.patch: fix
      using devices that are symlinks (LP: 1756394)
    - Fix nvdimm memory and passthrough input devices for hotplug via
      domain security callbacks backporting upstream commits (LP: 1755153).
      + d/p/ubuntu-aa/lp1755153-apparmor-add-Set-Restore-InputLabel.patch
      + d/p/ubuntu-aa/lp1755153-apparmor-add-Set-Restore-MemoryLabel.patch
    - Fix nvdimm memory and passthrough input devices in initial guest
      description via virt-aa-helper (LP: 1757085).
      + d/p/ubuntu-aa/lp1757085-virt-aa-helper-nvdimm-memory.patch
      + d/p/ubuntu-aa/lp1757085-virt-aa-helper-passthrough-input.patch
    - Fix clean shut down of guests on system shutdown (LP: 1764668)
      + d/p/ubuntu/lp-1764668-do-not-report-unknown-guests.patch
      + d/p/ubuntu/lp-1764668-fix-check_guests_shutdown-loop.patch
    - SECURITY UPDATE: QEMU monitor DoS
      + debian/patches/CVE-2018-1064.patch: add size limit to
        src/qemu/qemu_agent.c.
      + CVE-2018-1064
    - SECURITY UPDATE: Speculative Store Bypass
      + debian/patches/CVE-2018-3639-1.patch: define the 'ssbd' CPUID feature
        bit in src/cpu/cpu_map.xml.
      + debian/patches/CVE-2018-3639-2.patch: define the 'virt-ssbd' CPUID
        feature bit in src/cpu/cpu_map.xml.
      + CVE-2018-3639
    - d/p/ubuntu-aa/lp1775777-vfio-usage-without-initial-hostdev.patch: fix
      hotplug use cases where the initial guest had no hostdev at all and
      therefore vrit-aa-helper did not allow /dev/vfio/vfio (LP: 1775777)
    - debian/patches/ubuntu/lp-1758037-nwfilter-increase-pcap-buffer-size.patch:
      Fix nwfilters that set CTRL_IP_LEARNING set to dhcp failing with "An error
      occurred, but the cause is unknown" due to a buffer being too small
      for pcap with TPACKET_V3 enabled (LP: 1758037)
    - SECURITY UPDATE: code injection via libnss_dns.so
      + debian/patches/CVE-2018-6764-1.patch: determine the hostname on
        startup in src/util/virlog.c.
      + debian/patches/CVE-2018-6764-2.patch: fix syntax-check in
        src/util/virlog.c.
      + debian/patches/CVE-2018-6764-3.patch: fix deadlock obtaining hostname
        in cfg.mk, src/util/virlog.c.
      + CVE-2018-6764
  * Dropped Changes (no upgrade path left that needs those)
    - Backwards compatible handling of group rename (can be dropped >18.04).
    - Modifications to adapt for our delayed switch away from libvirt-bin (can
      be dropped >18.04).
      + d/p/ubuntu/libvirtd-service-add-bin-alias.patch: systemd: define alias
        to old service name so that old references work
      + d/p/ubuntu/libvirtd-init-add-bin-alias.patch: sysv init: define alias
        to old service name so that old references work
      + d/control: transitional package with the old name and maintainer
        scripts to handle the transition
    - fix conffile upgrade handling to avoid obsolete files
      and inactive duplicates (LP 1694159)
    - conffile handling of files dropped in 3.5 (can be dropped >18.04)
      + /etc/init.d/virtlockd was sysv init only
      + /etc/apparmor.d/local/usr.sbin.libvirtd and
        /etc/apparmor.d/local/usr.lib.libvirt.virt-aa-helper are now generated
        by dh_apparmor as needed
    - d/libvirt-daemon-system.maintscript: remove the now dropped conffile
      /etc/cron.daily/libvirt-daemon-system
  * Dropped Changes (cleanups)
    - d/test/smoke-lxc workaround for debbug 848317/867379 (systemd has fixed
      one issue and the other is solved in libvirt by ensuring to move to the
      right cgroups.)
    - remove no more used libvirt-dnsmasq user (this was redundant since
      4.0.0-1ubuntu5 reintroduced a libvirt-dnsmasq user)
    - Disable selinux (now in main)

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Sat, 18 Aug 2018 14:40:58 +0200

libvirt (4.6.0-2) unstable; urgency=medium

  * [c33faee] Drop dwarves dependency.
    Unmaintained and only used in the test suite. (Closes: #905700)
  * [43da5ad] Don't use jansson for JSON encoding.
    It has borken integer parsing. This adds new patches:
        Revert-m4-Introduce-STABLE_ORDERING_JANSSON.patch
        Revert-Remove-virJSONValueNewStringLen.patch
        Revert-build-undef-WITH_JANSSON-for-SETUID_RPC_CLIENT.patch
        Revert-tests-qemucapsprobe-Fix-output-after-switching-to-.patch
        Revert-build-require-Jansson-if-QEMU-driver-is-enabled.patch
        Revert-util-jsoncompat-Stub-out-virJSONInitialize-when-co.patch
        Revert-Switch-from-yajl-to-Jansson.patch
        Revert-remote-daemon-Make-sure-that-JSON-symbols-are-prop.patch
        Revert-build-remove-references-to-WITH_YAJL-for-SETUID_RP.patch
        Revert-build-add-with-jansson.patch
        Revert-Remove-functions-using-yajl.patch
        Revert-build-switch-with-qemu-default-from-yes-to-check.patch
        Revert-tests-also-skip-qemuagenttest-with-old-jansson.patch
        Revert-util-avoid-symbol-clash-between-json-libraries.patch
    (Closes: #906116)

 -- Guido Günther <agx@sigxcpu.org>  Tue, 14 Aug 2018 15:09:14 +0200

libvirt (4.6.0-1) unstable; urgency=medium

  * [afd5e39] d/control: Fix typo in libnss-libvirt's short description.
    Thanks to Salvatore Bonaccorso (Closes: #904738)
  * [f2f7871] New upstream version 4.6.0
  * [a81e098] Drop apparmor-Fix-forgotten-comma-at-EOL.patch applied upstream
  * [d53b4b1] Use jansson instead of yajl.  The later is no longer supported
    upstream
  * [bf99d36] Bump symbol versions

 -- Guido Günther <agx@sigxcpu.org>  Mon, 06 Aug 2018 21:54:45 +0200

libvirt (4.5.0-1) unstable; urgency=medium

  * [c2b3afc] New upstream version 4.5.0
  * [50aa257] Drop patch-qemuMonitorTextGetMigrationStatus-to-intercept.patch
    not needed with QEMU since at least stretch.
  * [7698a4e] Build-dep on libwiretap-dev for the wireshark dissector
  * [2390909] examples: adjust to libvirtd code move
  * [64e5530] Bump symbol versions
  * [a89e652] l-d-s: suggest open-iscsi (Closes: #903262)
  * [882c646] Install bash completion (Closes: #902450)
  * [8d79673] apparmor: Fix forgotten comma at EOL
  * [0a9cb25] Install storage-file drivers
  * [84269a2] Warn about uninstalled files

 -- Guido Günther <agx@sigxcpu.org>  Tue, 17 Jul 2018 09:36:26 +0200

libvirt (4.3.0-1) unstable; urgency=medium

  * [8730a15] New upstream version 4.3.0
  * [1272efc] Drop patches due to upstream code removal.
     Allow-xen-toolstack-to-find-it-s-binaries.patch
     debian/fix-Debian-specific-path-to-hvm-loader.patch
  * [20eb594] Bump symbol versions

 -- Guido Günther <agx@sigxcpu.org>  Wed, 16 May 2018 12:09:53 +0200

libvirt (4.2.0-3) unstable; urgency=medium

  * [78872cc] Ship logrotate snippets again (Closes: #895709)

 -- Guido Günther <agx@sigxcpu.org>  Wed, 16 May 2018 07:54:29 +0200

libvirt (4.2.0-2) unstable; urgency=medium

  * [c859ce5] Prefer /sbin over /usr/sbin.
    If libvirt is built in a chroot with merged /usr it will otherwise break
    on non /usr merged systems. (Closes: #895145)

 -- Guido Günther <agx@sigxcpu.org>  Sun, 08 Apr 2018 11:05:14 +0200

libvirt (4.2.0-1) unstable; urgency=medium

  [ Laurent Bigonville ]
  * [8d62a8c] Start admin sockets on installation (Closes: #893484)

  [ Guido Günther ]
  * [417534b] New upstream version 4.2.0 (Closes: #894985)
  * [9d7fa44] Bump symbol versions
  * [c23ed3d] Rediff patches.
    Applied upstream:
      lockd-fix-typo-in-virtlockd-admin.socket.patch
      CVE-2018-1064-qemu-avoid-denial-of-service-reading-from-Q.patch

 -- Guido Günther <agx@sigxcpu.org>  Fri, 06 Apr 2018 12:33:30 +0200

libvirt (4.1.0-2) unstable; urgency=medium

  * [0b6cf2f] lockd: fix typo in virtlockd-admin.socket
    (Closes: #893330)

 -- Guido Günther <agx@sigxcpu.org>  Sun, 18 Mar 2018 10:51:37 +0100

libvirt (4.1.0-1) unstable; urgency=medium

  * [3cbbfa5] New upstream version 4.1.0
  * [0e596b3] Bump symbol versions
  * [e886044] Drop patches applied upstream
    - apparmor-allow-libvirt-to-send-term-signal-to-unconfined.patch
    - virlog-determine-the-hostname-on-startup-CVE-2018-6764.patch
  * [097d74c] CVE-2018-1064: qemu: avoid denial of service reading from QEMU
    guest agent

 -- Guido Günther <agx@sigxcpu.org>  Thu, 15 Mar 2018 08:25:29 +0100

libvirt (4.0.0-2) unstable; urgency=medium

  * [4339f02] CVE-2018-6764: virlog: determine the hostname on startup
    Closes: #889839

 -- Guido Günther <agx@sigxcpu.org>  Thu, 08 Feb 2018 19:29:59 +0100

libvirt (4.0.0-1ubuntu13) cosmic; urgency=medium

  * ddebian/patches/ubuntu/ovmf_paths.patch: adjust paths to secboot.fd UEFI
    Secure Boot enabled variants of the OVMF firmware and variable store for
    the paths where we ship these files in Ubuntu.

 -- Mathieu Trudel-Lapierre <cyphermox@ubuntu.com>  Wed, 27 Jun 2018 11:16:23 -0400

libvirt (4.0.0-1ubuntu12) cosmic; urgency=medium

  * d/p/ubuntu-aa/lp1775777-vfio-usage-without-initial-hostdev.patch: fix
    hotplug use cases where the initial guest had no hostdev at all and
    therefore vrit-aa-helper did not allow /dev/vfio/vfio (LP: #1775777)

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Tue, 12 Jun 2018 16:24:01 +0200

libvirt (4.0.0-1ubuntu11) cosmic; urgency=medium

  * SECURITY UPDATE: QEMU monitor DoS
    - debian/patches/CVE-2018-1064.patch: add size limit to
      src/qemu/qemu_agent.c.
    - CVE-2018-1064
  * SECURITY UPDATE: Speculative Store Bypass
    - debian/patches/CVE-2018-3639-1.patch: define the 'ssbd' CPUID feature
      bit in src/cpu/cpu_map.xml.
    - debian/patches/CVE-2018-3639-2.patch: define the 'virt-ssbd' CPUID
      feature bit in src/cpu/cpu_map.xml.
    - CVE-2018-3639

 -- Marc Deslauriers <marc.deslauriers@ubuntu.com>  Tue, 22 May 2018 10:55:56 -0400

libvirt (4.0.0-1ubuntu10) cosmic; urgency=medium

  * Fix nwfilters that set CTRL_IP_LEARNING set to dhcp failing with "An error
    occurred, but the cause is unknown" due to a buffer being too small
    for pcap with TPACKET_V3 enabled (LP: #1758037)
    - debian/patches/ubuntu/lp-1758037-nwfilter-increase-pcap-buffer-size.patch

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Wed, 09 May 2018 17:07:59 +0200

libvirt (4.0.0-1ubuntu9) cosmic; urgency=medium

  * debian/rules: disable the netcf backend. (LP: #1764314)
  * debian/control: drop libnetcf from Build-Depends.

 -- Mathieu Trudel-Lapierre <cyphermox@ubuntu.com>  Wed, 09 May 2018 10:06:15 -0400

libvirt (4.0.0-1ubuntu8) bionic; urgency=medium

  * Fix clean shut down of guests on system shutdown (LP: #1764668)
    - d/p/ubuntu/lp-1764668-do-not-report-unknown-guests.patch
    - d/p/ubuntu/lp-1764668-fix-check_guests_shutdown-loop.patch

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Tue, 24 Apr 2018 11:09:48 +0200

libvirt (4.0.0-1ubuntu7) bionic; urgency=medium

  * Fix nvdimm memory and passthrough input devices for hotplug via
    domain security callbacks backporting upstream commits (LP: #1755153).
    - d/p/ubuntu-aa/lp1755153-apparmor-add-Set-Restore-InputLabel.patch
    - d/p/ubuntu-aa/lp1755153-apparmor-add-Set-Restore-MemoryLabel.patch
  * Fix nvdimm memory and passthrough input devices in initial guest
    description via virt-aa-helper (LP: #1757085).
    - d/p/ubuntu-aa/lp1757085-virt-aa-helper-nvdimm-memory.patch
    - d/p/ubuntu-aa/lp1757085-virt-aa-helper-passthrough-input.patch

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Wed, 21 Mar 2018 08:30:47 +0100

libvirt (4.0.0-1ubuntu6) bionic; urgency=medium

  * Backport from recent upstream to stabilize libvirt (LP: #1756915)
    - d/p/stable/0033-qemu-Fix-comparison-assignment-in-qemuDomainUpdateDe.patch
    - d/p/stable/0034-qemu-Fix-memory-leak-in-qemuConnectGetAllDomainStats.patch
    - d/p/stable/0035-libvirtd-fix-potential-deadlock-when-reloading.patch
    - d/p/stable/0036-qemu-Use-correct-bus-type-for-input-devices.patch
    - d/p/stable/0037-qemu-hostdev-Fix-the-error-on-VM-start-with-an-mdev-.patch
    - d/p/stable/0038-conf-Fix-crash-in-virDomainDefCompatibleDevice.patch
  * d/p/ubuntu/lp1688508-tools-fix-variable-scope-in-in-check_guests_shutdown:
    avoid issues shutting down more guests than configured for parallel
    shutdown (LP: #1688508)
  * d/p/ubuntu-aa/lp1756394-virt-aa-helper-resolve-file-symlinks.patch: fix
    using devices that are symlinks (LP: #1756394)

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Mon, 19 Mar 2018 14:57:08 +0100

libvirt (4.0.0-1ubuntu5) bionic; urgency=medium

  * run dnsmasq as libvirt-dnsmasq (LP: #1743718)
    - d/libvirt-daemon-system.postinst: add libvirt-dnsmasq user and group
    - d/libvirt-daemon-system.postrm: remove libvirt-dnsmasq user and group on
      purge
    - d/p/ubuntu/dnsmasq-as-priv-user: write dnsmas config with user
      libvirt-dnsmasq and adapt the self tests to expect that config
    - d/libvirt-daemon-system.postinst: fix old libvirt-dnsmasq users
  * Backport from recent upstream to stabilize libvirt (LP: #1754352)
    - d/p/stable/0024-qemu-blockcopy-Add-check-for-bandwidth.patch
    - d/p/stable/0025-conf-move-generated-member-from-virMacAddr-to-virDom.patch
    - d/p/stable/0026-lxc-Drop-useless-check-in-live-device-update.patch
    - d/p/stable/0027-Pass-oldDev-to-virDomainDefCompatibleDevice-on-devic.patch
    - d/p/stable/0028-qemu-Fix-updating-device-with-boot-order.patch
    - d/p/stable/0030-daemon-fix-rpc-event-leak-on-error-path-in-remoteDis.patch
    - d/p/stable/0029-lxc-fix-rpc-event-leak-on-error-path-in-virLXCContro.patch
    - d/p/stable/0031-qemu-fix-memory-leak-of-vporttype-during-migration.patch
    - d/p/stable/0032-virsh-fixing-segfault-by-pool-autocompleter-function.patch
  * d/p/ubuntu-aa/0041-apparmor-add-ro-rule-for-sasl-GSSAPI-
    plugin-on-etc-g.patch fix issues if sasl is configured (LP: #1696471)
  * d/p/ubuntu-aa/0042-virt-aa-helper-resolve-yet-to-be-created-paths.patch
    ensure symlinks are resolved to get valid rules if interim parts of a path
    are a symlink (LP: #1752361)

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Tue, 27 Feb 2018 12:04:02 +0100

libvirt (4.0.0-1ubuntu4) bionic; urgency=medium

  * d/p/ubuntu/lp1688508-tools-avoid-text-spilling-into-variables.patch:
    avoid hanging on shutdown (LP: #1688508)

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Fri, 23 Feb 2018 16:43:19 +0100

libvirt (4.0.0-1ubuntu3) bionic; urgency=medium

  [ Christian Ehrhardt ]
  * Backport of 23 bug fixes from recent upstream to stabilize libvirt on 18.04
    - d/p/stable/0001-Revert-qemu-monitor-do-not-report-error-on-shutdown.patch
    - d/p/stable/0002-nodedev-Fix-failing-to-parse-PCI-address-for-non-PCI.patch
    - d/p/stable/0003-qemu-assign-correct-type-of-PCI-address-for-vhost-sc.patch
    - d/p/stable/0004-qemu-Refresh-caps-cache-after-booting-a-different-ke.patch
    - d/p/stable/0005-qemu-auto-add-generic-xhci-rather-than-NEC-xhci-to-Q.patch
    - d/p/stable/0006-libvirtd-Explicit-dependency-on-systemd-machined.patch
    - d/p/stable/0007-rpc-fix-race-sending-and-encoding-sasl-data.patch
    - d/p/stable/0008-vhost-user-add-support-reconnect-for-vhost-user-port.patch
    - d/p/stable/0009-qemu-Fix-memory-leak-in-processGuestPanicEvent.patch
    - d/p/stable/0010-storage-util-Properly-ignore-errors-when-backing-vol.patch
    - d/p/stable/0011-conf-Use-correct-attribute-name-in-error-message.patch
    - d/p/stable/0012-util-json-Add-helper-to-return-string-or-number-prop.patch
    - d/p/stable/0013-util-storage-Parse-lun-for-iSCSI-protocol-from-JSON-.patch
    - d/p/stable/0014-virsh-Offer-only-persistent-domains-for-autostart.patch
    - d/p/stable/0015-blockjob-Fix-a-error-checking-of-blockjob-status-in-.patch
    - d/p/stable/0016-qemu-Expose-rx-tx_queue_size-in-qemu.conf-too.patch
    - d/p/stable/0017-qemu-migration-Refresh-device-information-after-tran.patch
    - d/p/stable/0018-qemuDomainRemoveMemoryDevice-unlink-memory-backing-f.patch
    - d/p/stable/0019-vbox-fix-SEGV-during-dumpxml-of-a-serial-port.patch
    - d/p/stable/0020-qemu-Initialize-priv-in-qemuDomainCoreDumpWithFormat.patch
    - d/p/stable/0021-fix-regex-to-check-CN-from-server-certificate.patch
    - d/p/stable/0022-storage-Fix-formatting-and-parsing-of-qemu-type-Unix.patch
    - d/p/stable/0023-util-storage-Remove-detected-authentication-data-for.patch
  * d/rules: enable build time self tests on all architectures

  [ Marc Deslauriers ]
  * SECURITY UPDATE: code injection via libnss_dns.so
    - debian/patches/CVE-2018-6764-1.patch: determine the hostname on
      startup in src/util/virlog.c.
    - debian/patches/CVE-2018-6764-2.patch: fix syntax-check in
      src/util/virlog.c.
    - debian/patches/CVE-2018-6764-3.patch: fix deadlock obtaining hostname
      in cfg.mk, src/util/virlog.c.
    - CVE-2018-6764

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Mon, 19 Feb 2018 14:18:44 +0100

libvirt (4.0.0-1ubuntu2) bionic; urgency=medium

  * d/p/ubuntu-aa/0025-apparmor-fix-newer-virt-manager-1.4.0.patch: refreshed
    as libvirt 4.0 needs a reversed rule for openGraphicsFD (LP: #1747442)
    - refreshed 0032 and 0040 to match the new context.
  * d/p/ubuntu/virt-aa-helper-Set-the-supported-features.patch: allow parsing
    of memory slots and other extended features without breaking
    virt-aa-helper (LP: #1746431).

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Fri, 02 Feb 2018 07:31:17 +0100

libvirt (4.0.0-1ubuntu1) bionic; urgency=medium

  * Merged with Debian unstable (4.0)
    This closes several bugs:
    - Error generating apparmor profile when hostname contains spaces
      (LP: #799997)
    - qemu 2.10 locks files, libvirt shared now sets share-rw=on (LP: #1716028)
    - libvirt usb passthrough throws apparmor denials related to
      /run/udev/data/+usb (LP: #1727311)
    - AppArmor denies access to /sys/block/*/queue/max_segments (LP: #1729626)
    - iohelper improvements to let bypass-cache work without opening up the
      apparmor isolation (LP: #1719579)
    - nodeinfo on s390x to contain more CPU info (LP: #1733688)
    - Upgrade libvirt >= 4.0 (LP: #1745934)
  * Remaining changes:
    - Disable libssh2 support (universe dependency)
    - Disable firewalld support (universe dependency)
    - Disable selinux
    - Set qemu-group to kvm (for compat with older ubuntu)
    - Additional apport package-hook
    - Modifications to adapt for our delayed switch away from libvirt-bin (can
      be dropped >18.04).
      + d/p/ubuntu/libvirtd-service-add-bin-alias.patch: systemd: define alias
        to old service name so that old references work
      + d/p/ubuntu/libvirtd-init-add-bin-alias.patch: sysv init: define alias
        to old service name so that old references work
      + d/control: transitional package with the old name and maintainer
        scripts to handle the transition
    - Backwards compatible handling of group rename (can be dropped >18.04).
    - config details and autostart of default bridged network. Creating that is
      now the default in general, yet our solution provides the following on
      top as of today:
      + autostart the default network by default
      + do not autostart if subnet is already taken (e.g. in guests).
    - d/p/ubuntu/Allow-libvirt-group-to-access-the-socket.patch: This is
      the group based access to libvirt functions as it was used in Ubuntu
      for quite long.
      + d/p/ubuntu/daemon-augeas-fix-expected.patch fix some related tests
        due to the group access change.
    - ubuntu/parallel-shutdown.patch: set parallel shutdown by default.
    - d/p/ubuntu/enable-kvm-spice.patch: compat with older Ubuntu qemu/kvm
      which provided a separate kvm-spice.
    - d/p/ubuntu/ubuntu-libxl-qemu-path.patch: this change was split. The
      section that adapts the path of the emulator to the Debian/Ubuntu
      packaging is kept.
    - d/p/ubuntu/ubuntu-libxl-Fix-up-VRAM-to-minimum-requirements.patch: auto
      set VRAM to minimum requirements
    - d/p/ubuntu/xen-default-uri.patch: set default URI on xen hosts
    - Add libxl log directory
    - libvirt-uri.sh: Automatically switch default libvirt URI for users on
      Xen dom0 via user profile (was missing on changelogs before)
    - d/p/ubuntu/apibuild-skip-libvirt-common.h: drop libvirt-common.h from
      included_files to avoid build failures due to duplicate definitions.
    - Update README.Debian with Ubuntu changes
    - Convert libvirt0, libnss_libvirt and libvirt-dev to multi-arch.
    - Enable some additional features on ppc64el and s390x (for arch parity)
      + systemtap, zfs, numa and numad on s390x.
      + systemtap on ppc64el.
    - fix conffile upgrade handling to avoid obsolete files
      and inactive duplicates (LP 1694159)
    - d/t/control, d/t/smoke-qemu-session: fixup smoke-qemu-session by making
      vmlinuz available and accessible (Debian bug 848314)
    - d/test/smoke-lxc workaround for debbug 848317/867379
    - d/t/control, d/t/smoke-lxc: fix up lxc smoke test (Debian bug 848317)
    - Add dnsmasq configuration to work with system wide dnsmasq (drop >18.04,
      no more UCA onto Xenial then which has global dnsmasq by default).
    - d/p/ubuntu/ubuntu_machine_type.patch: accept ubuntu types as pci440fx
    - conffile handling of files dropped in 3.5 (can be dropped >18.04)
      + /etc/init.d/virtlockd was sysv init only
      + /etc/apparmor.d/local/usr.sbin.libvirtd and
        /etc/apparmor.d/local/usr.lib.libvirt.virt-aa-helper are now generated
        by dh_apparmor as needed
    - Reworked apparmor Delta, especially the more complex delta is dropped
      now, also our former delta is now split into logical pieces, has
      improved comments and is part of a continuous upstreaming effort.
      Listing related remaining changes:
      + d/p/0001-apparmor-Allow-pygrub-to-run-on-Debian-Ubuntu.patch: apparmor:
        Allow pygrub to run on Debian/Ubuntu
      + d/p/0003-apparmor-libvirt-qemu-Allow-read-access-to-overcommi.patch:
        apparmor, libvirt-qemu: Allow read access to overcommit_memory
      + d/p/0007-apparmor-libvirt-qemu-Allow-owner-read-access-to-PRO.patch:
        apparmor, libvirt-qemu: Allow owner read access to @{PROC}/*/auxv
      + d/p/0017-apparmor-virt-aa-helper-Allow-access-to-tmp-director.patch:
        apparmor, virt-aa-helper: Allow access to tmp directories
      + d/p/ubuntu-aa/0020-virt-aa-helper-ubuntu-storage-paths.patch:
        apparmor, virt-aa-helper: Allow various storage pools and image
        locations
      + d/p/0021-apparmor-virt-aa-helper-Add-openvswitch-support.patch:
        apparmor, virt-aa-helper: Add openvswitch support
      + d/p/0025-apparmor-fix-newer-virt-manager-1.4.0.patch: Add Apparmor
        permissions so virt-manager 1.4.0 viewing works (LP 1668681).
      + d/p/0029-appmor-libvirt-qemu-Add-9p-support.patch: appmor,
        libvirt-qemu: Add 9p support
      + d/p/0030-virt-aa-helper-Complete-9p-support.patch: virt-aa-helper:
        add l to 9p file options.
      + d/p/0031-virt-aa-helper-Ask-for-no-deny-rule-for-readonly-dis.patch:
        virt-aa-helper: Ask for no deny rule for readonly disk (renamed and
        reworded, was virt-aa-helper-no-explicity-deny-for-basefiles.patch)
      + d/p/0032-apparmor-libvirt-qemu-Allow-reading-charm-specific-c.patch:
        apparmor, libvirt-qemu: Allow reading charm-specific ceph config
      + d/p/0033-UBUNTU-only-apparmor-for-kvm.powerpc-LP-1680384.patch: allow
        commands executed by ubuntu only kvm wrapper on ppc64el (LP 1686621).
      + d/p/0034-apparmor-virt-aa-helper-access-for-snapped-nova.patch:
        apparmor, virt-aa-helper: access for snapped nova
  * Dropped Changes (Upstream):
    - d/p/0005-apparmor-libvirt-qemu-Allow-use-of-sgabios.patch: apparmor,
      libvirt-qemu: Allow use of sgabios
    - d/p/0006-apparmor-libvirt-qemu-Silence-lttng-related-deny-mes.patch:
      apparmor, libvirt-qemu: Silence lttng related deny messages
    - d/p/0008-apparmor-libvirt-qemu-Allow-read-access-to-sysfs-sys.patch:
      apparmor, libvirt-qemu: Allow read access to sysfs system info
    - d/p/0009-apparmor-libvirt-qemu-Allow-read-access-to-max_mem_r.patch:
      apparmor, libvirt-qemu: Allow read access to max_mem_regions
    - d/p/0010-apparmor-libvirt-qemu-Allow-qemu-block-extra-librari.patch:
      apparmor, libvirt-qemu: Allow qemu-block-extra libraries
    - d/p/0012-apparmor-libvirtd-Allow-access-to-netlink-sockets.patch:
      apparmor, libvirtd: Allow access to netlink sockets
    - d/p/0013-apparmor-Add-rules-for-mediation-support.patch:
      apparmor: Add rules for mediation support
    - d/p/0015-apparmor-virt-aa-helper-Allow-access-to-ecryptfs-fil.patch:
      apparmor, virt-aa-helper: Allow access to ecryptfs files
    - d/p/0016-apparmor-libvirtd-Allow-ixr-to-var-lib-libvirt-virtd.patch:
      apparmor, libvirtd: Allow ixr to /var/lib/libvirt/virtd*
    - d/p/0018-apparmor-virt-aa-helper-Add-ipv6-network-policy.patch:
      apparmor, virt-aa-helper: Add ipv6 network policy
    - d/p/0019-apparmor-virt-aa-helper-Allow-access-to-sys-bus-usb-.patch:
      apparmor, virt-aa-helper: Allow access to /sys/bus/usb/devices
    - d/p/0023-apparmor-qemu-won-t-call-qemu-nbd.patch: apparmor: qemu
      won't call qemu-nbd
    - d/p/0027-apparmor-allow-reading-cmdline-of-shutdown-signal.patch:
      apparmor: allow to parse cmdline of the pid that send the shutdown
      signal (LP 1680384).
    - d/p/0028-apparmor-add-default-pki-path-of-lbvirt-spice.patch:
      apparmor: add default pki path of lbvirt-spice (LP 1690140)
    - d/p/ubuntu-aa/0035-virt-aa-helper-locking-disk-files-for-qemu-2.10.patch:
      for compatibility with the behavior of qemu 2.10 this adds locking
      permission to rules generated for disk files (LP 1709818)
    - d/p/ubuntu-aa/0036-virt-aa-helper-locking-loader-nvram-for-qemu-2.10.patch:
      for compatibility with the behavior of qemu 2.10 this adds locking
      permission to rules generated for loader/nvram (LP 1710960)
    - d/p/ubuntu-aa/0037-virt-aa-helper...: grant locking permission on append
      files (LP 1726804)
    - d/p/ubuntu-aa/0038-virt-aa-helper-fix-paths-for-usb-hostdevs.patch:
      fix path generation for USB host devices (LP 1552241)
    - d/p/ubuntu-aa/0039-virt-aa-helper-fix-libusb-access-to-udev-usb-data.patch:
      generate valid rules on usb passthrough (LP 1686324)
    - d/p/avoid-double-locking.patch: fix a deadlock that could occur when
      libvirtd interactions raced with dbus causing a deadlock (LP 1714254).
    - d/p/u/gnulib-getopt-posix-Fix-build-failure-when-using-ac_cv_head.patch:
      fix FTBFS with glibc 2.26 (LP 1718668)
    - Extended handling of apparmor profiles - clear lost profiles via cron
      (now cleared by virt-aa-helper on domain stop)
    - nat only on some ports <port start='1024' end='65535'/> (upstream
      default now if nothing is specified, actually dropped last cycle)
  * Dropped Changes (In Debian or no more important):
    - d/p/0002-apparmor-libvirt-qemu-Allow-macvtap-access.patch: apparmor,
      libvirt-qemu: Allow macvtap access
    - d/p/0004-apparmor-Explicit-deny-for-setpcap.patch: apparmor: Explicit
      deny for setpcap (LP 522845).
    - d/p/0014-apparmor-virt-aa-helper-Improve-comment-about-backin.patch:
      apparmor, virt-aa-helper: Improve comment about backing store
    - d/p/0022-apparmor-drop-references-to-qemu-kvm.patch: apparmor: drop
      references to qemu-kvm
    - d/p/0024-apparmor-virt-aa-helper-Allow-access-to-name-service.patch:
      apparmor, virt-aa-helper: Allow access to name services
    - d/p/0026-apparmor-add-generic-base-vfio-device.patch: apparmor: add
      /dev/vfio for vf (hot) attach (LP 1680384) (added by virt-aa-helper per
      guest if needed).
    - d/p/0011-apparmor-libvirt-qemu-Allow-access-to-hugepage-mount.patch:
      apparmor, libvirt-qemu: Allow access to hugepage mounts
    - Disable sheepdog (was for universe dependency, but is now only a suggest)
    - d/p/ubuntu/storage-disable-gluster-test: gluster not enabled, skip test
  * Dropped Changes (In Debian/Upstream now based on interim 3.10 work) some of
    these were never released, but important to mention for the bug references:
    - libnss-libvirt once enabled causes apt to call getdents
      avoid this being an issue by dropping a apt conf that allows
      this in seccomp (LP: #1732030).
    - d/libvirt-daemon-system.postrm: clean up more libvirt directories on
      purge
    - d/p/ubuntu-aa/0041-apparmor-allow-unix-stream-for-p2p-migrations.patch:
      apparmor: allow unix stream for p2p migrations
    - d/p/ubuntu-aa/0043-security-apparmor-implement-domainSetPathLabel.patch:
      this replaces the hugepage rules and fixes many more formerly missing
    - d/p/ubuntu-aa/0044-security-full-path-option-for-DomainSetPathLabel.patch:
      allowing to have path wildcards on labels set by domain callbacks
    - d/p/ubuntu-aa/0045-security-apparmor-add-Set-Restore-ChardevLabel.patch:
      apparmor implementation of security callback
    - d/p/ubuntu-aa/0046-apparmor-virt-aa-helper-drop-static-channel-rule.patch:
      this is now covered by chardev label callbacks
  * Added Changes:
    - Revert Debian change "Drop libvirt-bin upgrade handling"
      This is needed in Ubuntu one last time (drop >18.04)
    - Revert Debian change "Drop maintscript helpers for versions predating
      jessie and wheezy-backports". This is needed in Ubuntu one last
      time (drop >18.04)
    - Refreshed d/p/* to match new version (only fuzz, no semantic change)
    - d/libvirt-daemon-system.postrm: change order of libvirt-qemu removal
      to avoid error messages on purge
    - remove no more used libvirt-dnsmasq user (drop >18.04)
    - d/p/ubuntu-aa/0040-apparmor-add-mediation-rules-for-unconfined.patch:
      apparmor: add mediation rules for unconfined guests
    - d/p/ubuntu-aa/0042-security-introduce-virSecurityManager-Set-Restore-Ch
      .patch: backport upstream cahnge to expose already used chardev calls.
    - d/libvirt-daemon-system.postrm: Remove the default.xml network link
      set up by postinst.
    - d/libvirt-daemon-system.maintscript: remove the now dropped conffile
      /etc/cron.daily/libvirt-daemon-system
    - d/libvirt-daemon-system.postinst: fixups for autostart default network
      - use modern shell syntax
      - try more default networks before giving up to enable by default
    - d/p/ubuntu-aa/0020-virt-aa-helper-ubuntu-storage-paths.patch:
      add multipass image path and mark as ubuntu only change.
    - d/rules: install virtlockd correctly with defaults file (LP: #1729516)
    - extended d/p/0025-apparmor-fix-newer-virt-manager-1.4.0.patch to cover
      the slightly changed behavior of libvirt 4.0 (LP: #1741617)
    - d/control: make libvirt-daemon-driver-storage-rbd a recommend instead of
      just a suggest to have 3rd party relying on rbd out of the box working.
      This is deprecated and users of rbd backend should start depending on
      this package for it will be dropped to a suggest in future releases.

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Thu, 14 Dec 2017 14:15:55 +0100

libvirt (4.0.0-1) unstable; urgency=medium

  * [5936904] New upstream version 4.0.0
  * [bcb7ca3] Drop patches applied upstream.
      Allow-libvirt-to-kill-unconfined-domains.patch
      Drop qemu-avoid-denial-of-service-reading-from-QEMU-monitor-CV.patch

 -- Guido Günther <agx@sigxcpu.org>  Sat, 20 Jan 2018 16:31:11 +0100

libvirt (4.0.0~rc2-1) experimental; urgency=medium

  * [8dd2f5b] Don't manage /etc/apparmor.d/local as conf files
    (Closes: #887612)
  * [0819e5a] apparmor: allow libvirt to send term signal to unconfined
  * [b1ecc1a] New upstream version 4.0.0~rc2
  * [7406ae5] CVE-2018-5748: qemu: avoid denial of service reading from QEMU
    monitor (Closes: #887700)
  * [564e232] Bump symbol versions
  * [0a274c0] d/control: use priority optional instead of extra

 -- Guido Günther <agx@sigxcpu.org>  Fri, 19 Jan 2018 12:54:54 +0100

libvirt (4.0.0~rc1-1) experimental; urgency=medium

  [ Guido Günther ]
  * [a225d2b] New upstream version 4.0.0~rc1
    (Closes: #881293, #846534)
  * [2270343] Rediff patches

  [ intrigeri ]
  * [89b8ab4] Allow libvirt to kill unconfined domains

  [ Christian Ehrhardt ]
  * [b2ce106] Clear more directories on purge
    (Closes: #884828)
  * [0cd10ab] Avoid apt seccomp issues due to libnss-libvirt
    (LP: #1732030)

 -- Guido Günther <agx@sigxcpu.org>  Mon, 15 Jan 2018 09:44:37 +0100

libvirt (3.10.0-1) unstable; urgency=medium

  * [0d103b6] Bump standards version
  * [3eca017] Add russian debconf translation.
    Thanks to Lev Lamberov (Closes: #883109)
  * [04da2ca] New upstream version 3.10.0
  * [f311e52] Drop
    AppArmor-add-rules-needed-with-additional-mediation-featu.patch - fixed
    upstream
  * [0c7f363] Bump symbol versions
  * [cbe1699] Use recent debhelper instead of dh-systemd
  * [c757791] apparmor: Allow virt-aa-helper to access the name service switch.
    Thanks to Martin Pitt (Closes: #882979)

 -- Guido Günther <agx@sigxcpu.org>  Tue, 05 Dec 2017 14:55:51 +0100

libvirt (3.9.0-1) unstable; urgency=medium

  * [eef697c] New upstream version 3.9.0

 -- Guido Günther <agx@sigxcpu.org>  Sun, 05 Nov 2017 14:49:43 +0100

libvirt (3.9.0~rc1-1) experimental; urgency=medium

  * Upload to experimental
  * [23e28a0] New upstream version 3.9.0~rc1
  * [b19f9f8] Bump symbol versions
  * [83a3ff3] Drop patches applied upstream
    apparmor-add-dnsmasq-ptrace-rule-to-libvirtd-profile.patch
    virt-host-validate-require-fuse-for-LXC-if-compiled-in.patch
    qemu-ensure-TLS-clients-always-verify-the-server-certific.patch
  * [e834771] AppArmor: add rules needed with additional mediation features
    brought by Linux 4.14. Thanks: intrigeri
    (Closes: #879772)

 -- Guido Günther <agx@sigxcpu.org>  Tue, 31 Oct 2017 12:13:29 +0100

libvirt (3.8.0-3) unstable; urgency=medium

  * [e0e0a42] virt-host-validate: require fuse for LXC if compiled in.
    This should make us skip the lxc test properly on debci.
  * [d16ae50] Drop libvirt-bin upgrade handling
    libvirt-bin was dropped before Jessie
  * [3f18a26] CVE-2017-1000256: qemu: ensure TLS clients always verify the
    server certificate (Closes: #878799)

 -- Guido Günther <agx@sigxcpu.org>  Mon, 16 Oct 2017 19:36:25 +0200

libvirt (3.8.0-2) unstable; urgency=medium

  * Upload to unstable
    Closes: #878153
  * [646a20f] apparmor: add dnsmasq ptrace rule to libvirtd profile

 -- Guido Günther <agx@sigxcpu.org>  Thu, 12 Oct 2017 10:27:25 +0200

libvirt (3.8.0-1) experimental; urgency=medium

  * [842dee5] Add id-length to gbp.conf
  * [6cf2527] New upstream version 3.8.0

 -- Guido Günther <agx@sigxcpu.org>  Thu, 05 Oct 2017 18:30:55 +0200

libvirt (3.8.0~rc1-1) experimental; urgency=medium

  * apparmor: add attach_disconnected
  * apparmor: cater for new AAVMF image location
  * Don't ship apparmor profiles in the doc package too.
    This is just confusing since things are installed in
    libvirt-daemon-system.
  * Drpo maintscript helpers for versions predating jessie and wheezy-backports
  * New upstream version 3.8.0~rc1
  * New upstream version 3.8.0~rc1
  * Rediff patches
    apparmor-cater-for-new-AAVMF-image-location.patch
    apparmor-delete-profile-on-VM-shutdown.patch
    apparmor-add-attach_disconnected.patch
  * Bump symbol versions

 -- Guido Günther <agx@sigxcpu.org>  Fri, 29 Sep 2017 12:53:25 +0200

libvirt (3.7.0-4) unstable; urgency=medium

  * Pass-GPG_TTY-env-var-to-the-ssh-binary.patch: sanitize commit message
  * apparmor: add attach_disconnected (Closes: #876071)
  * apparmor: cater for new AAVMF image location
  * apparmor: delete profile on VM shutdown

 -- Guido Günther <agx@sigxcpu.org>  Mon, 18 Sep 2017 20:24:07 +0200

libvirt (3.7.0-3) unstable; urgency=medium

  * Move glusterfs, rbd, sheepdog and zfs storage drivers into separate
    packages.  This reduces the dependencies pulled into default
    installations.
    (Closes: #875834)

 -- Guido Günther <agx@sigxcpu.org>  Fri, 15 Sep 2017 14:09:31 +0200

libvirt (3.7.0-2) unstable; urgency=medium

  * Update copyright file

 -- Guido Günther <agx@sigxcpu.org>  Thu, 14 Sep 2017 12:16:47 +0200

libvirt (3.7.0-1) unstable; urgency=medium

  * New upstream version 3.7.0 (Closes: #874323)
  * Rediff patches
  * Bump symbol versions
  * Also pass $TERM to ssh so pinentry works
    Thanks to Guilhem Moulin (Closes: #843863)
  * Enable Gluster support (Closes: #755545)
  * Enable wireshark dissector (Closes: #862989)

 -- Guido Günther <agx@sigxcpu.org>  Fri, 08 Sep 2017 14:52:38 +0200

libvirt (3.6.0-1ubuntu6) artful; urgency=medium

  * d/p/ubuntu-aa/0037-virt-aa-helper...: grant locking permission on append
    files (LP: #1726804)
  * d/p/ubuntu-aa/0038-virt-aa-helper-fix-paths-for-usb-hostdevs.patch:
    fix path generation for USB host devices (LP: #1552241)
  * d/p/ubuntu-aa/0039-virt-aa-helper-fix-libusb-access-to-udev-usb-data.patch:
    generate valid rules on usb passthrough (LP: #1686324)

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Tue, 24 Oct 2017 14:30:34 +0200

libvirt (3.6.0-1ubuntu5) artful; urgency=medium

  * d/p/u/gnulib-getopt-posix-Fix-build-failure-when-using-ac_cv_head.patch:
    fix FTBFS with glibc 2.26 (LP: #1718668)

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Thu, 28 Sep 2017 08:18:10 -0400

libvirt (3.6.0-1ubuntu4) artful; urgency=medium

  * d/p/avoid-double-locking.patch: fix a deadlock that could occur when
    libvirtd interactions raced with dbus causing a deadlock (LP: #1714254).

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Fri, 01 Sep 2017 10:29:35 +0200

libvirt (3.6.0-1ubuntu3) artful; urgency=medium

  * No change rebuild for Qemu 2.10 and Xen 4.9

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Mon, 21 Aug 2017 10:34:13 +0200

libvirt (3.6.0-1ubuntu2) artful; urgency=medium

  * d/p/ubuntu-aa/0036-virt-aa-helper-locking-loader-nvram-for-qemu-2.10.patch:
    for compatibility with the behavior of qemu 2.10 this adds locking
    permission to rules generated for loader/nvram (LP: #1710960)

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Thu, 17 Aug 2017 10:00:19 +0200

libvirt (3.6.0-1ubuntu1) artful; urgency=medium

  * Merged with Debian unstable (3.6)
    This closes several bugs:
    - aarch64: improved chardev handling (LP: #1697610)
    - Forbid locking memory without memtune (LP: #1708305)
  * Remaining changes:
    - Disable sheepdog (universe dependency)
    - Disable libssh2 support (universe dependency)
    - Disable firewalld support (universe dependency)
    - Disable selinux
    - Set qemu-group to kvm (for compat with older ubuntu)
    - Regularly clear AppArmor profiles for vms that no longer exist
    - Additional apport package-hook
    - Modifications to adapt for our delayed switch away from libvirt-bin (can
      be dropped >18.04).
      + d/p/ubuntu/libvirtd-service-add-bin-alias.patch: systemd: define alias
        to old service name so that old references work
      + d/p/ubuntu/libvirtd-init-add-bin-alias.patch: sysv init: define alias
        to old service name so that old references work
      + d/control: transitional package with the old name and maintainer
        scripts to handle the transition
    - Backwards compatible handling of group rename (can be dropped >18.04).
    - config details and autostart of default bridged network. Creating that is
      now the default in general, yet our solution provides the following on
      top as of today:
      + nat only on some ports <port start='1024' end='65535'/>
      + autostart the default network by default
      + do not autostart if 192.168.122.0 is already taken (e.g. in containers)
    - d/p/ubuntu/Allow-libvirt-group-to-access-the-socket.patch: This is
      the group based access to libvirt functions as it was used in Ubuntu
      for quite long.
      + d/p/ubuntu/daemon-augeas-fix-expected.patch fix some related tests
        due to the group access change.
    - ubuntu/parallel-shutdown.patch: set parallel shutdown by default.
    - d/p/ubuntu/enable-kvm-spice.patch: compat with older Ubuntu qemu/kvm
      which provided a separate kvm-spice.
    - d/p/ubuntu/storage-disable-gluster-test: gluster not enabled, skip test
    - d/p/ubuntu/ubuntu-libxl-qemu-path.patch: this change was split. The
      section that adapts the path of the emulator to the Debian/Ubuntu
      packaging is kept.
    - d/p/ubuntu/ubuntu-libxl-Fix-up-VRAM-to-minimum-requirements.patch: auto
      set VRAM to minimum requirements
    - d/p/ubuntu/xen-default-uri.patch: set default URI on xen hosts
    - Add libxl log directory
    - libvirt-uri.sh: Automatically switch default libvirt URI for users on
      Xen dom0 via user profile (was missing on changelogs before)
    - d/p/ubuntu/apibuild-skip-libvirt-common.h: drop libvirt-common.h from
      included_files to avoid build failures due to duplicate definitions.
    - Update README.Debian with Ubuntu changes
    - Convert libvirt0, libnss_libvirt and libvirt-dev to multi-arch.
    - Enable some additional features on ppc64el and s390x (for arch parity)
      + systemtap, zfs, numa and numad on s390x.
      + systemtap on ppc64el.
    - fix conffile upgrade handling to avoid obsolete files
      and inactive duplicates (LP 1694159)
    - d/t/control, d/t/smoke-qemu-session: fixup smoke-qemu-session by making
      vmlinuz available and accessible (Debian bug 848314)
    - d/test/smoke-lxc workaround for debbug 848317/867379
    - d/t/control, d/t/smoke-lxc: fix up lxc smoke test (Debian bug 848317)
    - Extended handling of apparmor profiles - clear lost profiles via cron
    - Add dnsmasq configuration to work with system wide dnsmasq (drop >18.04,
      no more UCA onto Xenial then which has global dnsmasq by default).
    - d/p/ubuntu/ubuntu_machine_type.patch: accept ubuntu types as pci440fx
    - conffile handling of files dropped in 3.5 (can be dropped >18.04)
      + /etc/init.d/virtlockd was sysv init only
      + /etc/apparmor.d/local/usr.sbin.libvirtd and
        /etc/apparmor.d/local/usr.lib.libvirt.virt-aa-helper are now generated
        by dh_apparmor as needed
    - Reworked apparmor Delta, especially the more complex delta is dropped
      now, also our former delta is now split into logical pieces, has
      improved comments and is part of a continuous upstreaming effort.
      Listing related remaining changes:
      + d/p/0001-apparmor-Allow-pygrub-to-run-on-Debian-Ubuntu.patch: apparmor:
        Allow pygrub to run on Debian/Ubuntu
      + d/p/0002-apparmor-libvirt-qemu-Allow-macvtap-access.patch: apparmor,
        libvirt-qemu: Allow macvtap access
      + d/p/0003-apparmor-libvirt-qemu-Allow-read-access-to-overcommi.patch:
        apparmor, libvirt-qemu: Allow read access to overcommit_memory
      + d/p/0004-apparmor-Explicit-deny-for-setpcap.patch: apparmor: Explicit
        deny for setpcap
      + d/p/0005-apparmor-libvirt-qemu-Allow-use-of-sgabios.patch: apparmor,
        libvirt-qemu: Allow use of sgabios
      + d/p/0006-apparmor-libvirt-qemu-Silence-lttng-related-deny-mes.patch:
        apparmor, libvirt-qemu: Silence lttng related deny messages
      + d/p/0007-apparmor-libvirt-qemu-Allow-owner-read-access-to-PRO.patch:
        apparmor, libvirt-qemu: Allow owner read access to @{PROC}/*/auxv
      + d/p/0008-apparmor-libvirt-qemu-Allow-read-access-to-sysfs-sys.patch:
        apparmor, libvirt-qemu: Allow read access to sysfs system info
      + d/p/0009-apparmor-libvirt-qemu-Allow-read-access-to-max_mem_r.patch:
        apparmor, libvirt-qemu: Allow read access to max_mem_regions
      + d/p/0010-apparmor-libvirt-qemu-Allow-qemu-block-extra-librari.patch:
        apparmor, libvirt-qemu: Allow qemu-block-extra libraries
      + d/p/0011-apparmor-libvirt-qemu-Allow-access-to-hugepage-mount.patch:
        apparmor, libvirt-qemu: Allow access to hugepage mounts
      + d/p/0012-apparmor-libvirtd-Allow-access-to-netlink-sockets.patch:
        apparmor, libvirtd: Allow access to netlink sockets
      + d/p/0013-apparmor-Add-rules-for-mediation-support.patch:
        apparmor: Add rules for mediation support
      + d/p/0014-apparmor-virt-aa-helper-Improve-comment-about-backin.patch:
        apparmor, virt-aa-helper: Improve comment about backing store
      + d/p/0015-apparmor-virt-aa-helper-Allow-access-to-ecryptfs-fil.patch:
        apparmor, virt-aa-helper: Allow access to ecryptfs files
      + d/p/0016-apparmor-libvirtd-Allow-ixr-to-var-lib-libvirt-virtd.patch:
        apparmor, libvirtd: Allow ixr to /var/lib/libvirt/virtd*
      + d/p/0017-apparmor-virt-aa-helper-Allow-access-to-tmp-director.patch:
        apparmor, virt-aa-helper: Allow access to tmp directories
      + d/p/0018-apparmor-virt-aa-helper-Add-ipv6-network-policy.patch:
        apparmor, virt-aa-helper: Add ipv6 network policy
      + d/p/0019-apparmor-virt-aa-helper-Allow-access-to-sys-bus-usb-.patch:
        apparmor, virt-aa-helper: Allow access to /sys/bus/usb/devices
      + d/p/0020-apparmor-virt-aa-helper-Allow-various-storage-pools-.patch:
        apparmor, virt-aa-helper: Allow various storage pools and image
        locations
      + d/p/0021-apparmor-virt-aa-helper-Add-openvswitch-support.patch:
        apparmor, virt-aa-helper: Add openvswitch support
      + d/p/0022-apparmor-drop-references-to-qemu-kvm.patch: apparmor: drop
        references to qemu-kvm
      + d/p/0023-apparmor-qemu-won-t-call-qemu-nbd.patch: apparmor: qemu
        won't call qemu-nbd
      + d/p/0024-apparmor-virt-aa-helper-Allow-access-to-name-service.patch:
        apparmor, virt-aa-helper: Allow access to name services
      + d/p/0025-apparmor-fix-newer-virt-manager-1.4.0.patch: Add Apparmor
        permissions so virt-manager 1.4.0 viewing works (LP 1668681).
      + d/p/0026-apparmor-add-generic-base-vfio-device.patch: apparmor: add
        /dev/vfio for vf (hot) attach (LP 1680384).
      + d/p/0027-apparmor-allow-reading-cmdline-of-shutdown-signal.patch:
        apparmor: allow to parse cmdline of the pid that send the shutdown
        signal (LP 1680384).
      + d/p/0028-apparmor-add-default-pki-path-of-lbvirt-spice.patch:
        apparmor: add default pki path of lbvirt-spice (LP 1690140)
      + d/p/0029-appmor-libvirt-qemu-Add-9p-support.patch: appmor,
        libvirt-qemu: Add 9p support
      + d/p/0030-virt-aa-helper-Complete-9p-support.patch: virt-aa-helper:
        add l to 9p file options.
      + d/p/0031-virt-aa-helper-Ask-for-no-deny-rule-for-readonly-dis.patch:
        virt-aa-helper: Ask for no deny rule for readonly disk (renamed and
        reworded, was virt-aa-helper-no-explicity-deny-for-basefiles.patch)
      + d/p/0032-apparmor-libvirt-qemu-Allow-reading-charm-specific-c.patch:
        apparmor, libvirt-qemu: Allow reading charm-specific ceph config
      + d/p/0033-UBUNTU-only-apparmor-for-kvm.powerpc-LP-1680384.patch: allow
        commands executed by ubuntu only kvm wrapper on ppc64el (LP 1686621).
      + d/p/0034-apparmor-virt-aa-helper-access-for-snapped-nova.patch:
        apparmor, virt-aa-helper: access for snapped nova
  * Dropped Changes (Upstream):
    - d/p/ubuntu/fix-libxl-default-driver-name.patch: avoid an issue with
      default driver entries missing name='qemu'.
    - d/p/u/aa-helper-Properly-link-with-storage-driver.patch (LP 1704782)
      Fix to be able to follow BackinStorage chains when creating per
      guest apparmor rules.
  * Dropped Changes (In Debian):
    - Enable esx support
      + Add build-dep to libcurl4-gnutls-dev (required for esx)
  * Added Changes:
    - d/p/ubuntu-aa/0035-virt-aa-helper-locking-disk-files-for-qemu-2.10.patch:
      for compatibility with the behavior of qemu 2.10 this adds locking
      permission to rules generated for disk files (LP: #1709818)


 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Thu, 10 Aug 2017 12:44:47 +0200

libvirt (3.6.0-1) unstable; urgency=medium

  * [ece8d56] New upstream version 3.6.0 (Closes: #870626)
  * [f807f7e] Move debianization patches to front of pq since these are
    unlikely to go away
  * [a06e5a6] Don't build nss on non-linux since it depends on network support
    which is not available on non-linux.
    Thanks to Pino Toscano (Closes: #867393)
  * [6982266] Enable esx support (Closes: #602807)
  * [2c29499] Bump symbol versions
  * [f974bd9] d/control: fix typo.
    Thanks to lintian
  * [d4f1521] Bump standards version to 4.0.0

 -- Guido Günther <agx@sigxcpu.org>  Fri, 04 Aug 2017 00:05:47 -0300

libvirt (3.5.0-1ubuntu3) artful; urgency=medium

  * Refresh changes to match they way they were accepted upstream
    - d/p/u/aa-helper-Properly-link-with-storage-driver.patch add commit
      reference now that it is in git.
    - d/p/u/fix-libxl-default-driver-name.patch: instead of addin the
      name this is now fixed by relaxing the schema.

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Wed, 19 Jul 2017 12:48:39 +0200

libvirt (3.5.0-1ubuntu2) artful; urgency=medium

  * d/p/u/aa-helper-Properly-link-with-storage-driver.patch (LP: #1704782)
    Fix to be able to follow BackinStorage chains when creating per
    guest apparmor rules.

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Tue, 18 Jul 2017 16:34:57 +0200

libvirt (3.5.0-1ubuntu1) artful; urgency=medium

  * Merged with Debian unstable (3.5)
    This closes several bugs:
    - improved handling of host-model since libvirt 3.2 (LP: #1673467)
    - Adding POWER9 cpu model to cpu_map.xml (LP: #1690209)
  * Remaining changes:
    - Disable sheepdog (universe dependency)
    - Disable libssh2 support (universe dependency)
    - Disable firewalld support (universe dependency)
    - Disable selinux
    - Enable esx support
      + Add build-dep to libcurl4-gnutls-dev (required for esx)
    - Set qemu-group to kvm (for compat with older ubuntu)
    - Regularly clear AppArmor profiles for vms that no longer exist
    - Additional apport package-hook
    - Modifications to adapt for our delayed switch away from libvirt-bin (can
      be dropped >18.04).
      + d/p/ubuntu/libvirtd-service-add-bin-alias.patch: systemd: define alias
        to old service name so that old references work
      + d/p/ubuntu/libvirtd-init-add-bin-alias.patch: sysv init: define alias
        to old service name so that old references work
      + d/control: transitional package with the old name and maintainer
        scripts to handle the transition
    - Backwards compatible handling of group rename (can be dropped >18.04).
    - config details and autostart of default bridged network. Creating that is
      now the default in general, yet our solution provides the following on
      top as of today:
      + nat only on some ports <port start='1024' end='65535'/>
      + autostart the default network by default
      + do not autostart if 192.168.122.0 is already taken (e.g. in containers)
    - d/p/ubuntu/Allow-libvirt-group-to-access-the-socket.patch: This is
      the group based access to libvirt functions as it was used in Ubuntu
      for quite long.
      + d/p/ubuntu/daemon-augeas-fix-expected.patch fix some related tests
        due to the group access change.
    - ubuntu/parallel-shutdown.patch: set parallel shutdown by default.
    - d/p/ubuntu/enable-kvm-spice.patch: compat with older Ubuntu qemu/kvm
      which provided a separate kvm-spice.
    - d/p/ubuntu/storage-disable-gluster-test: gluster not enabled, skip test
    - d/p/ubuntu/ubuntu-libxl-qemu-path.patch: this change was split. The
      section that adapts the path of the emulator to the Debian/Ubuntu
      packaging is kept.
    - d/p/ubuntu/ubuntu-libxl-Fix-up-VRAM-to-minimum-requirements.patch: auto
      set VRAM to minimum requirements
    - d/p/ubuntu/xen-default-uri.patch: set default URI on xen hosts
    - Add libxl log directory
    - libvirt-uri.sh: Automatically switch default libvirt URI for users on
      Xen dom0 via user profile (was missing on changelogs before)
    - d/p/ubuntu/apibuild-skip-libvirt-common.h: drop libvirt-common.h from
      included_files to avoid build failures due to duplicate definitions.
    - Update README.Debian with Ubuntu changes
    - Convert libvirt0, libnss_libvirt and libvirt-dev to multi-arch.
    - Enable some additional features on ppc64el and s390x (for arch parity)
      + systemtap, zfs, numa and numad on s390x.
      + systemtap on ppc64el.
    - fix conffile upgrade handling to avoid obsolete files
      and inactive duplicates (LP 1694159)
    - d/t/control, d/t/smoke-qemu-session: fixup smoke-qemu-session by making
      vmlinuz available and accessible (Debian bug 848314)
    - d/t/control, d/t/smoke-lxc: fix up lxc smoke test (Debian bug 848317)
    - Extended handling of apparmor profiles - clear lost profiles via cron
    - Add dnsmasq configuration to work with system wide dnsmasq (drop >18.04,
      no more UCA onto Xenial then which has global dnsmasq by default).
    - Reworked apparmor Delta, especially the more complex delta is dropped
      now, also our former delta is now split into logical pieces, has
      improved comments and is part of a continuous upstreaming effort.
      Listing related remaining changes:
      + d/p/0001-apparmor-Allow-pygrub-to-run-on-Debian-Ubuntu.patch: apparmor:
        Allow pygrub to run on Debian/Ubuntu
      + d/p/0002-apparmor-libvirt-qemu-Allow-macvtap-access.patch: apparmor,
        libvirt-qemu: Allow macvtap access
      + d/p/0003-apparmor-libvirt-qemu-Allow-read-access-to-overcommi.patch:
        apparmor, libvirt-qemu: Allow read access to overcommit_memory
      + d/p/0004-apparmor-Explicit-deny-for-setpcap.patch: apparmor: Explicit
        deny for setpcap
      + d/p/0005-apparmor-libvirt-qemu-Allow-use-of-sgabios.patch: apparmor,
        libvirt-qemu: Allow use of sgabios
      + d/p/0006-apparmor-libvirt-qemu-Silence-lttng-related-deny-mes.patch:
        apparmor, libvirt-qemu: Silence lttng related deny messages
      + d/p/0007-apparmor-libvirt-qemu-Allow-owner-read-access-to-PRO.patch:
        apparmor, libvirt-qemu: Allow owner read access to @{PROC}/*/auxv
      + d/p/0008-apparmor-libvirt-qemu-Allow-read-access-to-sysfs-sys.patch:
        apparmor, libvirt-qemu: Allow read access to sysfs system info
      + d/p/0009-apparmor-libvirt-qemu-Allow-read-access-to-max_mem_r.patch:
        apparmor, libvirt-qemu: Allow read access to max_mem_regions
      + d/p/0010-apparmor-libvirt-qemu-Allow-qemu-block-extra-librari.patch:
        apparmor, libvirt-qemu: Allow qemu-block-extra libraries
      + d/p/0011-apparmor-libvirt-qemu-Allow-access-to-hugepage-mount.patch:
        apparmor, libvirt-qemu: Allow access to hugepage mounts
      + d/p/0012-apparmor-libvirtd-Allow-access-to-netlink-sockets.patch:
        apparmor, libvirtd: Allow access to netlink sockets
      + d/p/0013-apparmor-Add-rules-for-mediation-support.patch:
        apparmor: Add rules for mediation support
      + d/p/0014-apparmor-virt-aa-helper-Improve-comment-about-backin.patch:
        apparmor, virt-aa-helper: Improve comment about backing store
      + d/p/0015-apparmor-virt-aa-helper-Allow-access-to-ecryptfs-fil.patch:
        apparmor, virt-aa-helper: Allow access to ecryptfs files
      + d/p/0016-apparmor-libvirtd-Allow-ixr-to-var-lib-libvirt-virtd.patch:
        apparmor, libvirtd: Allow ixr to /var/lib/libvirt/virtd*
      + d/p/0017-apparmor-virt-aa-helper-Allow-access-to-tmp-director.patch:
        apparmor, virt-aa-helper: Allow access to tmp directories
      + d/p/0018-apparmor-virt-aa-helper-Add-ipv6-network-policy.patch:
        apparmor, virt-aa-helper: Add ipv6 network policy
      + d/p/0019-apparmor-virt-aa-helper-Allow-access-to-sys-bus-usb-.patch:
        apparmor, virt-aa-helper: Allow access to /sys/bus/usb/devices
      + d/p/0020-apparmor-virt-aa-helper-Allow-various-storage-pools-.patch:
        apparmor, virt-aa-helper: Allow various storage pools and image
        locations
      + d/p/0021-apparmor-virt-aa-helper-Add-openvswitch-support.patch:
        apparmor, virt-aa-helper: Add openvswitch support
      + d/p/0022-apparmor-drop-references-to-qemu-kvm.patch: apparmor: drop
        references to qemu-kvm
      + d/p/0023-apparmor-qemu-won-t-call-qemu-nbd.patch: apparmor: qemu
        won't call qemu-nbd
      + d/p/0024-apparmor-virt-aa-helper-Allow-access-to-name-service.patch:
        apparmor, virt-aa-helper: Allow access to name services
      + d/p/0025-apparmor-fix-newer-virt-manager-1.4.0.patch: Add Apparmor
        permissions so virt-manager 1.4.0 viewing works (LP 1668681).
      + d/p/0026-apparmor-add-generic-base-vfio-device.patch: apparmor: add
        /dev/vfio for vf (hot) attach (LP 1680384).
      + d/p/0027-apparmor-allow-reading-cmdline-of-shutdown-signal.patch:
        apparmor: allow to parse cmdline of the pid that send the shutdown
        signal (LP 1680384).
      + (28 is a new patch, listed in added changes)
      + d/p/0029-appmor-libvirt-qemu-Add-9p-support.patch: appmor,
        libvirt-qemu: Add 9p support
      + d/p/0030-virt-aa-helper-Complete-9p-support.patch: virt-aa-helper:
        add l to 9p file options.
      + d/p/0031-virt-aa-helper-Ask-for-no-deny-rule-for-readonly-dis.patch:
        virt-aa-helper: Ask for no deny rule for readonly disk (renamed and
        reworded, was virt-aa-helper-no-explicity-deny-for-basefiles.patch)
      + d/p/0032-apparmor-libvirt-qemu-Allow-reading-charm-specific-c.patch:
        apparmor, libvirt-qemu: Allow reading charm-specific ceph config
      + d/p/0033-UBUNTU-only-apparmor-for-kvm.powerpc-LP-1680384.patch: allow
        commands executed by ubuntu only kvm wrapper on ppc64el (LP 1686621).
      + d/p/0034-apparmor-virt-aa-helper-access-for-snapped-nova.patch:
        apparmor, virt-aa-helper: access for snapped nova
    - remaining but updated to match the latest release
      + d/p/Disable-use-of-namespaces-by-default.patch (Debian change)
      + d/p/Reduce-udevadm-settle-timeout-to-10-seconds.patch (Debian change)
      + d/p/debian/apparmor_profiles_local_include.patch Include local
        apparmor profile (Debian change)
      + d/p/ubuntu/ubuntu_machine_type.patch: accept ubuntu types as pci440fx
      + d/test/smoke-lxc workaround for debbug 848317/867379
  * Dropped Changes (Upstream):
    - Add missing apparmor rule for debug-threads feature (LP 1615550).
    - Add new block device types to virt-aa-helpers profile (LP 1641618)
    - d/p/ubuntu/storage-default-permission-mode-to-0711: safer default perms
      for storage dirs like /var/lib/libvirt/images.
    - d/p/ubuntu/libvirtd-service-nolimit.patch: remove proc/file/task limits
      to support huge systems.
    - d/p/ubuntu/libvirtd-service-set-notifyaccess.patch: set NotifyAccess=all
      in libvirtd.service (-d not allowed to be specified, everything else
      upstream so drop delta; LP 1574566).
    - d/p/ubuntu/qemu_process-spice-don-t-release-used-port.patch: qemu_process
      spice: don't release used port (LP 1697729).
    - d/p/ubuntu/virsh-maxvcpu-fall-back-to-old-command.patch: virsh: maxvcpus:
      Always fall back to the old command if domain caps fail (LP 1674298)
    - d/p/ubuntu/qemu-Allow-empty-script-path-to-interface.patch: in the past
      it was possible to have <script path=''/> which now fails - fix to match
      the old behavior (LP 1665698)
    - Reworked apparmor Delta and started upstreaming, listing related
      changes dropped:
      + Apparmor feature parsing to depend on new apparmor features which
        appear in different versions across distributions (no more needed
        >=Xenial, allows to now separate changes and upstream more easily).
      + d/p/ubuntu/Ensure-disk-names-follow-the-disk-name-regex.patch:
        guarantee disk spec is following the defined regex (LP 1665410).
      + d/p/ubuntu/virt-aa-helper-add-guest-agent-rule.patch: add
        virt-aa-helper rule allowing all private channel access.
      + d/p/ubuntu/virt-aa-helper-apparmor-allow-usr-share-AAVMF-too.patch:
        virt-aa-helper to allow access to aarch64 UEFI images.
      + d/rules, apparmor: include and install local apparmor profiles (This
        is now done by dh_apparmor automatically)
      + add local apparmor override templates (provided by dh_apparmor now)
      + Fix name resolution calls from virt-aa-helper profile (LP 1546674).
      + virt-aa-helper, apparmor: allow /usr/share/OVMF/ too
      + virt-aa-helper: Generalize test for firmware paths
      + apparmor, virt-aa-helper: Allow aarch64 UEFI.
      + apparmor, libvirt-qemu: Add ppc64el related changes
      + apparmor, libvirtd: Allow libxl-save-helper to run on Debian/Ubuntu
      + apparmor, libvirt-qemu: Allow access to ceph config
      + apparmor, libvirt-qemu: Allow access to certificates used by libvirt-vnc
      + apparmor, virt-aa-helper: Explicit denies for host devices
      + apparmor, virt-aa-helper: Allow access to libnl-3 config files
      + apparmor, libvirt-qemu: allow access to pt_chown for pty consoles
  * Dropped Changes (In Debian):
    - d/rules: debhelper start virtlogd.socket
    - d/p/ubuntu/Debianize-virtlogd-service.patch: Adapt config file location
      for Debian based systems.
    - Additional debian/bug-presubj
    - Extended handling of apparmor profiles - reload and remove in maintainer
      scripts (dh_apparmor* now generate these snippets)
  * Dropped Changes (no SysV anymore):
    - Add sysvinit script for virtlockd
    - Wait on socket in sysvinit script
    - d/rules: dh_installinit virtlockd (was part of "Cleanup systemd
      debhelper"
    - d/p/ubuntu/Debianize-virtlockd-init.patch: Fix default config path in
      virtlockd.init for Debian based systems.
  * Dropped Changes (other reasons):
    - d/p/ubuntu/dnsmasq-as-priv-user: configuration to run as extra user
      This used group libvirt instead of nobody which makes it worse; Needs
      to be fixed upstream (LP: #1690729).
      + d/p/ubuntu/disable-network-test.patch: disable test failing due to
        dnsmasq changes.
    - Add .gitignore for .pc
    - we keep lxc support as Debian does, but stop adding delta. It feels
      somewhat less maintained than e.g. libvirt for qemu. Also for secure
      and comfortable container management lxd is clearly preferred. The
      delta caused more issues than it solved so deliver libvirt-lxc as-is
      and drop the related delta.
      + d/p/ubuntu/9031-enable-lxc-apparmor: enable apparmor confinement of
        containers by default.
      + d/p/ubuntu/9032-lxc-allow-no-security-driver: allow empty sec driver
        for libvirt-lxc.
    - The following xen changes are no more required with current versions
      + d/p/ubuntu/ubuntu-libxl-hvmloader-path.patch: Fallback for libxl
        xen paths (LP 1459603)
      + d/p/ubuntu/ubuntu-libxl-qemu-path.patch: this change was split. The
        section about compat to the very old qemu-dm name is no more needed.
      + d/p/ubuntu/libxl-fix-test-data.patch and
        d/p/ubuntu/fix-xen-xml-in-tests.patch: updated and unified into the
        former one + also updated the maintainer notes to ease updating.
      + d/p/ubuntu/libxl-no-dm-check.patch: Stop calling emulator to identify
        device-model
  * Added Changes:
    - d/p/0028-apparmor-add-default-pki-path-of-lbvirt-spice.patch:
      apparmor: add default pki path of lbvirt-spice (LP: #1690140)
    - conffile handling of files dropped in 3.5 (can be dropped >18.04)
      + /etc/init.d/virtlockd was sysv init only
      + /etc/apparmor.d/local/usr.sbin.libvirtd and
        /etc/apparmor.d/local/usr.lib.libvirt.virt-aa-helper are now generated
        by dh_apparmor as needed
    - d/p/ubuntu/fix-libxl-default-driver-name.patch: avoid an issue with
      default driver entries missing name='qemu'.

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Thu, 06 Jul 2017 15:43:17 +0200

libvirt (3.5.0-1) unstable; urgency=medium

  [ Guido Günther ]
  * [116cb98] New upstream version 3.5.0
  * [22f685c] Explicitly enable directory based storage backend.  We do so for
    the other storage backends as well.
  * [1619c0f] Ship storage backends
  * [b0f6946] New upstream version 3.5.0-rc2
  * [e0507a8] New upstream version 3.1.0
  * [603e376] New upstream version 3.1.0-rc2
  * [172bcdf,21aa1f3,0d45d3b] Bump symbol versions
  * [9c4dfe3] Dropped Disable-use-of-namespaces-by-default.patch: not needed,
    namespaces are now enabled
  * [7cb82a1] Add pt debconf translation.
    Thanks to Rui Branco (Closes: #858742)
  * [fcd509f] Remove defaults file on clean
  * [6b9ffbb] Build depend on libparted-dev to ease cross building
    Thanks to Helmut Grohne (Closes: #864671)
  * [849c8e2] Rediff patches.
    Dropped patches for things fixed upstream:
     CVE-2017-2635-qemu-Don-t-update-physical-storage-size-of-.patch
     apparmor-allow-usr-lib-qemu-qemu-bridge-helper.patchupstream
     virt-aa-helper-apparmor-allow-usr-share-OVMF-too.patch
     Allow-access-to-libnl-3-config-files.patch
     Dropped qemu-skip-QMP-probing-of-CPU-definitions-when-missing.patch
  * [a0cd0f0] Update key for upstream tarball verification

  [ Christian Ehrhardt ]
  * [8fa2c4f] Ship libvirt-admin.conf
  * [dd2991f] Ship default file for virtlockd
  * [aef2f3c] Ship libvirt-admin.conf (Closes: #863649)
  * [c3b6ff2] Ship default file for virtlockd (Closes: #863648)

 -- Guido Günther <agx@sigxcpu.org>  Thu, 06 Jul 2017 11:04:21 +0200

libvirt (3.0.0-4) unstable; urgency=medium

  * [2a23b23] qemu: skip QMP probing of CPU definitions when missing.
    Don't probe CPU definitions if we lack the monitor command. This
    unbreaks e.g. mips based VMs. (Closes: #85412)
  * [21bc332] apprarmor: unbreak lbvirt invoking qemu-bridge-helpers
    This makes VM creation in gnome-boxes work with apparmor enabled.

 -- Guido Günther <agx@sigxcpu.org>  Fri, 17 Mar 2017 11:20:13 +0100

libvirt (3.0.0-3) unstable; urgency=medium

  * [62ad289] Debianize virtlogd
  * [cb216b5] CVE-2017-2635: qemu: Don't update physical storage size of empty drives
    (Closes: #856313)

 -- Guido Günther <agx@sigxcpu.org>  Mon, 27 Feb 2017 20:07:41 +0100

libvirt (3.0.0-2) unstable; urgency=medium

  * Upload to unstable
  * [8ce689d] Add pt_BR debconf translation.
    Thanks to Adriano Rafael Gomes (Closes: #852446)

 -- Guido Günther <agx@sigxcpu.org>  Wed, 25 Jan 2017 07:04:08 +0100

libvirt (3.0.0-1) experimental; urgency=medium

  * [bf2fdf7] New upstream version 3.0.0
  * [95b1359] New upstream version 3.0.0-rc1
  * [57baa73] lxc smoketest: drop emulator path
    so it's simpler to reuse this on other distros to reproduce test
    failures.
    Thanks to Cedric Bosdonnat
  * [5be8cad] lxc: ensure libvirt_lxc and qemu-nbd move into systemd machine
    slice (Closes: #848317)
  * [5c36b50] nl debconf translation.
    Thanks to Frans Spiesschaert (Closes: #850737)
  * [458b927] Add Danish debconf translation.
    Thanks to Joe Dalton (Closes: #850872)
  * [cbe5cd0] Add fr debconf translation.
    Thanks to Alban VIDAL (Closes: #850938)
  * [7c3b026] Rediff patches.
    Dropped patches fixed upstream
      apparmor-pass-attach_disconnected.patch
      lxc-ensure-libvirt_lxc-and-qemu-nbd-move-into-systemd-mac.patch
      AppArmor-policy-support-merged-usr.patch
  * [baf4b1f] Bump symbol versions
  * [80ef821] Add de translation.
    Thanks to Markus Hiereth for the initial draft
  * [2be70b3] Work around lack of /dev/ptmx access in pbuilder
    test-posix_openpt-don-t-fail-on-EPERM.patch
    openpty-Skip-test-if-no-pty-is-available.patch
  * [43e4ddc] Disable use of qemu mount namespaces by default. The
    code is not complete yet.

 -- Guido Günther <agx@sigxcpu.org>  Thu, 19 Jan 2017 18:51:18 +0100

libvirt (2.5.0-3ubuntu10) artful; urgency=medium

  * d/p/ubuntu/0004-apparmor-apply-ubuntu-delta.patch: Allow access to base
    images and snapshots stored in nova-hypervisor snap's $SNAP_COMMON
    directory, enabling use of the libvirt deb from the nova-hypervisor
    snap (LP: #1644507).

 -- Corey Bryant <corey.bryant@canonical.com>  Thu, 22 Jun 2017 14:29:39 -0400

libvirt (2.5.0-3ubuntu9) artful; urgency=medium

  * d/p/ubuntu/qemu_process-spice-don-t-release-used-port.patch: qemu_process
    spice: don't release used port (LP: #1697729) - upstream in libvirt 3.1.

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Wed, 14 Jun 2017 14:49:16 +0200

libvirt (2.5.0-3ubuntu8) artful; urgency=medium

  * fix conffile upgrade handling to avoid obsolete files
    and inactive duplicates (LP: #1694159)
    - d/libvirt-daemon-system.maintscript: revert to Debian content
    - d/libvirt-bin.maintscript: add missing rm_conffile related to
      dropping upstart.
    - d/libvirt-bin.maintscript: add missing rm of conffiles due
      to re-aligning with debian package names since yakkety.
    - d/libvirt-bin.maintscript: for LTS->LTS upgraders try to move and retain
      custom changes.
    - d/libvirt-bin.maintscript: for upgraders from yakkety or later remove
      the (now duplicate) conffiles, but retain custom changes in backups if
      they exist
    - d/libvirt-bin.preinst: drop manual mv of conffiles which lacked
      retaining changes and upgrade-abort handling.
    - d/libvirt-bin.preinst: handle upgrades up to the latest predecessor
      possible before yakkety.
    - d/libvirt-bin.preinst: fixup the combination of rm+mv conffile in case
      the package is upgrading from pre yakkety.
    - d/libvirt-daemon-system.postinst: clean up old dnsmasq enablement symlink
      if unmodified.

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Wed, 31 May 2017 14:29:51 +0200

libvirt (2.5.0-3ubuntu7) artful; urgency=medium

  * debian/patches/ubuntu/apparmor-ppcwrapper.patch: update to add missing
    colon (LP: #1686621).

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Thu, 27 Apr 2017 13:16:05 +0200

libvirt (2.5.0-3ubuntu6) artful; urgency=medium

  * Add missing apparmor profile entries (LP: #1680384)
    - debian/patches/ubuntu/apparmor-vfio.patch: apparmor: add /dev/vfio
      for vf (hot) attach
    - debian/patches/ubuntu/apparmor-ppcwrapper.patch: apparmor: allow
      extra tools executed by kvm.powerpc
    - debian/patches/ubuntu/apparmor-shutdown.patch: apparmor: allow to
      parse cmdline of the pid that send the shutdown signal

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Tue, 25 Apr 2017 14:10:06 +0200

libvirt (2.5.0-3ubuntu5) zesty; urgency=medium

  * d/p/ubuntu/virsh-maxvcpu-fall-back-to-old-command.patch: virsh: maxvcpus:
    Always fall back to the old command if domain caps fail (LP: #1674298)

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Tue, 21 Mar 2017 08:02:37 +0100

libvirt (2.5.0-3ubuntu4) zesty; urgency=medium

  * d/p/ubuntu/qemu-Allow-empty-script-path-to-interface.patch: in the past
    it was possible to have <script path=''/> which now fails - fix to match
    the old behavior (LP: #1665698)

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Fri, 10 Mar 2017 08:57:18 +0100

libvirt (2.5.0-3ubuntu3) zesty; urgency=medium

  [ Christian Ehrhardt ]
  * d/p/ubuntu/Ensure-disk-names-follow-the-disk-name-regex.patch:
    guarantee disk spec is following the defined regex (LP: #1665410).

  [ Bryan Quigley ]
  * d/p/ubuntu/0007-apparmor-fix-for-new-virt-manager.patch: Add Apparmor
    permissions so virt-manager 1.4.0 viewing works (LP: #1668681).

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Mon, 06 Mar 2017 08:24:06 +0100

libvirt (2.5.0-3ubuntu2) zesty; urgency=medium

  * No-change rebuild to build against Xen-4.8 libs.

 -- Stefan Bader <stefan.bader@canonical.com>  Thu, 26 Jan 2017 14:19:03 +0100

libvirt (2.5.0-3ubuntu1) zesty; urgency=medium

  * Merged with Debian unstable
    - this picks up a fix for migrations using NFS mounts (LP: #1637601).
  * Remaining changes:
    - Disable sheepdog (universe dependency)
    - Disable libssh2 support (universe dependency)
    - Disable firewalld support (universe dependency)
    - Disable selinux
    - Enable esx support
      - Add build-dep to libcurl4-gnutls-dev (required for esx)
    - Set qemu-group to kvm (for compat with older ubuntu)
    - Added changes to use the upstream apparmor profiles with added
      delta (configurable via apparmor profiles version).
      * d/p/u/000[1-6]-apparmor-*
    - Regularly clear AppArmor profiles for vms that no longer exist
    - Fix name resolution calls from virt-aa-helper profile (LP 1546674).
    - Add missing apparmor rule for debug-threads feature (LP 1615550).
    - Add new block device types to virt-aa-helpers profile (LP 1641618)
    - Additional apport package-hook
    - d/rules: debhelper start virtlogd.socket
    - Add sysvinit script for virtlockd
    - Additional debian/bug-presubj
    - Modifications to adapt for our delayed switch away from libvirt-bin (can
      be dropped after 18.04).
      - d/p/ubuntu/libvirtd-service-add-bin-alias.patch: alias to old
        libvirt-bin name.
      - d/p/ubuntu/libvirtd-init-add-bin-alias.patch: provides for the old
        libvirt-bin name.
    - Wait on socket in sysvinit script
    - Backwards compatible handling of groups (can be dropped after 18.04).
    - config details and autostart of default bridged network. Creating that is
      now the default in general, yet our solution provides the following on
      top as of today:
      - nat only on some ports <port start='1024' end='65535'/>
      - autostart the default network by default
      - do not autostart if 192.168.122.0 is already taken (e.g. in containers)
    - d/p/ubuntu/Allow-libvirt-group-to-access-the-socket.patch: This is
      the group based access to libvirt functions as it was used in Ubuntu
      for quite long.
      - d/p/ubuntu/daemon-augeas-fix-expected.patch fix some related tests
        due to the group access change.
    - d/p/ubuntu/dnsmasq-as-priv-user: configuration to run as extra user
      - d/p/ubuntu/disable-network-test.patch: disable test failing due to
        dnsmasq changes.
    - ubuntu/parallel-shutdown.patch: set parallel shutdown by default.
    - d/p/ubuntu/enable-kvm-spice.patch: compat with older Ubuntu qemu/kvm
      which provided a separate kvm-spice.
    - d/p/ubuntu/storage-default-permission-mode-to-0711: safer default perms
      for storage dirs like /var/lib/libvirt/images.
    - d/p/ubuntu/storage-disable-gluster-test: gluster not enabled, skip test
    - d/p/ubuntu/9031-enable-lxc-apparmor: enable apparmor confinement of
      containers by default.
    - d/p/ubuntu/9032-lxc-allow-no-security-driver: allow empty sec driver for
      libvirt-lxc.
    - d/p/ubuntu/ubuntu_machine_type.patch: accept ubuntu types as pci440fx
    - d/p/ubuntu/ubuntu-libxl-qemu-path.patch: Set common qemu path to match
      Debian/Ubuntu Xen packaging.
    - d/p/ubuntu/ubuntu-libxl-hvmloader-path.patch: Fallback for libxl
      xen paths (LP 1459603)
    - d/p/ubuntu/ubuntu-libxl-Fix-up-VRAM-to-minimum-requirements.patch: auto
      set VRAM to minimum requirements
    - d/p/ubuntu/libxl-no-dm-check.patch: Stop calling emulator to identify
      device-model
    - d/p/ubuntu/xen-default-uri.patch: set default URI on xen hosts
    - fixup tests to match packaging of Xen (mostly different paths)
      - d/p/ubuntu/libxl-fix-test-data.patch
      - d/p/ubuntu/fix-xen-xml-in-tests.patch
    - d/p/ubuntu/Debianize-virtlogd-service.patch: Adapt config file location
      for Debian based systems.
    - d/p/ubuntu/Debianize-virtlockd-init.patch: Fix default config path in
      virtlockd.init for Debian based systems.
    - d/p/ubuntu/9034-complete-9p-support: virt-aa-helper: add l to 9p file
      options.
    - d/p/ubuntu/parallel-shutdown.patch: shut guests down in parallel
    - d/p/ubuntu/virt-aa-helper-no-explicity-deny-for-basefiles.patch: ask for
      no deny rule for readonly disk elements.
    - d/p/ubuntu/virt-aa-helper-add-guest-agent-rule.patch: add virt-aa-helper
      rule allowing all private channel access
    - d/p/ubuntu/libvirtd-service-nolimit.patch: remove proc/file/task limits
      to support huge systems.
    - d/p/ubuntu/virt-aa-helper-apparmor-allow-usr-share-AAVMF-too.patch:
      virt-aa-helper to allow access to aarch64 UEFI images.
    - d/p/ubuntu/libvirtd-service-set-notifyaccess.patch: set NotifyAccess=all
      in libvirtd.service (LP 1574566).
    - d/p/ubuntu/apibuild-skip-libvirt-common.h: drop libvirt-common.h from
      included_files to avoid build failures due to duplicate definitions.
    - Update README.Debian with Ubuntu changes
    - Convert libvirt0, libnss_libvirt and libvirt-dev to multi-arch.
    - Add libxl log directory
    - Enable some additional features on ppc64el and s390x (for arch parity)
      - systemtap, zfs, numa and numad on s390x.
      - systemtap on ppc64el.
  * Dropped Changes:
    - Build depend on gnutls >= 3.5.6-4ubuntu2 (no > 3.5.6 && < 3.5.6-4ubuntu2
      in any release left)
    - Fix parsing non apparmor labels LP:#1633207 (upstream in libvirt 2.5)
    - Ignore newlines in guest list (upstream in libvirt 2.4)
    - Avoid migration postcopy issues by ensuring valid commands (upstream in
      libvirt 2.5)
    - Enable numa for arm64 (in Debian)
    - Fix libvirt start failure when security_driver set (upstream in libvirt
      2.2)
    - virt-aa-helper: Fix upstream implementation of no explicit deny rule
      (upstream in libvirt 2.3)
    - Some useless whitespace damage and no more applicable comments
    - The following patches were part of the Delta but not the series file.
      So they had no effect and can be dropped now:
      - ubuntu/9036-util-prepare-uri-for-libxml2-2.9.2.patch
      - ubuntu/Disable-failing-virnetsockettest.patch
      - ubuntu/dont-include-non-migrateable-features-in-host-model
      - ubuntu/upstream-libxl-Allow-libxl-to-find-pygrub-binary.patch
    - See the 2.1.0-1ubuntu15 and 2.1.0-1ubuntu16 changelogs for related
      pre-merge drops
    - Add build-dep to libxml-libxml-perl (no more needed)
    - apparmor double add /usr/bin/qemu-sparc64 rmix (no function anymore)
    - apparmor /usr/{lib,lib64}/qemu/block-*.so (in Debian)
    - apparmor moving /bin/bash rmix in profile (drop non functional delta)
    - follow Debians style of block-*.so rules for block-extra (drop our
      functionally equivalent adding/moving of rules)
    - follow Debians style of lib/lib64 rules (drop a lot of our functional
      functionally equivalent adding/moving of rules)
    - accept Upstream style to handle libvirt_iohelper and libvirt_parthelper
      (stop removing the two rules without an associated bug to reduce delta)
    - Disabling dep8 smoke tests
  * Added Changes:
    - d/t/control, d/t/smoke-qemu-session: fixup smoke-qemu-session by making
      vmlinuz available and accessible (in discussed with Debian in debbug
      848314)
    - d/t/control, d/t/smoke-lxc: fix up lxc smoke test (in discussed with
      Debian in debbug 848317)

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Tue, 03 Jan 2017 13:58:30 +0100

libvirt (2.5.0-3) unstable; urgency=medium

  * [ba9fcb8] Invoke db_stop.
    Thanks to Raphaël Halimi (Closes: #849201)

 -- Guido Günther <agx@sigxcpu.org>  Fri, 23 Dec 2016 16:18:12 +0100

libvirt (2.5.0-2) unstable; urgency=medium

  [ Guido Günther ]
  * Upload to unstable
  * [14eee94] Make debconf template translatable
  * [13afd29] Adjust doc-base due to new upstream doc layouer
  * [fd7c2bb] Skip any debconf prompting if user and group are already there
    to not interfere with existing intallations
  * [1afd876] Depend on iptables of firewalld (Closes: #846321)
  * autopkgtests cleanups. Thanks to Christian Ehrhardt
    (Closes: #848247)

  [ intrigeri ]
  * [d64731a] Apparmor fixes for merged /usr

  [ Mauricio Faria de Oliveira ]
  * [f4b33d0] Use a fixed uid/gid for libvirt-qemu usr to avoid permission
    issues on network filesystems like NFS. On new installations warn via
    debconf if uid/gid are already taken.
    (Closes: #844339)

 -- Guido Günther <agx@sigxcpu.org>  Thu, 22 Dec 2016 14:01:08 +0100

libvirt (2.5.0-1) experimental; urgency=medium

  * [691e163] New upstream version 2.5.0
  * [49e8842] Bump symbol versions
  * [babd7e4] Rediff patches. Dropped:
      Unbreak-rebuilding-docs-with-release-tarballs.patch: applied upstream
      configure-Prefer-usr-bin-over-bin-for-numad.patch: fixed upstream

 -- Guido Günther <agx@sigxcpu.org>  Wed, 07 Dec 2016 17:41:37 +0100

libvirt (2.4.0-3) unstable; urgency=medium

  * [9eda310] Depend on lsb-base
  * [c76b178] Make test failure fail the tests again on amd64.
    Thanks to Christian Ehrhardt for spotting this (Closes: #844511)

 -- Guido Günther <agx@sigxcpu.org>  Wed, 07 Dec 2016 16:22:18 +0100

libvirt (2.4.0-2) unstable; urgency=medium

  * [f964983] Unbreak rebuilding docs with release tarballs (Closes: #842452)
  * [488910d] Enable numad support.
    Thanks to Guilhem Moulin (Closes: #843863)
  * [f792cd7] Pass GPG_TTY env var to the ssh binary.
    Thanks to Guilhem Moulin (Closes: #843863)

 -- Guido Günther <agx@sigxcpu.org>  Tue, 15 Nov 2016 14:19:07 +0100

libvirt (2.4.0-1) unstable; urgency=medium

  * [abba3b7] New upstream version 2.4.0

 -- Guido Günther <agx@sigxcpu.org>  Thu, 03 Nov 2016 13:20:46 +0100

libvirt (2.4.0~rc2-1) experimental; urgency=medium

  * [fccbb3e] New upstream version 2.4.0~rc2

 -- Guido Günther <agx@sigxcpu.org>  Tue, 01 Nov 2016 13:10:50 +0100

libvirt (2.4.0~rc1-1) experimental; urgency=medium

  * [eee8467] New upstream version 2.4.0~rc1
  * [a790aa0] autopkgtests: check capabilities
  * [ec65bfb] autopkgtests: libvirt-lxc needs libvirt-daemon-system while
    smoke does not
  * [8785b7c] autopkgtests: check daemon restart and virtlogd
  * [a7f386a] Bump symbol versions
  * [9c2333a] README.source: use gbp's boilerplate
  * [fd9aac5] Rediff patches.
    Dropped libvirt-guests-use-wants-instead-of-requires.patch: fixed upstream

 -- Guido Günther <agx@sigxcpu.org>  Fri, 28 Oct 2016 13:45:57 +0200

libvirt (2.3.0-3) unstable; urgency=medium

  * [c77d29d] autopkgtests: add missing dependency on libvirt-clients

 -- Guido Günther <agx@sigxcpu.org>  Sun, 16 Oct 2016 16:14:45 +0200

libvirt (2.3.0-2) unstable; urgency=medium

  * [48f7eb0] libvirt-guests: use wants instead of requires to prevent
    libvirtd restarts affecting libvirt-guests

 -- Guido Günther <agx@sigxcpu.org>  Tue, 11 Oct 2016 07:59:09 +0200

libvirt (2.3.0-1) unstable; urgency=medium

  * [512ba55] New upstream version 2.3.0

 -- Guido Günther <agx@sigxcpu.org>  Sat, 08 Oct 2016 10:06:09 +0200

libvirt (2.3.0~rc2-1) experimental; urgency=medium

  * [dc7e4d4] New upstream version 2.3.0~rc2

 -- Guido Günther <agx@sigxcpu.org>  Sun, 02 Oct 2016 18:13:56 +0200

libvirt (2.3.0~rc1-1) experimental; urgency=medium

  [ Riku Voipio ]
  * [439afb5] Run testsuite on arm architectures
    (Closes: #837995)

  [ Guido Günther ]
  * [6858d33] New upstream version 2.3.0~rc1
    (Closes: #835563)
  * [6c294c5] Bump symbol versions
  * [d7e6337] Rediff patches
  * [f9ce70a] Build with numctl on arm64.
    Thanks to dann frazier (Closes: #838949)
  * [4ab7ff4] build-test: add missing dep on pkg-config

 -- Guido Günther <agx@sigxcpu.org>  Thu, 29 Sep 2016 10:02:12 +0200

libvirt (2.2.0-1) unstable; urgency=medium

  * [7772549] New upstream version 2.2.0~rc1
  * [915ae31] Dropped qemu-Fix-the-command-line-generation-... applied
    upstream
  * [fa79b1f] Bump symbol versions
  * [4e31006] New upstream version 2.2.0

 -- Guido Günther <agx@sigxcpu.org>  Fri, 09 Sep 2016 16:51:48 +0200

libvirt (2.1.0-2) unstable; urgency=medium

  * [297be03] Reload virtlogd on updates (Closes: #833745)
  * [ee7cd36] Enable zfs pool support (Closes: #827245)
  * [52ce8c2] Demote pm-utils to suggests.  We still need to port over the
    code to allow one to use systemd for the same functionality.
    (Closes: #748205)
  * [746e1cc] qemu: Fix the command line generation for rbd auth using aes
    secrets (Closes: #827164)

 -- Guido Günther <agx@sigxcpu.org>  Fri, 19 Aug 2016 10:22:22 +0200

libvirt (2.1.0-1ubuntu16) zesty; urgency=medium

  * Ensure d/p/ubuntu/9002-default_uri_virsh_to_system.patch is
    dropped as intended.
  * Re-Add d/p/ubuntu/apibuild-skip-libvirt-common.h for an issue that
    transiently occurs on LP builds (real trigger not yet identified, so it
    can't be upstreamed).

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Wed, 14 Dec 2016 09:30:58 +0100

libvirt (2.1.0-1ubuntu15) zesty; urgency=medium

  * Cleanup Ubuntu Delta prior to next libvirt merge
    - drop obsolte patches:
      d/p/ubuntu/cgroups-ignore-systemd-failure,
      d/p/ubuntu/ubuntu-skip-virstoragetest,
      d/p/ubuntu/9021-fix-uint64_t.patch,
      ubuntu/Disable-failing-virnetsockettest.patch (was only comment),
      d/p/ubuntu/9002-default_uri_virsh_to_system.patch,
      d/p/ubuntu/ubuntu-xend-probe.patch
    - clarify dep3 headers to be more useful:
      d/p/ubuntu/Allow-libvirt-group-to-access-the-socket.patch,
      d/p/ubuntu/daemon-augeas-fix-expected.patch,
      d/p/ubuntu/enable-kvm-spice.patch,
      d/p/ubuntu/dnsmasq-as-priv-user,
      d/p/ubuntu/disable-network-test.patch
    - split patch containing unrelated changes into two patches, so parts of
      d/p/ubuntu/storage-default-permission-mode-to-0711 moved into
      d/p/ubuntu/storage-disable-gluster-test

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Mon, 12 Dec 2016 11:59:59 +0100

libvirt (2.1.0-1ubuntu14) zesty; urgency=medium

  * d/p/u/apparmor-fix-name-resolution.patch rework the fix to base
    on the apparmor nameservice abstraction to be future proof (LP: #1546674).
  * d/p/ubuntu/apparmor-fix-new-devicetypes.patch add new block device types to
    virt-aa-helpers profile (LP: #1641618)
  * d/p/u/apparmor-fix-other-seclabels.patch refresh to the now upstream
    accepted solution (LP: #1633207).

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Thu, 24 Nov 2016 08:06:38 +0100

libvirt (2.1.0-1ubuntu13) zesty; urgency=medium

  * drop d/p/ubuntu/fix-ftbfs-for-gnutls-3-5-6.patch as the offending change
    in gnutls has been reverted (LP: #1641615)
  * Build depend on gnutls >= 3.5.6-4ubuntu2 to build after the gnutls fix
    migrated

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Thu, 17 Nov 2016 08:43:10 +0100

libvirt (2.1.0-1ubuntu12) zesty; urgency=medium

  * d/p/ubuntu/fix-ftbfs-for-gnutls-3-5-6.patch fix FTBFS due to changes in
    gnutls that affected the ordering on certificate DN entries (LP: #1641615)
  * Revert "Fix FTBFS on zesty due to issues with concurrent make check" as it
    was not the right solution.

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Wed, 16 Nov 2016 14:52:17 +0100

libvirt (2.1.0-1ubuntu11) zesty; urgency=medium

  * Fix FTBFS on zesty due to issues with concurrent make check (LP: #1641615)

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Tue, 15 Nov 2016 14:45:52 +0100

libvirt (2.1.0-1ubuntu10) zesty; urgency=medium

  [Simon Déziel]
  * d/p/u/apparmor-fix-name-resolution.patch adds missing rules for name
    resolution to virt-aa-helper Apparmor profile (LP: #1546674).
  * d/p/u/apparmor-fix-debug-threads.patch adds missing rule for debug-threads
    feature that is now default enabled to Apparmor profile (LP: #1615550).

  [Christian Ehrhardt]
  * d/p/u/apparmor-fix-other-seclabels.patch fixes an issue parsing non
    apparmor security labels (LP: #1633207).

 -- Christian Ehrhardt <christian.ehrhardt@canonical.com>  Mon, 24 Oct 2016 14:21:36 +0200

libvirt (2.1.0-1ubuntu9) yakkety; urgency=medium

  * Fix libvirt-guest.sh to handle multiple guests (LP: #1591695).

 -- Stefan Bader <stefan.bader@canonical.com>  Thu, 06 Oct 2016 12:14:05 +0200

libvirt (2.1.0-1ubuntu8) yakkety; urgency=medium

  [ Christian Ehrhardt ]

  * avoid migration postcopy issues by ensuring valid commands (LP: #1620906)
    - d/p/ubuntu/check-live-for-postcopy.patch Check for --live flag for
      postcopy-after-precopy migration.
    - d/p/ubuntu/make-postcopy-mandatory-for-postcopy-after-precopy.patch to

  [ Stefan Bader ]

  * Fix Xenial to Yakkety migration from libvirt-bin.service to
    libvirtd.service (LP: #1627969).
  * Update Vcs-Git and Vcs-Browser fields to point to launchpad
    (LP: #1629210)

  [ Dann Frazier ]

  * Fix FTBS in Yakkety due to missing python dependency (LP: #1629041)

 -- Stefan Bader <stefan.bader@canonical.com>  Fri, 30 Sep 2016 10:11:30 +0200

libvirt (2.1.0-1ubuntu7) yakkety; urgency=medium

  * Enable NUMA support in arm64 builds (LP: #1627926).

 -- dann frazier <dannf@ubuntu.com>  Mon, 26 Sep 2016 23:36:24 -0600

libvirt (2.1.0-1ubuntu6) yakkety; urgency=medium

  * No-change rebuild for readline soname change.

 -- Matthias Klose <doko@ubuntu.com>  Sat, 17 Sep 2016 12:05:33 +0000

libvirt (2.1.0-1ubuntu5) yakkety; urgency=medium

  [ Jon Grimm ]

  * Fix libvirt start failure when security_driver set (LP: #1618592)
    - qemu: fix qemu.conf security_driver

 -- Stefan Bader <stefan.bader@canonical.com>  Thu, 08 Sep 2016 14:11:47 +0200

libvirt (2.1.0-1ubuntu4) yakkety; urgency=medium

  * Enable systemtap, zfs, numa on s390x.
  * Enable systemtap on ppc64el.

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Wed, 24 Aug 2016 13:21:29 +0100

libvirt (2.1.0-1ubuntu3) yakkety; urgency=low

  * Really fix the ADT regression and not only the changelog due
    to somehow ending up on the wrong git branch.

 -- Stefan Bader <stefan.bader@canonical.com>  Wed, 17 Aug 2016 18:31:01 +0200

libvirt (2.1.0-1ubuntu2) yakkety; urgency=low

  * Fix ADT build-test regression(s)

 -- Stefan Bader <stefan.bader@canonical.com>  Wed, 17 Aug 2016 15:18:38 +0200

libvirt (2.1.0-1ubuntu1) yakkety; urgency=low

  * Merged with Debian testing. Remaining changes:
    - Added changes to use the upstream apparmor profiles with added
      delta (configurable via apparmor profiles version).
      * d/p/u/0001-apparmor-add-feature-parsing.patch
      * d/p/u/0002-apparmor-apply-ubuntu-delta.patch
      * d/p/u/0003-apparmor-debian-ubuntu-delta.patch
      * d/p/u/0004-apparmor-ubuntu-delta.patch
    - Avoiding dependency on sheepdog
    - Additional apport package-hook
    - Additional dnsmasq configuration
    - Additional profile.d script to set default URI
    - Additional debian/bug-presubj
    - d/rules: debhelper start virtlogd.socket not virtlockd.service
    - Modifications to adapt for our delayed switch away from libvirt-bin.
    - Wait on socket in sysvinit script
    - Backwards compatible handling of groups and default bridged network
      creation.
    - Extended handling of apparmor profiles
    - Convert libvirt0 and libvirt-dev to multi-arch.
    - Added a fix for the upstream version of adding better write denials
      handling to virt-aa-helper.
    - Convert libnss_libvirt to multi-arch and fix up source location that
      changed when making libvirt0 multi-arch.
    - Dropped
      * upstart script for libvirtd
      * d/p/lp1588841-000[123]-* (upstream)
      * d/p/u/qemu-Add-virQEMUCapsSupportsGICVersion.patch (upstream)
      * d/p/u/qemu-Automatically-choose-usable-GIC-version.patch (upstream)
      * d/p/u/docs-remove-xpath.patch (xpath removed upstream)
      * d/p/u/preup-virt-aa-helper-better-write-denials-handling.patch (upstr.)
      * d/p/u/ubuntu/virt-aa-helper-helpfix.patch (upstream)

 -- Stefan Bader <stefan.bader@canonical.com>  Wed, 13 Jul 2016 13:12:36 +0200

libvirt (2.1.0-1) unstable; urgency=medium

  * Upload to unstable
  * [f7ed747] New upstream version 2.1.0

 -- Guido Günther <agx@sigxcpu.org>  Wed, 03 Aug 2016 17:13:25 +0200

libvirt (2.1.0~rc1-1) experimental; urgency=medium

  * [8efff86] Ship virt-admin
  * [8e2f085] Ship libvirt nss plugin build for IP resolution of virtual
    machines
  * [ad4f7ff] New upstream version 2.1.0~rc1
  * [86c9db9] Rediff patches
  * [72d0ef5] Bump symbol versions

 -- Guido Günther <agx@sigxcpu.org>  Sun, 31 Jul 2016 15:10:19 +0200

libvirt (2.0.0-1) unstable; urgency=medium

  * [8fe8522] Build-Depend on libnuma-dev for ppc64 as well.  Thanks to Andrea
    Bolognani
  * [17113e4] gbp.conf: Use upstream/latest as upstream branch name as
    suggested by DEP14
  * [3364f65] New upstream version 2.0.0 (fixes CVE-2016-5008)

 -- Guido Günther <agx@sigxcpu.org>  Fri, 01 Jul 2016 17:54:01 +0200

libvirt (2.0.0~rc2-1) experimental; urgency=medium

  * [36968cf] Require build-essential for build-essential since we want to
    build some C code
  * [726a029] watch: Also look for xz compressed tarballs
  * [4df5501] New upstream version 2.0.0~rc1 (Closes: #827178)
  * [d868829] New upstream version 2.0.0~rc2
  * [ff61cde] Bump symbol versions
  * [e7e9ca8] Rediff patches.
      Dropped apparmor-Don-t-scrub-environment-of-virtlogd-process.patch:
      applied upstram
      Dropped debian/libsystemd.patch: libsystemd-dev is not used anymore
  * [903cbca] Switch b-d from libystemd to libdbus.
    It was only used for sd_notify which is now open coded in libvirt itself.
  * [7cdb8a8] Rediff patches

 -- Guido Günther <agx@sigxcpu.org>  Wed, 29 Jun 2016 23:21:02 +0200

libvirt (1.3.5-1) unstable; urgency=medium

  * [afaf26b] Add qemu:///session smoke test
  * [90ec8ff] Add lxc:/// smoke test
  * [411c4c9] apparmor: Don't scrub environment of virtlogd process
    to fix qemu:///session
  * [ca01064] New upstream version 1.3.5
  * [6a96655] Rediff patches

 -- Guido Günther <agx@sigxcpu.org>  Sun, 05 Jun 2016 13:36:13 +0200

libvirt (1.3.5~rc1-1) experimental; urgency=medium

  * [ac3021d] Include libnuma-dev as a build-dep for ppc64el.  Thanks to
    Fernando Seiti Furusato (Closes: #823516)
  * [d0b310e] New upstream version 1.3.5~rc1
  * [4218770] Rediff patches
  * [048b740] Bump symbol versions
  * [864b24a] Bump standards version - no source changes
  * [12c4356] control: Remove superfluous testuite field

 -- Guido Günther <agx@sigxcpu.org>  Mon, 30 May 2016 22:00:33 +0200

libvirt (1.3.4-1ubuntu6) yakkety; urgency=low

  * Fix libvirtd crashing on libxl domain restore (LP: #1588841).
    Patches cherry-picked from upsream libvirt git tree.
    - libxl: switch to using libxl_domain_create_restore from v4.4 API
    - libxl: support Xen migration stream V2 in save/restore
    - libxl: support migration stream V2 in migration

 -- Stefan Bader <stefan.bader@canonical.com>  Wed, 08 Jun 2016 14:17:23 +0200

libvirt (1.3.4-1ubuntu5) yakkety; urgency=low

  * Update the correct apparmor profiles to allow AAVMF and qemu-efi
    firmware for aarch64 (1538882)
  * Clean up / refresh various patches to finalize switch from libvirt-bin
    to libvirtd as service name.
    Drop: d/p/ubuntu/libvirt-bin-service-libvirtd-alias.patch
    Refresh+Rename: d/p/ubuntu/libvirt-bin-service-set-notifyaccess.patch ->
                    d/p/ubuntu/libvirtd-service-nolimit.patch
    Rename: d/p/ubuntu/libvirt-bin-service-set-notifyaccess.patch ->
            d/p/ubuntu/libvirtd-service-set-notifyaccess.patch
    Refresh: d/p/ubuntu/libvirtd-service-add-bin-alias.patch
    Add: d/p/ubuntu/libvirtd-init-add-bin-alias.patch
  * Change default profile used by libvirtd.service to /etc/default/libvirtd.
    Drop: d/p/ubuntu/switch-service-files-to-libvirt-bin.patch
  * Drop virtlockd.service from dh_systemd_start in debian/rules as
    the service is socket activated (LP: #1588006).
  * Fix failure to enable libvirtd.service due to lingering libvirt-bin
    alias. This could happen when the upgrade from a version prior 1.3.3-2
    happened before 1.3.4-1ubuntu3 (LP: #1588004).

 -- Stefan Bader <stefan.bader@canonical.com>  Thu, 02 Jun 2016 14:50:27 +0200

libvirt (1.3.4-1ubuntu4) yakkety; urgency=medium

  * Re-enable the upstart job by renaming the file.
  * Include patchby @guessi to continally wait for libvirtd to start when
    using sysvinit or upstart.  (LP: #1571209)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Mon, 23 May 2016 13:50:22 -0500

libvirt (1.3.4-1ubuntu3) yakkety; urgency=medium

  [ dann frazier ]
  * d/p/u/qemu-Add-virQEMUCapsSupportsGICVersion.patch,
    d/p/u/qemu-Automatically-choose-usable-GIC-version.patch: If no GIC
    was specified for an ARM virt guest, choose a GIC version supported
    by the host. (LP: #1566564)

  [ Serge Hallyn ]
  * libvirt-bin.preinst: on upgrades from prior to 1.3.3-2, also remove the
    service file for the Alias - /etc/systemd/system/libvirtd.service.
    (LP: #1579922)

 -- dann frazier <dannf@ubuntu.com>  Thu, 19 May 2016 08:57:33 -0600

libvirt (1.3.4-1ubuntu2) yakkety; urgency=medium

  * Include installing virtlogd.socket. (LP: #1583009)

 -- Chris J Arges <chris.j.arges@canonical.com>  Wed, 18 May 2016 13:56:08 -0500

libvirt (1.3.4-1ubuntu1) yakkety; urgency=medium

  * Merge 1.3.4-1 from Debian unstable
  * Drop upstream-applied patches:
    - conf-also-mark-implicit-video-as-primary.patch
    - libvirt-socket-fix-group
  * Remaining changes
    - keep libvirt-bin transitional package - until 18.10 (for lts-to-lts
      upgrades)
    - keep (redundant) libvirtd group if it existed on upgrade - until 18.10
      (for lts-to-lts upgrades)
    - keep ubuntu-specific patches
    - ship apport and dnsmasq files
    - enable virbr0
    - ship apparmor from debian/*.  We should push changes upstrema, but
      cannot sync with debian as apparmor profiles must be processed in
      debian/rules for cloud archive.
    - debian/control
      - enable zfs
      - disable libssh2 and sheepdog
      - add libxml-libxml-perl and libcurl4-gnutls-dev
      - enable libnuma-dev on ppc64el (pushed to Debian)
      - update release for conflicts/replaces on libvirt-bin to << 1.3.3-2
    - debian/libvirt-daemon-system.preinst: stop libvirt-bin on certain
      upgrades.
      - Multi-arch-ify.
    - debian/rules: disable selinux and firewalld;  use 'kvm' group; disable
      ssh2, enable zfs and esx;  process apparmor files for older releases;
      copy dnsmasq configuration.
    - debian/tests/control: add extra depends
  * d/p/ubuntu/apibuild-skip-libvirt-common.h: libvirt-common.h is being
    included twice leading to build failures - drop it temporarily.

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Thu, 12 May 2016 12:50:02 -0500

libvirt (1.3.4-1) unstable; urgency=medium

  * Upload to unstable
  * [92f6d72] New upstream version 1.3.4

 -- Guido Günther <agx@sigxcpu.org>  Mon, 02 May 2016 09:58:22 +0200

libvirt (1.3.4~rc2-1) experimental; urgency=medium

  * [ac464fb] Link to the compressed README.Debian (Closes: #822581)
  * [8ad2900] Enable numactl ppc64el suggested by Serge Hallyn
  * [6e52231] New upstream version 1.3.4~rc2

 -- Guido Günther <agx@sigxcpu.org>  Sat, 30 Apr 2016 16:24:53 +0200

libvirt (1.3.4~rc1-1) experimental; urgency=medium

  * Upload to experimental
  * [1dad4b5] New upstream version 1.3.4~rc1
  * [2caeb97] Rediff patches.
    Dropped
      Link-xen-driver-against-libxl.patch: Applied upstream
      qemu-support-virt-2.6-machine-type-on-arm.patch: Fixed upstream
  * [b683ac4] Bump symbol versions
  * [d33c384] Use https vcs-git URL
  * [a2be7db] Bump standards version, no source changes

 -- Guido Günther <agx@sigxcpu.org>  Wed, 27 Apr 2016 16:51:55 +0200

libvirt (1.3.3-2ubuntu2) yakkety; urgency=medium

  * debian/rules: fix paths when removing files which should not end up
    in libvirt-daemon package.

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Thu, 12 May 2016 13:14:17 -0500

libvirt (1.3.3-2ubuntu1) yakkety; urgency=medium

  * Merge 1.3.3-2 from Debian unstable
  * Merge new packaging layout
    - debian/control
      * add libsanlock-dev, dtrace, systemtap-sdt-dev, librados-dev,
        libfuse-dev, augeas-tools to Build-Depends.
      * Drop libcgmanager-dev from Build-Depends.
      * Add libvirt-clients, libvirt-daemon, and libvirt-daemon-system
        packages which replace the now-virtual libvirt-bin package.
      * Drop libvirt0-dbg (is this intential in Debian?)
      * Add libvirt-sanlock package (this should be in universe)
  * Switch to 'libvirt' group, keeping the same gid as 'libvirtd'
    on upgrade.  Keep libvirtd group name on upgrade in case any
    site scripts use it.
  * Enable dtrace
  * Add Debian policy-kit configuration
  * drop ubuntu/9004-libvirtd-group-name.patch as we are switching to group
    'libvirt'
  * Drop obsolete migration scripts:
    - libvirt-migrate-xend-managed-domains
    - libvirt-migrate-qemu-disks
    - libvirt-migrate-qemu-machinetype
  * Remaining changes:
    - keep libvirt-bin transitional package - until 18.10 (for lts-to-lts
      upgrades)
    - keep (redundant) libvirtd group if it existed on upgrade - until 18.10
      (for lts-to-lts upgrades)
    - keep ubuntu-specific patches
    - ship apport and dnsmasq files
    - enable virbr0
    - ship apparmor from debian/*.  We should push changes upstrema, but
      cannot sync with debian as apparmor profiles must be processed in
      debian/rules for cloud archive.
    - debian/control
      - enable zfs
      - disable libssh2 and sheepdog
      - add libxml-libxml-perl and libcurl4-gnutls-dev
      - enable libnuma-dev on ppc64el (pushed to Debian)
      - update release for conflicts/replaces on libvirt-bin to << 1.3.3-2
    - debian/libvirt-daemon-system.preinst: stop libvirt-bin on certain
      upgrades.
      - Multi-arch-ify.
    - debian/rules: disable selinux and firewalld;  use 'kvm' group; disable
      ssh2, enable zfs and esx;  process apparmor files for older releases;
      copy dnsmasq configuration.
    - debian/tests/control: add depends
  * d/p/ubuntu/conf-also-mark-implicit-video-as-primary.patch: upstream patch
    to fix failure to start vms with video not explicitly marked as 'primary'

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Fri, 29 Apr 2016 20:51:48 -0500

libvirt (1.3.3-2) unstable; urgency=medium

  * Upload to unstable
  * [64b60db] qemu: support virt-2.6 machine type on arm (Closes: #820952)

 -- Guido Günther <agx@sigxcpu.org>  Fri, 15 Apr 2016 08:44:14 +0200

libvirt (1.3.3-1) experimental; urgency=medium

  * [c0f0178] New upstream version 1.3.3
  * [96c6ccb] Link-xen-driver-against-libxl.patch: use version applied
    upstream
  * [ee7a90c] Dropped apparmor-monitor-socket-moved.patch: fixed upstream

 -- Guido Günther <agx@sigxcpu.org>  Thu, 07 Apr 2016 09:00:27 +0200

libvirt (1.3.3~rc2-1) experimental; urgency=medium

  * [b6de71c] Make sure the cgroup update notice is also shown in backports
  * [aec93e0] New upstream version 1.3.3~rc2

 -- Guido Günther <agx@sigxcpu.org>  Fri, 01 Apr 2016 15:39:15 +0200

libvirt (1.3.3~rc1-1) experimental; urgency=medium

  [ Philipp Hahn ]
  * [efe13a0] docs: Forward port qemu-bridge-helper docs from Jessie

  [ Guido Günther ]
  * [51c7ba3] New upstream version 1.3.3~rc1
  * [0ca24ff] Add script to bump symbol versions
  * [d028e7a] Bump symbol versions
  * [ecc2a6b] Rediff patches
  * [fb2298c] Link xen driver against libxl to avoid test failure
  * [c972ddb] Drop debug package in favour of the autogenerated dbgsym
    packages
  * [4e4d9ba] apparmor: qemu monitor socket moved so allow this path too

  [ Pino Toscano ]
  * [110db68] Enable policykit and qemu for all architectures (Closes: #819298)

 -- Guido Günther <agx@sigxcpu.org>  Thu, 31 Mar 2016 16:16:38 +0200

libvirt (1.3.1-2) unstable; urgency=medium

  * [d455289] Move bug-presbj to libvirt-daemon-system since libvirt-bin will
    go away
  * [961c93d] Drop libvirt-bin transitional package

 -- Guido Günther <agx@sigxcpu.org>  Fri, 19 Feb 2016 17:29:27 +0100

libvirt (1.3.1-1ubuntu11) yakkety; urgency=medium

  [ Stefan Bader ]
  * Add alias for libvirtd.service into  libvirt-bin.service

  [ Serge Hallyn ]
  * d/p/u/libvirt-bin-service-set-notifyaccess.patch: Set NotifyAccess=all in
    libvirt-bin systemd service file. (LP: #1574566)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Mon, 18 Apr 2016 13:44:15 -0500

libvirt (1.3.1-1ubuntu10) xenial; urgency=medium

  * d/p/u/virt-aa-helper-apparmor-allow-usr-share-AAVMF-too.patch: Allow
    access to /usr/share/AAVMF/** and /usr/share/qemu-efi/** for aarch64 UEFI.
    (LP: #1538882)

 -- William Grant <wgrant@ubuntu.com>  Fri, 15 Apr 2016 12:08:21 +1000

libvirt (1.3.1-1ubuntu9) xenial; urgency=medium

  * Remove the tasks limit on libvirt-bin service (LP: #1567381)
    This should be un-done when it is properly fixed in the code so
    that virtual machines are started in their own pids cgroup.

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Thu, 07 Apr 2016 10:05:01 -0500

libvirt (1.3.1-1ubuntu8) xenial; urgency=medium

  * d/p/u/virt-aa-helper-add-guest-agent-rule.patch: this actually solves
    the qemu guest agent problem for rhel7 vms for me.  (LP: #1393842)
    Also drop the mknod rule which isn't needed.
  * d/apparmor/usr.lib.libvirt.virt-aa-helper: add permission to read under
    /var/run.  This is needed for some openvswitch info. (LP: #1513367)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Fri, 11 Mar 2016 15:01:25 -0800

libvirt (1.3.1-1ubuntu7) xenial; urgency=medium

  * zfs support (LP: #1553023)
    - Cherrypick upstream patches to support zfs
    - debian/rules: build with zfs support
    - debian/control: add zfs as build-dep
  * d/p/u/virt-aa-helper-no-explicity-deny-for-basefiles.patch: don't mark
    readonly files with an explicity deny only because the xml marks it
    as reasonly. (LP: #1554031)
  * fix typo in virt-aa-helper helptext
  * fix d/p/u/preup-virt-aa-helper-better-write-denials-handling.patch to
    not overwrite const memory.

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Thu, 10 Mar 2016 19:25:54 -0800

libvirt (1.3.1-1ubuntu6) xenial; urgency=medium

  * d/apparmor/libvirt-qemu: generalize the qemu-block-extra libs line.
    (LP: #1554761)
  * d/p/ubuntu/virt-aa-helper-add-mknod-for-guest-agent.patch: add mknod
    capability if there is a qemu guest agent. (LP: #1393842)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Wed, 09 Mar 2016 18:45:08 -0800

libvirt (1.3.1-1ubuntu5) xenial; urgency=low

  * Added d/p/ubuntu/preup-virt-aa-helper-better-write-denials-handling.patch
    and refreshed d/p/ubuntu/9034-complete-9p-support accordingly.
  * Added d/p/ubuntu/additional-libvirt-guest-tweaks.patch to fix default
    URI detection when running in a Xen control domain. Also change the
    default config to do parallel shutdown requests (max. 10) and reduce the
    timeout to 2 minutes.

 -- Stefan Bader <stefan.bader@canonical.com>  Wed, 09 Mar 2016 09:13:09 +0100

libvirt (1.3.1-1ubuntu4) xenial; urgency=low

  * d/libvirt-bin.virtlockd.init: Replace by the version I had already
    prepared and was tested (LP: #1547208).
  * d/libvirt-bin.virtlogd.init: Fix up some left-over references to
    libvirtd.
  * d/control: Add provides libvirt-daemon for libvirt-bin (LP: #1551643)

 -- Stefan Bader <stefan.bader@canonical.com>  Tue, 01 Mar 2016 10:58:23 +0100

libvirt (1.3.1-1ubuntu3) xenial; urgency=medium

  * d/libvirt-bin.virtlockd.init: Re-write based on virtlogd init script
    as upstream provided version is not compatible with Ubuntu/Debian.

 -- James Page <james.page@ubuntu.com>  Mon, 29 Feb 2016 22:24:49 +0000

libvirt (1.3.1-1ubuntu2) xenial; urgency=medium

  * No-change rebuild for gnutls transition.

 -- Matthias Klose <doko@ubuntu.com>  Wed, 17 Feb 2016 22:41:20 +0000

libvirt (1.3.1-1ubuntu1) xenial; urgency=low

  * Merge from Debian unstable.  Remaining changes:
    - debian/apparmor/{libvirt-lxc,libvirt-qemu,local-usr.sbin.libvirtd,
      TEMPLATE.lxc,TEMPLATE.qemu,usr.lib.libvirt.virt-aa-helper,
      usr.sbin.libvirtd} Add apparmor profiles.
    - Add debian/libvirt-bin.virtlockd.init based on the upstream version
      src/locking/virtlockd.init.in. This does not seem to get processed
      by the build.
    - debian/control:
      * Add libcurl4-gnutls-dev, libxml-libxml-perl, libcgmanager-dev
      * Add ppc64el to libnuma-dev arches
      * Remove libsanlock-dev, libselinux1-dev, systemtap-sdt-dev
      * Remove python, sheepdog, librados-dev, libfuse-dev
      * Remove libssh2-1-dev, qemu-system-common, augeas-tools
      * Don't build libvirt-clients, libvirt-daemon, libvirt-sanlock packages
      * Keep multiarch changes.
    - Keep debian/{libvirt-bin.apport,libvirt-bin.cron.daily}
    - Keep change d/libvirt0.install and d/libvirt-dev.install that
      adds multi-arch wildcard.
    - d/libvirt-daemon-system.libvirtd.default ->
      d/libvirt-bin.libvirt-bin.default
    - d/libvirt-daemon-system.dirs -> d/libvirt-bin.dirs
      * Add /etc/apparmor.d/{abstractions,disable,force-complain,local}
      * Add /etc/cron.daily
      * Add /usr/share/apport/package-hooks
      * Add /var/log/libvirt/libxl
      * Add /etc/dnsmasq.d-available
      * Remove /usr/share/polkit-1/rules.d/
      * Remove /var/lib/polkit-1/localauthority/10-vendor.d/
    - Keep debian/libvirt-bin.dnsmasq
    - d/libvirt-daemon-system.examples -> d/libvirt-bin.examples
      * Remove debian/build/daemon/libvirtd.policy
      * Drop debian/libvirt-suspendonreboot
    - d/libvirt-daemon-system.libvirtd.init -> d/libvirt-bin.libvirt-bin.init
      * Add provides libvirt-bin
      * Change /etc/default/libvirtd into /etc/default/libvirt-bin
      * Add wait_on_sockfile() and call it during start
    - d/libvirt-daemon-system.install -> d/libvirt-bin.install
      * Add usr/bin/*
      * Add usr/sbin/*
      * Add etc/apparmor.d/*
      * Replace etc/libvirt/{libvirtd,virtlockd,virtlogd}.conf -> etc/libvirt/*
        (since with the clients included there are many more config files)
      * Add usr/share/polkit-1
      * Add usr/lib/libvirt/*
      * Add usr/share/augeas/*
      * Add usr/share/libvirt/*
      * Add usr/share/man/man8/*
      * Add usr/share/apport/package-hooks/source_libvirt.py
      * Add etc/dnsmasq.d-available/libvirt-bin
      * Add etc/profile.d/libvirt-uri.sh
      * Add usr/lib/libvirt
    - d/libvirt-daemon-system.links -> d/libvirt-bin.links
      * Replace libvirt-daemon-system with libvirt-bin for libvirt0
      * Remove libvirt-daemon line
    - Remove d/libvirt-bin.maintscript
    - d/libvirt-clients.manpages -> d/libvirt-bin.manpages
      * Add debian/libvirt-migrate-qemu-disks.1
      * Add debian/libvirt-migrate-qemu-machinetype.1
      * Add debian/libvirt-migrate-xend-managed-domains.1
    - Combined d/libvirt-daemon-system.NEWS and d/libvirt-daemon.NEWS into
      d/libvirt-bin.NEWS
    - Keep d/libvirt-bin.{postinst,postrm,preinst} though they probably could
      be freshly derived from libvirt-daemon counterparts.
      * Added removal of qemu capability cache (found in Debian) to postinst
      * Added reload of virtlogd in postinst (following example of virtlockd)
    - Replace d/libvirt-bin.preinst
    - Add d/libvirt-bin.upstart
    - d/libvirt-daemon-system.virtlogd.init -> d/libvirt-bin.virtlogd.init
    - Remove d/libvirt-clients.install
    - Remove d/libvirt-clients.links
    - Remove d/libvirt-daemon.install
    - Remove d/libvirt-daemon.links
    - d/libvirt-daemon.README.Debian -> d/libvirt-bin.README.Debian
      * Replaced access control section
      * Appended apparmor profile section
      * Appended disk migration section
      * Appended qemu/kvm machine type migration section
    - Remove d/libvirt-daemon-system.{maintscript,postinst,postrm,preinst}
    - Keep libvirt-migrate-qemu-disks (and manpage)
    - Keep libvirt-migrate-qemu-machinetype (and manpage)
    - Keep libvirt-migrate-xend-managed-domains (and manpage)
    - Remove d/libvirt-sanlock.{cron.weekly,links,install}
    - Drop d/libvirt-stop-guests
    - Drop d/libvirt-suspendonreboot (replaced by upstream libvirt-guests)
    - Keep d/libvirt-uri.sh
    - Remove d/polkit/60-libvirt.pkla (and polkit directory)
    - d/tests/control
      - Add build-essential and pkg-config dependencies to build-test
    - debian/rules:
      * Add autoconf stuff (not sure what still really gets used).
      * Use qemu-group kvm instead of libvirt-qemu
      * Add SHEEPDOGCLI environment variable to dh_auto_configure
        override (instead of an DEB_DH_... make variable which no
        longer takes effect).
      * Drop --with-secdriver-apparmor --with-apparmor-profiles from
        WITH_APPARMOR config.
      * Change WITH_FIREWALLD and WITH_SELINUX settings to disabled.
      * Change WITH_DTRACE setting to disabled.
      * Drop DEB_DH_SYSTEMD_START_ARGS_libvirt-bin as it is no longer
        needed after dropping cdbs.
      * Add to override_dh_install section
        - Install apparmor files (and post-processing)
        - Install apport hooks.
        - Install migration tools.
        - Install profile script to autoset URI.
        - Replace package name libvirt-daemon-system with libvirt-bin.
        - Debian now copies libvirt-guests.{init,default} and
          virtlogd.default from upstream source. Copy virtlockd.default
          as well.
        - Rename libvirtd.{socket,service} to libvirt-bin.{socket,service}
        - Change dh_systemd_start to use virtlo{g,ck}d.socket only (the
          services are supposed to be started by using the sockets.
        - Move libs and pkgconfig under multiarch directory.
      * Modify override_dh_auto_clean
        - Replace package name libvirt-daemon-system with libvirt-bin
        - Delete upstream files which were copied into debian/.
      * Add override_dh_gencontrol section which conditionally adds
        conflicts on apparmor.
      * Add override_dh_makeshlibs section to pass version info for
        libvirt0.
  * Dropped patches:
    - ubuntu/virt-aa-helper-handle-ovmf (upstream added ovmf paths to
      restricted_rw)
  * Refreshed patches:
    - refreshed d/p/ubuntu/9034-complete-9p-support
  * New patches
    - d/ubuntu/libvirt-guests-exclude-dom0.patch
    - d/ubuntu/libxl-no-dm-check.patch
    - d/ubuntu/libxl-fix-test-data.patch
    - d/ubuntu/Debianize-virtlogd-service.patch
    - d/ubuntu/Debianize-virtlockd-init.patch
    - d/ubuntu/switch-service-files-to-libvirt-bin.patch
    - d/ubuntu/libvirt-socket-fix-group.patch

 -- Stefan Bader <stefan.bader@canonical.com>  Fri, 12 Feb 2016 14:46:21 +0100

libvirt (1.3.1-1) unstable; urgency=medium

  [ Guido Günther ]
  * [4f04c2c] New upstream version 1.3.1

  [ Simon McVittie ]
  * [a0b3e59] Add a patch to make virt-aa-helper allow reading the new location of OVMF firmware
    (Closes: #812069)

 -- Guido Günther <agx@sigxcpu.org>  Fri, 22 Jan 2016 13:37:18 +0100

libvirt (1.3.1~rc2-1) experimental; urgency=medium

  * [229fb59] New upstream version 1.3.1~rc2
  * [cdf443a] Rediff patches

 -- Guido Günther <agx@sigxcpu.org>  Fri, 15 Jan 2016 11:58:51 +0100

libvirt (1.3.1~rc1-1) experimental; urgency=medium

  * [369ed73] New upstream version 1.3.1~rc1
  * [30da6b1] Drop patches applied upstream.
      CVE-2015-5313-storage-don-t-allow-in-filesystem-volume-na.patch
      test-qemuxml2argv-Mock-virMemoryMaxValue-to-remove-32-64-.patch
  * [2580afb] Bump symbol versions
  * [d7010ed] Use canonical VCS URL.
    Thanks Lintian

 -- Guido Günther <agx@sigxcpu.org>  Wed, 13 Jan 2016 22:32:09 +0100

libvirt (1.3.0-2) unstable; urgency=medium

  * [836190e] Avoid duplicates in package descriptions. Thanks lintian
  * [9f29e58] Remove unused pycompat
  * [e89c059] test: qemuxml2argv: Mock virMemoryMaxValue to remove 32/64 bit
    difference to fix the testsuite on i386

 -- Guido Günther <agx@sigxcpu.org>  Wed, 06 Jan 2016 00:04:12 +0100

libvirt (1.3.0-1) unstable; urgency=medium

  * Upload to unstable
  * [15df303] New upstream version 1.3.0
  * [4fb53c7] CVE-2015-5313: storage: don't allow '/' in filesystem volume names

 -- Guido Günther <agx@sigxcpu.org>  Thu, 17 Dec 2015 08:16:31 +0100

libvirt (1.3.0~rc2-1) experimental; urgency=medium

  * [6854045] New upstream version 1.3.0~rc2

 -- Guido Günther <agx@sigxcpu.org>  Tue, 08 Dec 2015 21:25:40 +0100

libvirt (1.3.0~rc1-1) experimental; urgency=medium

  * [ae8211f] New upstream version 1.3.0~rc1
  * [2721bee] Run build-tests with libvirt-dev only to make sure we have
    everything in the dev packages
  * [f4cbf4a] Drop patches applied upstream:
      Disable-service-timeout-for-libvirt-guests.patch
      qemu-Handle-default-IDE-controller-on-other-machine-types.patch
  * [bf1a167] Bump symbol versions
  * [f8eb83b] Create dir for doc generation and depend on xsltproc for it
  * [9d46b57] Don't ship virt-admin yet, it's still in development upstream
  * [71d0f8b] Ship virtlogd
  * [02cd930] Override dh_install-arch instead of dh_install (Closes: #806064)

 -- Guido Günther <agx@sigxcpu.org>  Fri, 04 Dec 2015 17:12:53 +0100

libvirt (1.2.21-2ubuntu10) xenial; urgency=medium

  * Multiarchify the library packages.

 -- Matthias Klose <doko@ubuntu.com>  Thu, 28 Jan 2016 16:33:15 +0100

libvirt (1.2.21-2ubuntu9) xenial; urgency=medium

  * debian/rules: Disable cdbs' implicitly generated dh_systemd_start calls.
    We already call it explicitly with the right options, calling it again
    with the default options stops libvirt-guests during upgrades.
    (LP: #1533839)

 -- Martin Pitt <martin.pitt@ubuntu.com>  Mon, 18 Jan 2016 09:10:21 +0100

libvirt (1.2.21-2ubuntu8) xenial; urgency=low

  * d/libvirt-stop-guests: Skip Domain-0 on guest shutdown. Newer
    versions of libvirt will include dom0 in the list of running domains
    (with libxl). This special domain must be ignored.

 -- Stefan Bader <stefan.bader@canonical.com>  Thu, 14 Jan 2016 11:35:39 +0100

libvirt (1.2.21-2ubuntu7) xenial; urgency=medium

  * d/apparmor/libvirt-qemu: silence denial to shm/lttng file since shm
    mountpoint has moved (LP: #1529319)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Mon, 11 Jan 2016 11:55:28 -0800

libvirt (1.2.21-2ubuntu6) xenial; urgency=medium

  * d/apparmor/libvirt-qemu: add r access to max_mem_regions vhost module
    paramater (LP: #1531564)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Mon, 11 Jan 2016 11:33:02 -0800

libvirt (1.2.21-2ubuntu5) xenial; urgency=medium

  * SECURITY UPDATE: ACL bypass using storage pool directory traversal
    - debian/patches/CVE-2015-5313.patch: filter filesystem volume names in
      src/storage/storage_backend_fs.c.
    - CVE-2015-5313

 -- Marc Deslauriers <marc.deslauriers@ubuntu.com>  Fri, 08 Jan 2016 10:32:17 -0500

libvirt (1.2.21-2ubuntu4) xenial; urgency=medium

  * Revert Ubuntu-specific patch to build-depend on libsystemd-daemon-dev
    instead of libsystemd-dev; libsystemd-daemon-dev is no longer built from
    systemd source so we want libsystemd-dev.

 -- Colin Watson <cjwatson@ubuntu.com>  Tue, 29 Dec 2015 00:31:16 +0000

libvirt (1.2.21-2ubuntu3) xenial; urgency=medium

  * Fix build-test autopkgtest: it now expects to run with the current
    directory set to the root of the unpacked source package, writes to
    $ADTTMP rather than to the source package, and declares dependencies on
    build-essential and pkg-config.

 -- Colin Watson <cjwatson@ubuntu.com>  Mon, 28 Dec 2015 05:25:54 +0000

libvirt (1.2.21-2ubuntu2) xenial; urgency=medium

  * d/apparmor/libvirt-qemu: add permission to the systemd-mounted hugepages
    path.  (LP: #1524737)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Thu, 17 Dec 2015 10:49:18 -0800

libvirt (1.2.21-2ubuntu1) xenial; urgency=medium

  * Merge from Debian unstable.  Remaining changes:
    - debian/apparmor/{libvirt-lxc,libvirt-qemu,local-usr.sbin.libvirtd,
      TEMPLATE.lxc,TEMPLATE.qemu,usr.lib.libvirt.virt-aa-helper,
      usr.sbin.libvirtd} Add apparmor profiles.
    - debian/bug-presubj: removed
    - debian/control:
      - add cdbs, dh-autoreconf, libcurl4-gnutls-dev
      - add libxml-libxml-perl, libhal-dev
      - swap open-iscsi to open-iscsi-utils
      - Enable numa support on ppc64el.
      - remove libsanlock-dev, libselinux1-dev
      - use libsystemd-daemon-dev instead of libsystemd-dev
      - remove systemtap-sdt-dev, python, sheepdog, librados-dev, libfuse-dev
      - remove libssh2-1, augeas-tools
      - add libcgmanager-dev, xsltproc
      - remove Vcs-Git
      - adjust X-Python-Version > 2.7
      - don't build libvirt-clients, libvirt-daemon, libvirt-sanlock packages
    - keep debian/{libvirt-bin.apport,libvirt-bin.cron.daily}
    - debian/libvirt-daemon.* has been mostly renamed to debian/libvirt-bin.*
    - add upstart script for libvirt-bin
    - debian/*.{links,maintscript} files not added
    - keep ubuntu maintscript modifications
    - debian/libvirt-sanlock* not merged
    - debian/libvirt-clients* not merged
    - keep debian/{libvirt-migrate-qemu-disks.*,
      libvirt-migrate-qemu-machinetype.*,
      libvirt-migrate-xend-managed-domains.*}
    - keep debian/libvirt-suspendonreboot
    - keep debian/libvirt-uri.sh
    - debian/polkit/* not added
    - debian/README.Debian:
      - add 'Apparmor Profile' section
      - add 'Disk migration' section
    - debian/rules:
      - add cdbs and autoconf stuff
      - don't build WITH_SANLOCK, WITH_INIT_SCRIPT, WITH_SYSTEMD, WITH_FIREWALLD
        WITH_SELINUX
      - use qemu-group kvm instead of libvirt-qemu
      - set DEB_DH_INSTALLINIT_ARGS to '--upstart-only'
      - remove auto_test section
      - add build/libvirt-bin:: section to install
        - apparmor files
        - apport hooks
        - libvirt-migrate-qemu-disks
      - use clean:: instead of dh_*clean
    - Move ubuntu specific patches to 'debian/patches/ubuntu'
  * Dropped patches:
    - drop 9033-apparmor-use-TEMPLATE.qemu-for-kvm.patch (upstream 16d2bc8b)
    - drop 9036-util-prepare-uri-for-libxml2-2.9.2.patch (upstream 8f17d0ea)
    - drop 9040-virt-aa-helper-add-unix-channels (upstream 03d7462d)
    - drop CVE-2014-3633.patch (upstream 3e745e8f)
    - drop CVE-2014-3657.patch (upstream fc22b2e7)
    - drop CVE-2014-7823.patch (upstream b1674ad5)
    - drop Don-t-fail-if-we-can-t-setup-avahi.patch (dropped in debian)
    - drop add-ppc64le-support.patch (upstream 9265fd19, addce06c, 1e911742,
      bdbe723f, 5e4f49ab)
    - drop blockdev-migration patches (upstream 1049a8d8, 9c5efd1a, cb7297c1,
      a5250449, e9ef8565, 952907f5, 5eb03b6e, 93a19e28, a4e92f9e, de0aeafe)
    - storage-allow-zero-capacity-with-non-backing-file-to.patch,
      tests-add-vol-qcow2-zerocapacity-test-to-storagevolx.patch
      (upstream 0bcda653, b8cc0cc5)
    - ubuntu/fix-ubuntu-xen-qemu-dm-path.patch dropped in favor of
      Allow-xen-toolstack-to-find-it-s-binaries.patch
    - drop ubuntu-libxl-Implement-basic-video-device-selection.patch
      (upstream 1298daca)
    - remove dont-include-non-migrateable-features-in-host-model
      (upstream and not included in series)
    - remove upstream-libxl-Allow-libxl-to-find-pygrub-binary.patch
      (upstream and not included in series)

 -- Chris J Arges <chris.j.arges@canonical.com>  Wed, 02 Dec 2015 12:06:09 -0600

libvirt (1.2.21-2) unstable; urgency=medium

  * [014a0c7] Add a build test to verify that the we can link against libvirt
  * [37efced] Disable service timeout for libvirt-guests (Closes: #803714)
  * [ae65b71] qemu: Handle default IDE controller on other machine types as well
    (Closes: #805189)

 -- Guido Günther <agx@sigxcpu.org>  Mon, 23 Nov 2015 18:00:59 +0100

libvirt (1.2.21-1) unstable; urgency=medium

  * [6e075d2] New upstream version 1.2.21

 -- Guido Günther <agx@sigxcpu.org>  Fri, 06 Nov 2015 06:31:58 +0100

libvirt (1.2.21~rc1-1) experimental; urgency=medium

  * Upload to experimental
  * [42946f7] New upstream version 1.2.21~rc1
  * [6b46089] Update Vcs-Browser URL
  * [789630d] Bump symbol versions
  * [af1af23] Rediff patches

 -- Guido Günther <agx@sigxcpu.org>  Sat, 31 Oct 2015 23:58:43 +0100

libvirt (1.2.20-1) unstable; urgency=medium

  * [6eb4fb6] Don't use current user, hostname and build time but parse
    debian/changelog instead to work towards reproducibility.
    Thanks to Ben Hutchings for pointing this out
  * [3c9129d] Drop Disable-tests-affected-by-broken-libxml2.patch we have a
    fixed libxml2 in unstable again.
  * [96ec9e5] Use daemon log facility for journald (Closes: #799633)
  * [a4989de] New upstream version 1.2.20
  * [8109247] Bump symbol versions
  * [c0ad561] Rediff patches.

 -- Guido Günther <agx@sigxcpu.org>  Wed, 14 Oct 2015 17:53:08 +0200

libvirt (1.2.19-1) unstable; urgency=medium

  * [8264435] New upstream version 1.2.19
  * [0061284] Rediff patches
  * [4dcd1f0] Drop apparmor-Adjust-path-to-domain-monitor-socket.patch applied
    upstream
  * [ec4de6a] Move README.Debian to libvirt-daemon
    libvirt-bin is a transitional package.

 -- Guido Günther <agx@sigxcpu.org>  Wed, 02 Sep 2015 19:10:03 +0200

libvirt (1.2.19~rc1-1) experimental; urgency=medium

  * [6b88e35] New upstream version 1.2.19~rc1
  * [f525b78] Remove doc generation workaround introduced in
    659882f5a236a901fdb090a88af20eed4b2642c7. We fixed this properly upstream.
  * [a94f6c2] Use qemu-bridge-helper autodetection that we implemented
    upstream instead of hardcoding it.
  * [6fe9265] Don't hardcode private libvirt-admin symbols but use the
    autogeneration we implemented upstream.
  * [761db17] Rediff patches.
    Dropped virNetSocketCheckProtocols-handle-EAI_NONAME-as-IPv6.patch:
    applied upstram
  * [4569b2a] Bump symbol versions
  * [ac3f8d3] Disable tests affected by broken libxml2
  * [08f2ffa] apparmor: Adjust path to domain monitor socket

 -- Guido Günther <agx@sigxcpu.org>  Sat, 29 Aug 2015 18:33:06 +0200

libvirt (1.2.18-2) unstable; urgency=medium

  * [54daa55] Add Breaks for older systemd.
    These make us end up in the wrong parts of the cgroup hierarchy so we
    won't find our lxc instances after restart. This could likely be fixed
    in libvirt but forcing the newer version at least makes us not break
    running containers. (Closes: #774237)
  * [2caf1bb] Fix path to qemu-bridge-helper (Closes: #790935)
  * [77dcc1a] README.Debian: remove xend bits were using libxl now
  * [1b01f3f] Enable xen on armhf and amd64. Based on a patch by Yann
    Soubeyrand (Closes: #795516)

 -- Guido Günther <agx@sigxcpu.org>  Sun, 23 Aug 2015 17:59:27 +0200

libvirt (1.2.18-1) experimental; urgency=medium

  [ Guido Günther ]
  * [18ffe0c] New upstream version 1.2.18
  * [56eac6e] New upstream version 1.2.17~rc1
  * [c656180,af739f0] Bump symbol versions
  * [dd37716,88466c7] Rediff patches
  * [9135e2e] Use upstreams polkit rule.
    As of 1.2.16 upstream ships a Polkit rule like Debian does.
  * [9958a7f] Use systemctl is-active to check if virtlockd is running.
    This is less heavyweight as status.
    Thanks to Michael Biebl <biebl@debian.org> (Closes: #787973)
  * [6620081] Drop Don-t-fail-if-we-can-t-setup-avahi.patch
    not needed anymore
  * [aa77bd8] Allow access to libnl-3 config files (Closes: #786650)
  * [fda50ec] Use dh-autoreconf
  * [659882f] Create dir for doc generation and depend on xsltproc for it
  * [e894ae7] virNetSocketCheckProtocols: handle EAI_NONAME as IPv6 unavailable.
  * [b1467e1] Add libvirt-admin shared library

  [ Felix Geyer ]
  * [2f59533] Use dh-apparmor.
    This makes sure we load the profiles after installing the package
    (Closes: #792426)

  [ Michael Biebl ]
  * [5409dc1] Transition to libsystemd (Closes: #779775)

 -- Guido Günther <agx@sigxcpu.org>  Tue, 11 Aug 2015 21:19:43 +0200

libvirt (1.2.16-2ubuntu14) xenial; urgency=medium

  * debian/apparmor/libvirt-qemu: add a bunch of newly available qemu-*
    architecture binaries. (LP: #1519030)

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Mon, 23 Nov 2015 17:42:52 +0000

libvirt (1.2.16-2ubuntu13) xenial; urgency=medium

  * debian/control: switch ebtables from Recommends to Depends or default
    configuration network doesn't get created. (LP: #1505576)

 -- Marc Deslauriers <marc.deslauriers@ubuntu.com>  Thu, 05 Nov 2015 15:14:04 -0600

libvirt (1.2.16-2ubuntu12) xenial; urgency=medium

  * virt-aa-helper apparmor policy:  add 'network inet6' (LP: #1511830)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Mon, 02 Nov 2015 11:49:56 -0600

libvirt (1.2.16-2ubuntu11) wily; urgency=medium

  * Fix the preinst and postinst: the check for whether libvirt-bin was
    running was wrong for upstart systems, but we don't need to do that
    anyway - just stop libvirt-bin unconditionally.  (LP: #1499199)
  * libvirt-guests.service: fix libvirtd.service -> libvirt-bin.service

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Sun, 27 Sep 2015 15:47:08 +0000

libvirt (1.2.16-2ubuntu10) wily; urgency=medium

  * Add qemu-block-extra libraries to libvirt apparmor profile (LP: #1495895)

 -- Ryan Harper <ryan.harper@canonical.com>  Wed, 16 Sep 2015 13:20:48 -0500

libvirt (1.2.16-2ubuntu9) wily; urgency=medium

  * Add upstream patches implementing a '--migrate-disks' option to virsh
    migrate to specify block devices to migrate.  (LP: #1398999)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Fri, 04 Sep 2015 09:29:52 -0500

libvirt (1.2.16-2ubuntu8) wily; urgency=medium

  * Support OVMF images in virt-aa-helper.  (LP: #1483071)
  * Fix the libvirt-bin.preinst to not stop libvirt-bin on upgrade
    from 1.2.16-2ubuntu7.

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Fri, 14 Aug 2015 07:34:30 -0500

libvirt (1.2.16-2ubuntu7) wily; urgency=medium

  * Stop libvirt-bin at pre-inst if upgrading from a non-systemd version,
    restart at postinst.  (This can be removed after 16.04 release)
  * Commonize stopping of vms in upstart/systemd.

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Tue, 11 Aug 2015 17:40:36 -0500

libvirt (1.2.16-2ubuntu6) wily; urgency=medium

  * Add systemd units and libvirt-stop-guests script to stop VMs before
    a host completes shutdown  (LP: #1480440)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Tue, 11 Aug 2015 15:42:29 -0500

libvirt (1.2.16-2ubuntu5) wily; urgency=medium

  * debian/control changes:
    - Replace module-init-tools with kmod
  * debian/tests:
    - add autopkgtests from Debian

 -- Chris J Arges <chris.j.arges@canonical.com>  Fri, 10 Jul 2015 14:15:48 -0500

libvirt (1.2.16-2ubuntu4) wily; urgency=medium

  * d/p/{storage-allow-zero-capacity-with-non-backing-file-to.patch,
    tests-add-vol-qcow2-zerocapacity-test-to-storagevolx.patch} added to address
    (LP: #1459748). Allow zero capacity storage creation with non-backing file.

 -- Chris J Arges <chris.j.arges@canonical.com>  Fri, 10 Jul 2015 12:50:50 -0500

libvirt (1.2.16-2ubuntu3) wily; urgency=medium

  * debian/apparmor/libvirt-qemu:
    allow serial console backed by pts chardev (LP: #1342083) 

 -- Chris J Arges <chris.j.arges@canonical.com>  Tue, 07 Jul 2015 16:38:17 -0500

libvirt (1.2.16-2ubuntu2) wily; urgency=low

  [ Chris J Arges ]
  * Merge from Debian unstable.  Remaining changes:
    - debian/apparmor/{libvirt-lxc,libvirt-qemu,local-usr.sbin.libvirtd,
      TEMPLATE.lxc,TEMPLATE.qemu,usr.lib.libvirt.virt-aa-helper,
      usr.sbin.libvirtd} Add apparmor profiles.
    - debian/bug-presubj: removed
    - debian/control:
      - add cdbs, dh-autoreconf, libcurl4-gnutls-dev
      - add libxml-libxml-perl, libhal-dev
      - swap open-iscsi to open-iscsi-utils
      - Enable numa support on ppc64 and ppc64el.
      - remove libsanlock-dev, libselinux1-dev, libsystemd-daemon-dev
      - remove systemtap-sdt-dev, python, sheepdog, librados-dev, libfuse-dev
      - remove libssh2-1, augeas-tools
      - add libcgmanager-dev, xsltproc
      - remove Vcs-Git
      - adjust X-Python-Version > 2.7
      - don't build libvirt-clients, libvirt-daemon, libvirt-sanlock packages
    * keep debian/{libvirt-bin.apport,libvirt-bin.cron.daily}
    * debian/libvirt-daemon.* has been mostly renamed to debian/libvirt-bin.*
    * add upstart script for libvirt-bin
    * debian/*.links files not added
    * debian/libvirt-sanlock* not merged
    * debian/libvirt-clients* not merged
    * debian smoke tests not merged
    * keep debian/{libvirt-migrate-qemu-disks.*,
      libvirt-migrate-qemu-machinetype.*,
      libvirt-migrate-xend-managed-domains.*}
    * keep debian/libvirt-suspendonreboot
    * keep debian/libvirt-uri.sh
    * Don't apply the following patches:
      - d/p/Debianize-libvirt-guests.patch
      - d/p/Debianize-systemd-service-files.patch
      - d/p/debian/Debianize-virtlockd.patch
      - d/p/fix-Debian-specific-path-to-hvm-loader.patch
      - d/p/Disable-gnulib-s-test-nonplocking-pipe.sh.patch
      - d/p/patch-qemuMonitorTextGetMigrationStatus-to-intercept.patch
    * debian/polkit/* not added
    * debian/README.Debian:
      - add 'Apparmor Profile' section
      - add 'Disk migration' section
    * debian/rules:
      - add cdbs and autoconf stuff
      - don't build WITH_SANLOCK, WITH_INIT_SCRIPT, WITH_SYSTEMD, WITH_FIREWALLD
        WITH_SELINUX
      - use qemu-group kvm instead of libvirt-qemu
      - set DEB_DH_INSTALLINIT_ARGS to '--upstart-only'
      - remove auto_test section
      - add build/libvirt-bin:: section to install
        - apparmor files
        - apport hooks
        - libvirt-migrate-qemu-disks
      - use clean:: instead of dh_*clean

  [ Chuck Short ]
    + Rediffed:                                                                 
     - debian/patches/storage-default-permission-mode-to-0711
     - debian/patches/ubuntu_machine_type.patch
  * debian/libvirt-bin.init: Adjust avahi to avahi-daemon (LP: #1453572)

  [ Serge Hallyn ]
  * 9040-virt-aa-helper-add-unix-channels.patch: add support for unix
    sockets for serials.  (LP: #1015154)

 -- Chris J Arges <chris.j.arges@canonical.com>  Wed, 01 Jul 2015 13:33:40 -0500

libvirt (1.2.16-2) unstable; urgency=medium

  * [0266267] Build-Depend and suggest nfs-common
    for showmount
    Thanks to Laurent Bigonville (Closes: #787783)
  * [a48c783] Build depend on libpolkit-gobject-1-dev
    to properly detect uid support in pkcheck.
    Thanks to Laurent Bigonville (Closes: #787782)
  * [3d0fe35] Enable firewalld support.
    Thanks to Laurent Bigonville (Closes: #714372)

 -- Guido Günther <agx@sigxcpu.org>  Fri, 05 Jun 2015 10:12:28 +0200

libvirt (1.2.16-1) unstable; urgency=medium

  * Upload to unstabl
  * [50e9055] New upstream version 1.2.16

 -- Guido Günther <agx@sigxcpu.org>  Wed, 03 Jun 2015 08:44:53 +0200

libvirt (1.2.16~rc2-3) experimental; urgency=medium

  * [6d22215] Fix one more libxl leftover

 -- Guido Günther <agx@sigxcpu.org>  Mon, 01 Jun 2015 08:49:50 +0200

libvirt (1.2.16~rc2-2) experimental; urgency=medium

  * [132348d] Only install libxl configuratin on hosts that support XEN

 -- Guido Günther <agx@sigxcpu.org>  Sat, 30 May 2015 13:39:22 +0200

libvirt (1.2.16~rc2-1) experimental; urgency=medium

  * [540f826] New upstream version 1.2.16~rc2

 -- Guido Günther <agx@sigxcpu.org>  Fri, 29 May 2015 17:26:00 +0200

libvirt (1.2.16~rc1-1) experimental; urgency=medium

  * [d17b3cb] Add libxl configuration files
  * [24520fd] Update gbp.conf for experimental
  * [29c488b] New upstream version 1.2.16~rc1
  * [281585c] Rediff patches.
    Dropped patches fixed upstream:
        caps-Fix-regression-defaulting-to-host-arch.patch
  * [5e4d9b7] Bump symbol versions

 -- Guido Günther <agx@sigxcpu.org>  Fri, 29 May 2015 10:43:34 +0200

libvirt (1.2.15-2) unstable; urgency=medium

  * Upload to unstable
  * [2b23d7f] Add missing "Testsuite: autopkgtest"
  * [57a9e63] caps: Fix regression defaulting to host arch

 -- Guido Günther <agx@sigxcpu.org>  Fri, 08 May 2015 18:27:06 +0200

libvirt (1.2.15-1) experimental; urgency=medium

  * [bf201a6] New upstream version 1.2.15
  * [84ae1fc] Switch gbp.conf to sid

 -- Guido Günther <agx@sigxcpu.org>  Tue, 05 May 2015 19:26:21 +0200

libvirt (1.2.15-0ubuntu4) wily; urgency=medium

  * Add post-start to upstart (/etc/init/libvirt-bin.conf) and
    sysv (/etc/init.d/libvirt-bin) jobs to ensure libvirt-sock
    created before up (LP: #1455608)

 -- Edward Hope-Morley <edward.hope-morley@canonical.com>  Thu, 28 May 2015 16:06:44 +0100

libvirt (1.2.15-0ubuntu3) wily; urgency=low

  * d/p/ubuntu-libxl-qemu-path.patch: Set correct path for qemu binary
    for new configs and convert old configs using qemu-dm.
    (LP: #1459600)
  * d/p/ubuntu-libxl-hvmloader-path.patch: Get Xen version from dpkg-query
    at compile time and set LIBXL_FIRMWARE_DIR as long as libxen-dev does
    not provide a xenlight.pc file. Use that directory to update existing
    configs.
    (LP: #1459603)

 -- Stefan Bader <stefan.bader@canonical.com>  Thu, 28 May 2015 12:21:23 +0200

libvirt (1.2.15-0ubuntu2) wily; urgency=medium

  * debian/apparmor/libvirt-qemu: add /sys read accesses needed by newer
    qemu: /sys/devices/system/node/, /sys/devices/system/cpu/ and
    /sys/devices/system/node/node[0-9]*/meminfo

 -- Jamie Strandboge <jamie@ubuntu.com>  Wed, 13 May 2015 16:41:54 -0500

libvirt (1.2.15-0ubuntu1) wily; urgency=medium

  * New upstream release:
    + Dropped patches:
      - d/p/add-cgmanager-support.patch
      - d/p/cgmanager-mutex
      - d/p/cgm-ignore-machined-failure
      - d/p/9020-lp545795.patch
      - d/pa/ubuntu-libxl-qemu-nopath.patch
      - d/p/ubuntu-libxl-migrate-dm.patch
      - d/p9037-virt-aa-helper-add-unix-channels-esp-for-qemu-guest-.patch

 -- Chuck Short <zulcss@ubuntu.com>  Thu, 07 May 2015 10:27:49 -0400

libvirt (1.2.15~rc2-1) experimental; urgency=medium

  * [852e3c3] New upstream version 1.2.15~rc2

 -- Guido Günther <agx@sigxcpu.org>  Sun, 03 May 2015 15:14:40 +0200

libvirt (1.2.15~rc1-1) experimental; urgency=medium

  * [a544fac] New upstream version 1.2.15~rc1
  * [a40d4d3] Bump symbol versions
  * [7d4f947] Rediff patches
  * [39deec1] Update gbp.conf for experimental

 -- Guido Günther <agx@sigxcpu.org>  Thu, 30 Apr 2015 08:41:46 +0200

libvirt (1.2.14-3) unstable; urgency=medium

  * Upload to unstable

 -- Guido Günther <agx@sigxcpu.org>  Mon, 27 Apr 2015 11:19:39 +0200

libvirt (1.2.14-2) experimental; urgency=medium

  * [51ba06c] Allow testsuite to output to stderr
    since we run the script with -x.

 -- Guido Günther <agx@sigxcpu.org>  Mon, 13 Apr 2015 13:17:19 +0200

libvirt (1.2.14-1) experimental; urgency=medium

  * [0a436be] New upstream version 1.2.14

 -- Guido Günther <agx@sigxcpu.org>  Fri, 03 Apr 2015 13:11:20 +0200

libvirt (1.2.14~rc2-1) experimental; urgency=medium

  * [46cb100] New upstream version 1.2.14-rc2
  * [e4fcc35] Bump symbol versions
  * [e55a86f] Rediff patches

 -- Guido Günther <agx@sigxcpu.org>  Wed, 01 Apr 2015 21:27:52 +0200

libvirt (1.2.13-1) experimental; urgency=medium

  * [5a5a046] New upstream version 1.2.13
  * [6c65940] Bump symbol versions
  * [5755363] Rediff patches
    This reverts commit 35a256363958bd452cafdfcadec9626b2ce6df45.

 -- Guido Günther <agx@sigxcpu.org>  Tue, 10 Mar 2015 00:01:52 +0100

libvirt (1.2.12-1) experimental; urgency=medium

  * [06f42f7] New upstream version 1.2.12
  * [26b55b3] Rediff patches

 -- Guido Günther <agx@sigxcpu.org>  Thu, 29 Jan 2015 11:02:21 +0100

libvirt (1.2.12-0ubuntu12) vivid; urgency=low

  * Add profile script to automatically set the default URI based on
    the currently running hyperisor (Xen or KVM/Qemu).
    (LP: #1334749)

 -- Stefan Bader <stefan.bader@canonical.com>  Tue, 14 Apr 2015 09:02:52 -0500

libvirt (1.2.12-0ubuntu11) vivid; urgency=medium

  * create /var/lib/libvirt/qemu/channel/target (LP: #1393842)
    - libvirt-bin.dirs: add /var/lib/libvirt/qemu/channel/target
    - libvirt-bin.postinst: chown target directory to libvirt-qemu:kvm so
      qemu can create the unix sockets.

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Thu, 09 Apr 2015 10:40:05 -0500

libvirt (1.2.12-0ubuntu10) vivid; urgency=medium

  * Fix previous patch to ignore any abstract unix domain sockets
  * Update the cgmanager patch so that container start and stop work under
    systemd.  (LP: #1438730)  In 15.10 we will drop the cgmanager patch(es).

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Wed, 08 Apr 2015 10:58:04 -0500

libvirt (1.2.12-0ubuntu9) vivid; urgency=medium

  * 9037-virt-aa-helper-add-unix-channels-esp-for-qemu-guest-.patch: Allow
    libvirt domains to start when using qemu guest agent.  (LP: #1393842)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Mon, 06 Apr 2015 11:14:03 -0500

libvirt (1.2.12-0ubuntu8) vivid; urgency=medium

  * silence denial of attempted reads of lttng files (LP: #1432644)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Fri, 27 Mar 2015 21:36:27 -0500

libvirt (1.2.12-0ubuntu7) vivid; urgency=low

  * No-change rebuild to pull in libxen-dev 4.5

 -- Stefan Bader <stefan.bader@canonical.com>  Wed, 25 Feb 2015 18:31:16 +0100

libvirt (1.2.12-0ubuntu6) vivid; urgency=low

  * Fix xml validation for Xen by allowing non-absolute path values
    in loader and bootloader elements (LP: #1425497).
  * Fix up Xen emulator in old configurations and for new definitions to
    point to /usr/bin/qemu-system-i386 (LP: #1425497).

 -- Stefan Bader <stefan.bader@canonical.com>  Fri, 13 Feb 2015 17:57:27 +0100

libvirt (1.2.12-0ubuntu5) vivid; urgency=medium

  * Remove smoser-ppc64le-is-ppc64.patch - the problem will be solved by the
    qemu-system-ppcle symlink in qemu-system-ppc package.

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Thu, 12 Feb 2015 15:38:39 -0600

libvirt (1.2.12-0ubuntu4) vivid; urgency=medium

  * libvirt-qemu: allow kvm script on ppc to execute uname

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Thu, 12 Feb 2015 14:05:14 -0600

libvirt (1.2.12-0ubuntu3) vivid; urgency=medium

  * Apply patch from smoser to make libvirt on ppc64le functional.
    (LP: #1418221)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Mon, 09 Feb 2015 12:09:49 -0600

libvirt (1.2.12-0ubuntu2) vivid; urgency=medium

  * debian/control: Use libxml-libxml-perl instead of libxml-xpath-perl. 
  * debian/patches/docs-remove-xpath.patch: Use libxml instead of XPath.

 -- Chuck Short <zulcss@ubuntu.com>  Fri, 06 Feb 2015 11:28:15 -0500

libvirt (1.2.12-0ubuntu1) vivid; urgency=medium

  * New upstream release
  * Rediffed patches:
    - debian/patches/9030-create-socket-dir
    - debian/patches/add-cgmanager-support.patch
    - debian/patches/cgroups-ignore-systemd-failure
  * Dropped patches:
    - debian/patches/ubuntu-libxl-Implement-basic-video-device-selection.patch
    - debian/patches/ubuntu-libxl-Fix-up-VRAM-to-minimum-requirements.patch
    - debian/patches/9033-apparmor-use-TEMPLATE.qemu-for-kvm.patch
    - debian/patches/-CVE-2014-3633.patch
    - debian/patches/dont-include-non-migrateable-features-in-host-model
    - debian/patches/9036-util-prepare-uri-for-libxml2-2.9.2.patch
    - debian/patches/CVE-2014-3657.patch
    - debian/patches/CVE-2014-7823.patch
    - debian/patches/add-ppc64le-support.patch
    - debian/patches/upstream-libxl-Allow-libxl-to-find-pygrub-binary.patch
  * debian/control: Add libxml-xpath-perl and xsltproc to dependencies
  * debian/patches/skip-vircgrouptest.patch: Skip cgroup tests.
  * debian/patches/disable-network-test.patch: Skip network tests

 -- Chuck Short <zulcss@ubuntu.com>  Tue, 03 Feb 2015 13:12:36 -0500

libvirt (1.2.12~rc2-1) experimental; urgency=medium

  * [67f2b22] New upstream version 1.2.12~rc2
    (Closes: #776065)

 -- Guido Günther <agx@sigxcpu.org>  Sun, 25 Jan 2015 13:02:59 +0100

libvirt (1.2.12~rc1-1) experimental; urgency=medium

  * [994d31d] Bump standards version to 3.9.6
    no changes required
  * [7b59a26] New upstream version 1.2.12~rc1
  * [0a755e3] Dropped patches applied upstram.
        lxc-Don-t-crash-on-NULL-ifname_guest_actual.patch
        lxc-Move-setting-ifname_guest_actual-to-virLXCSetupI.patch
    Rediff remaining patches.
  * [9511acf] Document surprises on CPU microcode updates (Closes: #773706)
  * [3e325df] Install lock drivers (Closes: #773706)
  * [970de51] Bump symbol versions

 -- Guido Günther <agx@sigxcpu.org>  Thu, 22 Jan 2015 12:26:54 +0100

libvirt (1.2.11-1) experimental; urgency=medium

  * [1377d56] lxc: Fix crash when using interface type 'direct'
    (Closes: #769600) Thanks to Bastian Blank for the patch
  * [88f9426] Adjust gbp.conf for experimental
  * [0b196d9] New upstream version 1.2.11
  * [113b58b] Rediff patches

 -- Guido Günther <agx@sigxcpu.org>  Thu, 22 Jan 2015 10:29:41 +0100

libvirt (1.2.11~rc1-1) experimental; urgency=medium

  * [8c5ba09] Rediff patches.
    Dropped
         allow-libxl-to-find-default-path-to-pygrub.patch: fixed upstram
         CVE-2014-7823-dumpxml-security-....patch: fixed upstream
         util-Prepare-URI-formatting-for-libxml2-2.9.2.patch: fixed upstream
  * [bdb5692] Bump symbol versions

 -- Guido Günther <agx@sigxcpu.org>  Thu, 11 Dec 2014 08:15:24 +0100

libvirt (1.2.10-1) experimental; urgency=medium

  * [87bcfc8] New upstream version 1.2.10
  * [214d446] CVE-2014-7823: dumpxml: security hole with migratable flag
    (Closes: #769149)

 -- Guido Günther <agx@sigxcpu.org>  Wed, 12 Nov 2014 07:44:24 +0100

libvirt (1.2.10~rc2-1) experimental; urgency=medium

  * [7e3dbba] New upstream version 1.2.10~rc2
  * [a0832bc] Check if the directories exist before removing them. rmdir
    returns nonzero otherwise and this is more strict than just using || true.
    (Closes: #767672)

 -- Guido Günther <agx@sigxcpu.org>  Sun, 02 Nov 2014 12:10:23 +0100

libvirt (1.2.10~rc1-1) experimental; urgency=medium

  * Upload to experimental
  * [360da79] New upstream version 1.2.10-rc1
  * [aba073c] Rediff patches.
    Dropped Use-sensible-editor-...patch: Configurable now
    Dropped qemu-use-systemd-s-TerminateMachine-...patch: Applied upstream
  * [f739a80] Configure use of sensible-editor via ./configure
  * [4f5511b] Update symbols

 -- Guido Günther <agx@sigxcpu.org>  Thu, 30 Oct 2014 09:53:20 +0100

libvirt (1.2.9-10) unstable; urgency=medium

  * [f5e46fb] postinst: Use '--' for all adduser options
  * [a8fee3f] Don't validata filesystem target type.  Since 'virsh' validates
    XML this can lead to uneditable (but perfectly valid) configs.

 -- Guido Günther <agx@sigxcpu.org>  Tue, 07 Apr 2015 11:29:47 +0200

libvirt (1.2.9-9) unstable; urgency=medium

  * [4c14b83] qemu: Don't try to parse -help for new QEMU.
    Closes: #777138, #775773
    Thanks to Mathieu Malaterre for the debugging
  * [1addae5] Force capability refresh on upgrades. This makes sure we
    refresh the capabilities at least once when upgrading from Wheezy.
    (Closes: #731815)

 -- Guido Günther <agx@sigxcpu.org>  Fri, 06 Feb 2015 15:40:21 +0100

libvirt (1.2.9-8) unstable; urgency=medium

  * [885f33d] Fix CVE-2015-0236.
    Patches cherry-picked from upstream (Closes: #776065)

 -- Guido Günther <agx@sigxcpu.org>  Fri, 23 Jan 2015 19:01:40 +0100

libvirt (1.2.9-7) unstable; urgency=medium

  * [d7df883] CVE-2014-8131: Fix possible deadlock and segfault in
    qemuConnectGetAllDomainStats()
    (Closes: #773858)
  * [d0085e0] qemu: bulk stats: Fix logic in monitor handling
  * [b5e081c] CVE-2014-8135: storage: fix crash caused by no check return
    before set close
    (Closes: #773855)
  * [a5452de] CVE-2014-8136: qemu: migration: Unlock vm on failed ACL check in
    protocol v2 APIs
    (Closes: #773856)
  * [5aaafc9] qemu: Fix crash in tunnelled migration (Closes: #773503)
  * [87b3713] lxc: Fix crash when using interface type 'direct'
    Thanks to Bastian Blank for the patch (Closes: #769600)
  * [17807c0] Document surprises on CPU microcode updates (Closes: #773706)
  * [66a3ca6] Install lock drivers (Closes: #773706)
  * [f6ffda7] vbox: fix a bug in _machineStateInactive (Closes: #770202)

 -- Guido Günther <agx@sigxcpu.org>  Wed, 24 Dec 2014 10:33:31 +0100

libvirt (1.2.9-6) unstable; urgency=medium

  * [9779548] Add a python build-dependency for the docs build
    (Closes: #770775)

 -- Guido Günther <agx@sigxcpu.org>  Sun, 23 Nov 2014 18:47:42 +0100

libvirt (1.2.9-5) unstable; urgency=medium

  [ Guido Günther ]
  * [5c47e64] Pre-Depend on init-system-helpers.
    Thanks to intrigeri and Bastien ROUCARIES (Closes: #769551, #766362)
  * [9aa75f7] util: Prepare URI formatting for libxml2 >= 2.9.2
    (Closes: #769653)

  [ Ian Campbell ]
  * [bfe835f] Specify "pygrub" by default for libxl backend guests.
    Using an absolute path prevents libxl from providing the correct
    default. (Closes: #770485)

 -- Guido Günther <agx@sigxcpu.org>  Sun, 23 Nov 2014 14:57:13 +0100

libvirt (1.2.9-4) unstable; urgency=medium

  * [4cdad47] Allow backported versions of dh-systemd
  * [fb4bf47] Add suggests to libvirt-daemon-system to libvirt-daemon
    (Closes: #767343)
  * [e4f03ca] Check if the directories exist before removing them
    rmdir returns nonzero otherwise and this is more strict than just using
    || true. (Closes: #767672)
  * [030fd97] CVE-2014-7823: dumpxml: security hole with migratable flag
    (Closes: #769149)

 -- Guido Günther <agx@sigxcpu.org>  Wed, 12 Nov 2014 08:11:17 +0100

libvirt (1.2.9-3) unstable; urgency=medium

  * [28dd361] Remove obsolete conffiles in libvirt-bin too. Depending on the
    upgrade path they can belong to either libvirt-bin or
    libvirt-daemon-system. (Closes: #764679)
  * [de9dcf9] Move polkit rule to /u/s/polkit-1/rules.d/
    since /e/polkit-1 is for admin changes (Closes: #764826)
  * [114d777] Remove unused python files. We split out libvirt-python ages
    ago.
  * [3a06d85] Add rules for older policy kit (as in jessie/sid).
    Thanks to Török Edwin, Wolodja Wentland and Michael Biebl
    (Closes: #765346)

 -- Guido Günther <agx@sigxcpu.org>  Tue, 14 Oct 2014 18:34:38 +0200

libvirt (1.2.9-2) unstable; urgency=medium

  * Upload to unstable

 -- Guido Günther <agx@sigxcpu.org>  Fri, 10 Oct 2014 21:13:17 +0200

libvirt (1.2.9-1) experimental; urgency=medium

  * [2d120a7] New upstream version 1.2.9
  * [0f86acd] Rediff patches

 -- Guido Günther <agx@sigxcpu.org>  Thu, 02 Oct 2014 07:24:28 +0200

libvirt (1.2.9~rc2-1) experimental; urgency=medium

  * [8707039] New upstream version 1.2.9~rc2
  * [79ae3d2] Rework patches.
    Dropped
        qemu-remove-capabilities.....patch: applied upstream
  * [c64dc81] qemu: use systemd's TerminateMachine to kill all processes
    (Closes: #761521)

 -- Guido Günther <agx@sigxcpu.org>  Tue, 30 Sep 2014 20:47:46 +0200

libvirt (1.2.9~rc1-1) experimental; urgency=medium

  * [063cc84] New upstream version 1.2.9~rc1
  * [42079a5] Rework patches.
    Dropped
        security/CVE-2014-3633-....patch: applied upstream
  * [d72bb99] Bump symbol versions
  * [7359fcb] Add simple smoke test using the test:///default driver
  * [da11813] Use polkit instead of socket permissions.  As before membership
    in the libvirt group gives r/w access to all VMs.
  * [98cdfca] Allow for libvirt's socket activation. Now that we're using
    polkit by default having the rw socket mode 0777 is fine.

 -- Guido Günther <agx@sigxcpu.org>  Sun, 28 Sep 2014 10:59:28 +0200

libvirt (1.2.8-3) unstable; urgency=medium

  * [9e3d695] Don't ship the socket activation file until we switched to
    polkit and we can therefore ignore socket permissions. (Closes: #762606)
  * [a32e72e,4eb67f4] Clean up capabilities and possibly empty dirs
    (Closes: #761131)

 -- Guido Günther <agx@sigxcpu.org>  Thu, 25 Sep 2014 12:08:51 +0200

libvirt (1.2.8-2) unstable; urgency=medium

  * [7b0894e] Debianize virtlockd unit file
  * [2c522fd] Tag Debian specific patches as such
  * [e1e734b] CVE-2014-3633: qemu: blkiotune: Use correct definition when
    looking up disk. Thanks to Peter Krempa (Closes: #762203)

 -- Guido Günther <agx@sigxcpu.org>  Tue, 23 Sep 2014 08:53:01 +0200

libvirt (1.2.8-1) experimental; urgency=medium

  * [e55688b] New upstream version 1.2.8
    (Closes: #760510)
  * [daa5c92] New upstream version 1.2.8~rc2
  * [7f85d5e] Bump symbol versions
  * [ea29953] Rediff patches.
    Drop patches appplied upstream:
        Don-t-fail-qemu-driver-intialization-if-we-can-t-det.patch
        Include-param.h-on-kFreeBSD.patch
        Make-uri-command-a-bit-more-prominent.patch
  * [4633967] Verify tarball signature

 -- Guido Günther <agx@sigxcpu.org>  Fri, 05 Sep 2014 19:56:50 +0200

libvirt (1.2.8-0ubuntu21) vivid; urgency=medium

  * d/apparmor/libvirt-qemu: Update the ceph.conf allow rule (LP: #1403648)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Fri, 30 Jan 2015 10:02:20 +0100

libvirt (1.2.8-0ubuntu20) vivid; urgency=medium

  * debian/rules:
    - use --with-esx (LP: #565771)
    - specify restart-after-upgrade (LP: #1215617)
  * debian/control: add libcurl4-gnutls-dev for esx support

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Wed, 21 Jan 2015 13:01:59 -0600

libvirt (1.2.8-0ubuntu19) vivid; urgency=medium

  * apparmor libvirt-qemu template: allow reading charm-specific ceph config
    and silence denials for /tmp/**.  (LP: #1403648)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Tue, 06 Jan 2015 10:27:33 -0600

libvirt (1.2.8-0ubuntu18) vivid; urgency=medium

  * mutex cgmanager actions (Thanks to Don Bowman for finding the cause)
    (LP: #1397130) (LP: #1367702)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Thu, 18 Dec 2014 13:28:03 -0600

libvirt (1.2.8-0ubuntu17) vivid; urgency=low

  * d/p/upstream-libxl-Allow-libxl-to-find-pygrub-binary.patch:
    Allow libxl to figure out the path to pygrub. (LP: #1396942)

 -- Stefan Bader <stefan.bader@canonical.com>  Thu, 11 Dec 2014 09:51:20 +0100

libvirt (1.2.8-0ubuntu16) vivid; urgency=medium

  * debian/patches/add-ppc64le-support.patch: Added patches needed
    for ppc64le support. (LP: #1396070) 

 -- Chuck Short <zulcss@ubuntu.com>  Thu, 27 Nov 2014 08:57:35 -0500

libvirt (1.2.8-0ubuntu15) vivid; urgency=medium

  * libvirt-qemu: add r to sgabios.bin (LP: #1393548)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Mon, 17 Nov 2014 15:05:22 -0600

libvirt (1.2.8-0ubuntu14) vivid; urgency=medium

  [ Serge Hallyn ]
  * 9036-util-prepare-uri-for-libxml2-2.9.2.patch: fix FTBFS against new
    libxml 2.9.2 (LP: #1390637)

  [ Marc Deslauriers ]
  * SECURITY UPDATE: denial of service via virConnectListAllDomains
    - debian/patches/CVE-2014-3657.patch: fix domain deadlock in
      src/conf/domain_conf.c.
    - CVE-2014-3657
  * SECURITY UPDATE: xml information leak with read-only connections
    - debian/patches/CVE-2014-7823.patch: check for migratable flag in
      src/libvirt.c, src/remote/remote_protocol.x.
    - CVE-2014-7823

 -- Marc Deslauriers <marc.deslauriers@ubuntu.com>  Tue, 11 Nov 2014 13:14:00 -0500

libvirt (1.2.8-0ubuntu13) vivid; urgency=medium

  * cull too-new apparmor rules depending on target host (LP: #1387251)
  * add mising apparmor permissions for slof (LP: #1374554)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Fri, 07 Nov 2014 20:32:23 +0000

libvirt (1.2.8-0ubuntu12) vivid; urgency=medium

  * complete the 9p support: (LP: #1378434)
    - libvirt-qemu: add fowner and fsetid
    - virt-aa-helper: add 'l' to 9p file options
  * dont-include-non-migrateable-features-in-host-model (LP: #1386503)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Wed, 29 Oct 2014 15:07:21 -0500

libvirt (1.2.8-0ubuntu11) utopic; urgency=medium

  [ Felix Geyer ] 
  * d/p/ubuntu_machine_type.patch: Fix No PCI buses available. (LP: #1379346).

 -- Chris J Arges <chris.j.arges@canonical.com>  Thu, 09 Oct 2014 08:57:27 -0500

libvirt (1.2.8-0ubuntu10) utopic; urgency=medium

  * libvirt-bin.upstart: delay start until rc finished
    This give hypervisors more time to finish their setup (LP: #1377900).
  * libvirt-bin.upstart: add xen:/// uri to the list (LP: #1377960)

 -- Stefan Bader <stefan.bader@canonical.com>  Mon, 06 Oct 2014 16:23:06 +0200

libvirt (1.2.8-0ubuntu9) utopic; urgency=medium

  * libvirt-qemu apparmor template: add /sys/firmware/devicetree/** r
    (LP: #1374554)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Wed, 01 Oct 2014 17:09:05 -0500

libvirt (1.2.8-0ubuntu8) utopic; urgency=medium

  * libvirt-bin.postinst: fix syntax error (s/if/fi/)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Tue, 30 Sep 2014 13:07:19 -0500

libvirt (1.2.8-0ubuntu7) utopic; urgency=medium

  * libvirt-bin.postinst: check for confiles whichhave been removed rather
    than fail package install (LP: #1375910)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Tue, 30 Sep 2014 12:37:16 -0500

libvirt (1.2.8-0ubuntu6) utopic; urgency=medium

  * SECURITY UPDATE: denial of service or information disclosure via
    virDomainGetBlockIoTune
    - debian/patches/CVE-2014-3633.patch: use correct definition when
      looking up disk in src/qemu/qemu_driver.c.
    - CVE-2014-3633

 -- Marc Deslauriers <marc.deslauriers@ubuntu.com>  Mon, 29 Sep 2014 15:23:37 -0400

libvirt (1.2.8-0ubuntu5) utopic; urgency=medium

  * debian/apparmor/libvirt-lxc (sync with container-base with lxc):
    - remove bare 'signal' and 'ptrace' rules (base abstraction covers most
      of what we need)
    - allow signal (receive) peer=/usr/sbin/libvirtd
    - allow ptrace peer=@{profile_name}
    - deny mount options=(ro, remount, silent) -> /
    - allow mount fstype=hugetlbfs
    - shuffle a couple of rules around to make it easier to diff with lxc
      policy
  * debian/apparmor/TEMPLATE.lxc (sync with lxc-default):
    - use attach_disconnected and mediate_deleted
    - deny mount fstype=devpts,

 -- Jamie Strandboge <jamie@ubuntu.com>  Thu, 25 Sep 2014 16:24:21 -0500

libvirt (1.2.8-0ubuntu4) utopic; urgency=medium

  * debian/apparmor/usr.sbin.libvirtd: allow 'network netlink'

 -- Jamie Strandboge <jamie@ubuntu.com>  Thu, 18 Sep 2014 15:15:13 -0500

libvirt (1.2.8-0ubuntu3) utopic; urgency=medium

  * 9033-apparmor-use-TEMPLATE.qemu-for-kvm.patch - fix failure to start
    KVM vms.

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Thu, 18 Sep 2014 14:08:04 -0500

libvirt (1.2.8-0ubuntu2) utopic; urgency=low

  * d/p/ubuntu-xend-probe.patch:
    Update patch correctly and re-enable it. It seems like it only was
    half updated and then disabled without reasons.
  * d/p/ubuntu-libxl-Implement-basic-video-device-selection.patch:
    Re-activate adapted patch. Some pieces made it into upstream as a
    bug fix. The rest is still needed to allow selecing an alternate
    graphics device for Xen HVM guests.
  * d/p/ubuntu-libxl-Fix-up-VRAM-to-minimum-requirements.patch:
    Re-activate unchanged patch (for some reason dropped when moving
    to 1.2.6).
    This one is a bit of a work-around mainly for virt-manager which sets
    gfx memory to values below the minimum requirement for Xen. And the
    UI does not allow to change that. This patch just goes for the minimum
    in that case.

 -- Stefan Bader <stefan.bader@canonical.com>  Thu, 18 Sep 2014 10:00:36 +0200

libvirt (1.2.8-0ubuntu1) utopic; urgency=medium

  [ Chuck Short ]
  * New upstream release:  (LP: #1367422)
    + Dropped:
      - debian/patches/ovs-delete-port-if-exists-while-adding-new-one
    + Refreshed:
      - debian/patches/add-cgmanager-support.patch
      - debian/patches/storage-default-permission-mode-to-0711

  [ Serge Hallyn ]
  * d/apparmor
    - install TEMPLATE.qemu and TEMPLATE.lxc
    - add libvirt-lxc abstraction, add permissions to it needed for
      a ubuntu container to start.
    - libvirt-qemu - add qemu-bridge-helper policy from upstream
    - libvirt-qemu - add qemu-microblaze allows from upstream
    - edit lxc.conf to enable apparmor by default  (LP: #914716)
      (LP: #1008393) (LP: #1088295)
  * d/apparmor/libvirt-qemu: add /dev/shm as path to spice.* nodes
    for systemd case.  (LP: #1365163)
  * d/p/9030-create-socket-dir - create session socket dir if
    needed  (Should be replaced eventually by the upstream fix)
  * d/p/9032-lxc-allow-no-security-driver: don't fail if apparmor
    driver is not available (else the qa-regression-tests fail with
    skip_apparmor)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Mon, 15 Sep 2014 18:30:06 -0500

libvirt (1.2.7-11) unstable; urgency=medium

  * [6534478] Check status in a systemd 208 compatible way
    systemd 204 returned 0 when trying to reload a not running service but
    208 changed behaviour. So use status instead of is-enabled.
    Thanks to Neutron Soutmun for his feedback (Closes: #758688)

 -- Guido Günther <agx@sigxcpu.org>  Sun, 24 Aug 2014 10:54:26 +0200

libvirt (1.2.7-10) unstable; urgency=medium

  * [d319f15] Only reexec virtlockd if enabled (Closes: #758688)

 -- Guido Günther <agx@sigxcpu.org>  Thu, 21 Aug 2014 16:34:36 +0200

libvirt (1.2.7-9) unstable; urgency=medium

  * [1c2c5ee] Don't let dh_systemd_start guess the package to act on
    (Closes: #758552)
  * [ab79901] Don't restart libvirt-guests when using systemd so it's
    consistent with sysvinit. We'd restart VMs on package upgrads otherwise.

 -- Guido Günther <agx@sigxcpu.org>  Tue, 19 Aug 2014 09:59:47 +0200

libvirt (1.2.7-8) unstable; urgency=medium

  * [d98aa3b] Fix wrong relation in preinst.
    Thanks to Laurent Bigonville (Closes: #758136)

 -- Guido Günther <agx@sigxcpu.org>  Thu, 14 Aug 2014 21:06:45 +0200

libvirt (1.2.7-7) unstable; urgency=medium

  * [42dbd16] Skip more linux specific stuff on kFreeBSD
  * [a2ff23f] Don't restart virtlockd on upgrade virtlockd must be reloaded so
    it reexecs itself. (Closes: #757453)
  * [4914adc] Use symlinks for upstream changelog.  This safes 1.9M per
    package
  * [3583f4b] Don't fail qemu driver intialization if we can't determine
    hugepage size.  Thanks to a lot to Jamie Heilman for testing it
    (Closes: #757609)
  * [3b23724] Make 'uri' command a bit more prominent. (Closes: #688778)
  * [63e7e51] Also stop libvirt-bin in libvirt-bin's preinst.
    When libvirt-daemon-system's preinst runs the new libvirt-bin might
    already be unpacked and therefore the libvirt-bin service file already
    gone. So additionally stop libvirt-bin in libvirt-bin's preinst.
    (Closes: #757952)

 -- Guido Günther <agx@sigxcpu.org>  Wed, 13 Aug 2014 21:50:07 +0200

libvirt (1.2.7-6) unstable; urgency=medium

  * [5e39138] Don't provide libvirt-bin via LSB headers.
    This avoids a conflict when /e/i/libvirt-bin and /e/i/libvirtd
    are around at the same time during dpkg's configure phase and
    both init scripts Provide: libvirt-bin.
    (Closes: #757330)

 -- Guido Günther <agx@sigxcpu.org>  Fri, 08 Aug 2014 17:58:36 +0200

libvirt (1.2.7-5) unstable; urgency=medium

  * [06d457c] Bump comparison version so this applies to current failed
    upgrades too.
  * [bdae16d] Remove another obsolete conffile (Closes: #757332)
  * [2f486c5] Don't try to stop libvirt-bin if it's already gone
    (Closes: #757407)
  * [a9643a0] Remove another obsolete conffile (Closes: #757332)

 -- Guido Günther <agx@sigxcpu.org>  Thu, 07 Aug 2014 23:21:39 +0200

libvirt (1.2.7-4) unstable; urgency=medium

  * [5e71896] Move networking configuration to libvirt-daemon-system too
  * [32eea48] Remove left over empty directory
  * [b3a2735] Also purge libvirt-bin.service on new installations.
    The old service file was in libvirt-bin so we need to remove it when
    libvirt-daemon-service is first installed (as we did before when
    the whole code was in the postinst).
    Thanks to Laurent Bigonville for the analysis (Closes: #757293)

 -- Guido Günther <agx@sigxcpu.org>  Thu, 07 Aug 2014 10:57:53 +0200

libvirt (1.2.7-3) unstable; urgency=medium

  * Upload to unstable
  * [f634d53] Don't try to install qemu configuration on kFreeBSD.
    QEMU support on kFreeBSD support is currently disabled due to test
    failures.

 -- Guido Günther <agx@sigxcpu.org>  Wed, 06 Aug 2014 20:28:05 +0200

libvirt (1.2.7-2) experimental; urgency=medium

  * [ebfec9b] Don't try to install lxc.conf on kFreeBSD.
    Another kFreeBSD build fix

 -- Guido Günther <agx@sigxcpu.org>  Mon, 04 Aug 2014 14:10:57 +0200

libvirt (1.2.7-1) experimental; urgency=medium

  * [65e69d3] New upstream version 1.2.7
  * [d615910] Don't try to install virt-login-shell on non-linux.
    It's LXC only. This fixes the build failure on kFreeBSD.

 -- Guido Günther <agx@sigxcpu.org>  Sun, 03 Aug 2014 19:20:26 +0200

libvirt (1.2.7~rc2-1) experimental; urgency=medium

  [ Guido Günther ]
  * [16575d9] New upstream version 1.2.7~rc2
  * [bc785a7] Drop left over libvirt-bin references.
    Fixes more leftovers of #730604.
  * [ca64c62] Rediff patches
  * [998e7d4] Update symbols file
  * [06cf7b4] Make sure libvirt-bin versioned dependencies are recent enough

  [ Laurent Bigonville ]
  * [daf46fe] Stop the daemon in the preinst script instead of the postinst
    one when renaming the .service file as it now contains the
   "Restart=on-failure" option and blindly killing the daemon is not working
   anymore.  This completes the fix for #730604

 -- Guido Günther <agx@sigxcpu.org>  Fri, 01 Aug 2014 10:52:57 +0200

libvirt (1.2.6-2) experimental; urgency=medium

  * [501afad] Update copyright information

 -- Guido Günther <agx@sigxcpu.org>  Tue, 29 Jul 2014 08:55:26 +0200

libvirt (1.2.6-1) experimental; urgency=medium

  [ Laurent Bigonville ]
  * [4c4977e,87fc2db] Rename libvirt-bin.service back to libvirtd.service
    and use symlink or Alias= instead. This is what upstream uses.
    (Closes: #730604)

  [ Guido Günther ]
  * Upload to experimental
  * [9321997] Drop build-dep on hal-dev too (Closes: #710195)
  * [899c1d3] New upstream version 1.2.5
  * [34d54b9] Refresh patches.
    Dropped, fixed upstream:
       LSN-2014-0003-Don-t-expand-entities-when-parsing-XML.patch
  * [12e5468] Update symbols file
  * [8ae2cf5] Depend on gnutls/gcrypt explicitly (Closes: #753121)
  * [8881fe5] Recommend iproute2 instead of iproute (Closes: #753713)
  * [ab710a4] New upstream version 1.2.6
  * [a23d7fc] Rediff patches
  * [e6c037b] Bump symbol versions
  * [7ca6a8a] Split out daemon configuration (Closes: #679074)
  * [60ec538] Cleanup old conffile (Closes: #748720)
  * [cc59dd4] Provide build and packager information (Closes: #753306)
  * [74baa7e] Use sensible-editor as fallback.
    Based on a patch by Dmitry Smirnov (Closes: #594444)

 -- Guido Günther <agx@sigxcpu.org>  Tue, 22 Jul 2014 22:33:51 +0200

libvirt (1.2.6-0ubuntu6) utopic; urgency=medium

  * debian/apparmor/usr.sbin.libvirtd: update for abstract socket mediation
    (LP: #1362199)
  * debian/apparmor/libvirt-qemu: allow 'r' on @{PROC}/sys/kernel/cap_last_cap
  * debian/control: Suggests apparmor >= 2.8.96~2541-0ubuntu4~

 -- Jamie Strandboge <jamie@ubuntu.com>  Fri, 05 Sep 2014 17:32:16 -0500

libvirt (1.2.6-0ubuntu5) utopic; urgency=medium

  * cgroups-ignore-systemd-failure - fix incoming migration failures when
    systemd-shim is installed.
  * ovs-delete-port-if-exists-while-adding-new-one - cherrypick commit 33445ce
    from upstream (LP: #1343262)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Fri, 08 Aug 2014 09:56:43 -0500

libvirt (1.2.6-0ubuntu4) utopic; urgency=high

  * No change rebuild against gnutls28.

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Fri, 08 Aug 2014 13:28:03 +0100

libvirt (1.2.6-0ubuntu3) utopic; urgency=medium

  * debian/apparmor/usr.sbin.libvirtd - add cap-sys-resource to fully
    fix (LP: #1276719)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Thu, 07 Aug 2014 12:43:20 -0500

libvirt (1.2.6-0ubuntu2) utopic; urgency=medium

  * Rebuild against libparted2.

 -- Colin Watson <cjwatson@ubuntu.com>  Mon, 21 Jul 2014 21:27:18 +0100

libvirt (1.2.6-0ubuntu1) utopic; urgency=medium

  * New upstream release:
    + Dropped:
     - debian/patches/virt-aa-helper-vhost.patch
     - debian/patches/libxl-Implement-basic-video-device-selection.patch
     - debian/patches/libxl-Fix-up-VRAM-to-minimum-requirements.patch
    + debian/rules: Include packaging version in the log file. (LP: #1335221)

 -- Chuck Short <zulcss@ubuntu.com>  Fri, 04 Jul 2014 08:40:24 -0400

libvirt (1.2.5-0ubuntu6) utopic; urgency=low

  * libxl: Refresh patch(es) to allow the choice between Cirrus and
    VGA for Xen HVM guests.
    - d/p/libxl-Implement-basic-video-device-selection.patch [v4]
    - d/p/libxl-Fix-up-VRAM-to-minimum-requirements.patch

 -- Stefan Bader <stefan.bader@canonical.com>  Mon, 30 Jun 2014 16:08:56 +0200

libvirt (1.2.5-0ubuntu5) utopic; urgency=low

  * debian/apparmor/usr.sbin.libvirtd: allow libvirtd to run
    libxl-save-helper (required for save restore through libxl).
    (LP: #1334195)

 -- Stefan Bader <stefan.bader@canonical.com>  Thu, 26 Jun 2014 15:53:05 +0200

libvirt (1.2.5-0ubuntu4) utopic; urgency=low

  * debian/apparmor/usr.sbin.libvirtd: allow pygrub to be run
    (LP: #1326003)

 -- Stefan Bader <stefan.bader@canonical.com>  Wed, 18 Jun 2014 11:04:15 +0200

libvirt (1.2.5-0ubuntu3) utopic; urgency=medium

  * d/p/virt-aa-helper-vhost.patch: allow access to /dev/vhost-net if domain
    needs it (LP: #1322568)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Tue, 17 Jun 2014 22:01:49 -0500

libvirt (1.2.5-0ubuntu2) utopic; urgency=medium

  * implement cgmanager support (LP: #1322677)
    - debian/control: build-dep on libcgmanager-dev, depend on cgmanager
    - d/p/add-cgmanager-support.patch

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Tue, 17 Jun 2014 16:40:20 -0500

libvirt (1.2.5-0ubuntu1) utopic; urgency=medium

  [ Chuck Short ]
  * New upstream version:
    + Rediffed:
      - d/p/ubuntu-xend-probe.patch
    + Dropped:
      - d/p/libxl-Check-for-control_d-string-to-decide-about-dom.patch
      - d/p/libxl-do-not-use-virdomain-id.patch
      - d/p/libxl-set-disk-format-for-cdrom.patch
      - d/p/libxl-set-vfb0-data-in-build-config.patch
      - d/p/libxl-support-sexpr-in-native-to-XML-conversion.patch
      - d/p/patch-qemuMonitorTextGetMigrationStatus-to-intercept.patch
      - d/p/accomodate-new-qemu-migration-status-setup.patch
      - d/p/9025-apparmor-allow-access-to-filesystem-mounts
      - d/p/add-a-mutex-to-serialize-updates-to-fw.patch
      - d/p/arm-cpu-baseline.patch
    + debian/control: Add ebtables, iptables, and qemu-utils as a build dependency.

  [ Serge Hallyn ]
  * d/p/ubuntu-skip-virstoragetest: skip a test that hangs in buildds.
  * d/apparmor/TEMPLATE: replace libvirt-qemu with libvirt-driver to match
    upstream commit 43c030f.

 -- Chuck Short <zulcss@ubuntu.com>  Mon, 02 Jun 2014 09:35:18 -0400

libvirt (1.2.4-3) unstable; urgency=medium

  * [b0b7359] Don't pretend kFreeBSD supports linux only features.  So far we
    worked around missing kFreeBSD features by creating empty dirs this looks
    bad on the target systems and makes us maintain things in debian rules and
    *.install. Explicitly invoke dh_install in debian/rules instead.
    Closes: #747658

 -- Guido Günther <agx@sigxcpu.org>  Sat, 10 May 2014 22:23:06 +0200

libvirt (1.2.4-2) unstable; urgency=medium

  * [8bcbf97] Only linux has apparmor (Closes: #747565)
  * [0fa7624] Disable tests requiring filesystem attributes since they seem to
    fail on the buildd (Closes: #747565)

 -- Guido Günther <agx@sigxcpu.org>  Sat, 10 May 2014 15:38:57 +0200

libvirt (1.2.4-1) unstable; urgency=medium

  * [b38846c] New upstream version 1.2.4
  * [f8d48c5] Drop.
        tests-Only-use-privileged-mode-if-Qemu-user-and-grou.patch
    applied upstream
  * [8388a28] Disable hal on all architectures (Closes: #710195)
  * [726b0bb] LSN-2014-0003: Don't expand entities when parsing XML

 -- Guido Günther <agx@sigxcpu.org>  Mon, 05 May 2014 10:59:18 +0200

libvirt (1.2.4~rc2-1) experimental; urgency=medium

  * [1190eb8] New upstream version 1.2.4~rc2
  * [382f71a] Bump symbol versions
  * [278d3b6] Rebase patches.
    Dropped
        libvirt-guests-avoid-bashism.patch
        tests-Don-t-crash-when-creating-the-config-object-fa.patch
    fixed upstream
    Modified:
        tests-Only-use-privileged-mode-if-Qemu-user-and-grou.patch
    to better suite upstream.
  * [057fc1d] Add more build-deps so we can run more test during "make check"
  * [7f310c8] More verbose test output
  * [5be4d5e] Include bug-presubj to request some more data on bug reports.
  * [6bd3b3e] Stab at a build fix for kFreeBSD

 -- Guido Günther <agx@sigxcpu.org>  Sat, 03 May 2014 14:08:24 +0200

libvirt (1.2.3-1) experimental; urgency=medium

  * [aa5cd19] /etc/init.d/libvirt-guests: source /lib/lsb/init-function.
    This make sure we redirect calls to systemctl correctly
    Thanks to Laurent Bigonville (Closes: #739082)
  * [9be0bf9] Remove old restart handling code from postinst.
    This brings the dh_installinit calls in line with the dh_systemd_start
    calls.
    Thanks to Laurent Bigonville (Closes: #739096)
  * [9c408f9] New upstream version 1.2.2. Fixes CVE-2013-6456
    (Closes: #741276, #732394)
  * [e2f0077] Bump symbols versions
  * [c7bf776] Update patches.
    Dropped
      xen-fix-parsing-xend-http-response.patch - applied upstream
  * [cca8c1e] New upstream version 1.2.3
  * [11ad777] New patch Skip-vircgrouptest.patch.
    Skip vircgrouptest since the sys emulating code isn't complete and fails
    in our /sys free chroot.
  * [448ab8c] Build-depend on libsystemd-daemon-dev on linux
  * [66f2a93] Refresh patches
  * [3038786] Fix test failures
  * [bbed2fd] Depend on libattr1-dev for selinux tests
  * [659fc63] Bump symbol versions
  * [618b64f] Adjust systemd installation to upstream changes
  * [1850e36] Bump standards version
  * [e934847] libvirt-guests: avoid bashism

 -- Guido Günther <agx@sigxcpu.org>  Mon, 07 Apr 2014 12:15:02 +0200

libvirt (1.2.2-0ubuntu13.2) utopic; urgency=medium

  * debian/apparmor/libvirt-qemu: add device-tree access for ppc
    (LP: #1321365)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Thu, 05 Jun 2014 12:06:17 -0500

libvirt (1.2.2-0ubuntu13.1) trusty-proposed; urgency=medium

  * debian/control: change apparmor dependency into an inverse conflicts,
    so that libvirt can continue to be used without apparmor.  (LP: #1304167)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Thu, 17 Apr 2014 10:42:08 -0500

libvirt (1.2.2-0ubuntu13) trusty; urgency=medium

  * Add a dependency on the new apparmor to make sure we have the new
    parser around before we attempt to load a profile requiring the new
    stanza support. (LP: #1304167)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Mon, 14 Apr 2014 11:03:37 -0500

libvirt (1.2.2-0ubuntu12) trusty; urgency=low

  * d/p/libxl-support-sexpr-in-native-to-XML-conversion.patch:
    Allow to use libvirt to convert xend guest configurations into
    xml format.
  * Add libvirt-migrate-xend-managed-domains migration script.
    (LP: #1303886)
  * Added breaks for xen-utils-4.(1|3) to ensure postinst order.

 -- Stefan Bader <stefan.bader@canonical.com>  Tue, 08 Apr 2014 19:55:29 +0200

libvirt (1.2.2-0ubuntu11) trusty; urgency=medium

  * debian/patches/recognize-trusty-machine-type.patch: Revert patch
    since it was causing issues with virtio deivces. (LP: #1304107) 

 -- Chuck Short <zulcss@ubuntu.com>  Tue, 08 Apr 2014 12:51:55 -0400

libvirt (1.2.2-0ubuntu10) trusty; urgency=medium

  * d/p/recognize-trusty-machine-type.patch: handle "trusty" qemu machine type
    (LP: #1294823)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Fri, 04 Apr 2014 09:29:22 -0500

libvirt (1.2.2-0ubuntu9) trusty; urgency=medium

  [ Jamie Strandboge ]
  * updates for AppArmor signals and ptrace mediation (LP: #1298611)
    - debian/apparmor/libvirt-qemu: allow guests to receive signals from and
      be tracedby libvirtd (additional signal and ptrace rules come from the
      AppArmor base abstraction)
    - debian/apparmor/usr.sbin.libvirtd:
      + grant bare signal and ptrace rule
      + grant dbus on the system bus (should have been added in 13.10)

 -- Tyler Hicks <tyhicks@canonical.com>  Thu, 03 Apr 2014 02:09:53 -0500

libvirt (1.2.2-0ubuntu8) trusty; urgency=medium

  * debian/apparmor/libvirt-qemu: Allow qemu-system-aarch64 to be used.
    (LP: #1301516)

 -- Chuck Short <zulcss@ubuntu.com>  Wed, 02 Apr 2014 14:20:39 -0400

libvirt (1.2.2-0ubuntu7) trusty; urgency=low

  * d/p/libxl-Create-log-directory-earlier.patch:
    Move creation of log directory inside function that tries to create
    a log file inside of it. Fixes startup when the libxl log directory
    has not been created, yet.
  * d/p/libxl-do-not-use-virdomain-id.patch:
    Replace usage of dom->id with vm->def-id inside the driver (as that
    is not getting stale). Fixes guest creation and reboot through
    virt-manager (apart from possibly other things).
  * d/p/libxl-set-disk-format-for-cdrom.patch:
    Set disk format, otherwise an empty virtual CDROM makes the guest
    unstartable.
  * d/p/libxl-set-vfb0-data-in-build-config.patch:
    Actually set video and display data in the domain build info. Beside
    of preventing disagreement about VNC ports, this allows to select
    standard VGA graphics and more VRAM trhough libvirt.

 -- Stefan Bader <stefan.bader@canonical.com>  Thu, 27 Mar 2014 16:46:31 +0100

libvirt (1.2.2-0ubuntu6) trusty; urgency=medium

  * debian/libvirt-bin.dirs: Add /var/log/libvirt/libxl. 

 -- Chuck Short <zulcss@ubuntu.com>  Mon, 24 Mar 2014 14:32:54 -0400

libvirt (1.2.2-0ubuntu5) trusty; urgency=low

  * Refreshed d/p/libxl-Check-for-control_d-string-to-decide-about-dom.patch
    to avoid logging an error when file is not present.

 -- Stefan Bader <stefan.bader@canonical.com>  Fri, 21 Mar 2014 09:49:36 +0100

libvirt (1.2.2-0ubuntu4) trusty; urgency=medium

  * debian/patches/arm-cpu-baseline.patch: Implement a stub cpuArchDriver.baseline() 
    handler for arm.

 -- Chuck Short <zulcss@ubuntu.com>  Mon, 17 Mar 2014 10:59:49 -0400

libvirt (1.2.2-0ubuntu3) trusty; urgency=low

  * d/p/libxl-Check-for-control_d-string-to-decide-about-dom.patch: Prevent
    using the libxl driver when not running in dom0 but having xenfs mounted.
    (LP: #1248025)

 -- Stefan Bader <stefan.bader@canonical.com>  Wed, 12 Mar 2014 14:16:14 +0100

libvirt (1.2.2-0ubuntu2) trusty; urgency=medium

  * d/p/add-a-mutex-to-serialize-updates-to-fw.patch: fix another deadlock
    when starting a large number of VMs.  (LP: #1228977)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Tue, 11 Mar 2014 14:08:02 -0500

libvirt (1.2.2-0ubuntu1) trusty; urgency=medium

  * New upstream release:
    - Rediffed patches:
      - debian/patches/Allow-libvirt-group-to-access-the-socket.patch
      - debian/patches/9004-libvirtd-group-name.patch
      - debian/patches/dnsmasq-as-priv-user
    - Dropped patches:
      - debian/patches/9005-increase-unix-socket-timeout.patch: No longer
        needed.
      - debian/patches/rbd-storage-format.patch: No longer needed.
      - debian/patches/9022-qemu-enable-host-passthrough-mode-for-aarch64:
        No longer needed.
      - debian/patches/9023-xen-fix-parsing-xend-http-response.patch:
        No longer needed.
      - debian/patches/

 -- Chuck Short <zulcss@ubuntu.com>  Mon, 03 Mar 2014 13:30:36 -0500

libvirt (1.2.1-2) unstable; urgency=medium

  * [e936a7e] Document libvirt user capabilities
  * [94096c9] xen: fix parsing xend http response.  This unbreaks xen on
    wheezy.
    Thanks to Jim Fehlig
  * [fb06860] Install virt-aa-helper for apparmor

 -- Guido Günther <agx@sigxcpu.org>  Wed, 29 Jan 2014 07:42:22 +0100

libvirt (1.2.1-1) unstable; urgency=medium

  * Upload to unstable
  * [22e83d7] New upstream version 1.2.1.
    Fixes CVE-2014-0028, CVE-2014-1447, CVE-2013-6457
    (Closes: #735676)

 -- Guido Günther <agx@sigxcpu.org>  Fri, 17 Jan 2014 06:16:29 +0100

libvirt (1.2.1-0ubuntu10) trusty; urgency=medium

  * Pull patch from mailing list (merged with separate patch posted to the
    bug) to fix 9p mounts. (LP: #1285995)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Fri, 28 Feb 2014 09:34:54 -0600

libvirt (1.2.1-0ubuntu9) trusty; urgency=medium

  * Cherrypick 9024-qemu-implement-a-stub-baseline-handler-for-aarch64 from
    upstream git.

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Fri, 14 Feb 2014 18:20:03 -0600

libvirt (1.2.1-0ubuntu8) trusty; urgency=medium

  * Add uvtool image path to virt-aa-helper AppArmor profile.

 -- Robie Basak <robie.basak@ubuntu.com>  Fri, 14 Feb 2014 17:54:58 +0000

libvirt (1.2.1-0ubuntu7) trusty; urgency=low

  * debian/patches/nwfilter-locking.patch: Dropped causes ftbfs. 

 -- Chuck Short <zulcss@ubuntu.com>  Thu, 13 Feb 2014 10:07:56 -0700

libvirt (1.2.1-0ubuntu6) trusty; urgency=medium

  * debian/control: Move pm-utils from suggests to Recommends.
    (LP: #1274772) 
  * debian/patches/patches/nwfilter-locking.patch: Fix nwfilter locking
    causing libvirt to crash. (LP: #1228977)

 -- Chuck Short <zulcss@ubuntu.com>  Thu, 06 Feb 2014 14:27:40 -0500

libvirt (1.2.1-0ubuntu5) trusty; urgency=low

  * cherry-pick "xen: fix parsing xend http response" from upstream
    git to fix connecting to xex in xm/xend mode (LP: #915954)

 -- Stefan Bader <stefan.bader@canonical.com>  Thu, 30 Jan 2014 10:05:31 +0000

libvirt (1.2.1-0ubuntu4) trusty; urgency=medium

  * cherrypick d/p/9022-qemu-enable-host-passthrough-mode-for-aarch64 from
    upstream git.

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Tue, 28 Jan 2014 10:28:09 +0000

libvirt (1.2.1-0ubuntu3) trusty; urgency=medium

  * d/control: add nfs-common to build-deps (LP: #1264955)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Wed, 22 Jan 2014 08:56:01 -0600

libvirt (1.2.1-0ubuntu2) trusty; urgency=medium

  * debian/patches/rbd-storage-format.patch: Make image format 2 the default
    for RBD. 

 -- Chuck Short <zulcss@ubuntu.com>  Fri, 17 Jan 2014 10:31:37 -0500

libvirt (1.2.1-0ubuntu1) trusty; urgency=medium

  * New upstream release:
    - Dropped patches:
     + debian/patches/0001-libxl-Fix-devid-init-in-libxlMakeNicList.patch:
       No longer needed
     + debian/patches/0001-libxl-Fix-initialization-of-nictype-in-libxl_device_.patch:
       No longer needed.

 -- Chuck Short <zulcss@ubuntu.com>  Thu, 16 Jan 2014 09:17:20 -0500

libvirt (1.2.1~rc2-1) experimental; urgency=medium

  * [e559e92] libvirt-bin.init: Fix typo in path when checking for systemd
  * [fef0f8f] New upstream version 1.2.1~rc2
  * [caf3c45] Rediff patches

 -- Guido Günther <agx@sigxcpu.org>  Tue, 14 Jan 2014 11:21:55 +0100

libvirt (1.2.1~rc1-1) experimental; urgency=medium

  [ Laurent Bigonville ]
  * [f6b0feb] Pass --with-selinux-mount=/sys/fs/selinux to ./configure.
    The buildd are not running selinux and this make the auto-detection code
    defaults to /selinux which is actually not existing anymore in sid.
    This complete the fix for SELinux support.

  [ Guido Günther ]
  * Upload to experimental
  * [20d9129] Enable parallel build support.
    Thanks to Felix Geyer for pointing this out
  * [0d0590e] New upstream version 1.2.1~rc1. Fixes CVE-2013-6458
    (Closes: #734556)
  * [a3f978b] Bump symbol versions
  * [0a6a276] Rediff patches.
    Dropped (fixed upstream):
      security-fix-crash-in-lxcDomainGetMemoryParameters.patch
      security-fix-crash-in-lxcDomainSetMemoryParameters.patch
  * [3061b11] Build with apparmor support.
    Note that this isn't enough to run with apparmor support since the
    profiles will need more work but it makes testing this a lot simpler.
    This is heavily based on a patch by Felix Geyer.
    See: #725144

 -- Guido Günther <agx@sigxcpu.org>  Thu, 09 Jan 2014 08:23:57 +0100

libvirt (1.2.0-2) unstable; urgency=medium

  [ Guido Günther ]
  * [949fae6] Suggest systemd since it improves thinks like e.g. cgroup
    handling
  * [96f9aae] Make mounted cgroups configurable via /etc/default/libvirt-bin
    and check for memory cgroup on kernel command line. (Closes: #732666)
  * [ce356fe] Really remove "memory" from default mount list. Thanks to phep
    <phep-lists@teletopie.net>

  [ Laurent Bigonville ]
  * [13052e4] Enable selinux driver (Closes: #688179)
  * [a00df46] Switch LSB dependencies to avahi-daemon since only the later
    exists as native systemd service. (Closes: #731612)

 -- Guido Günther <agx@sigxcpu.org>  Wed, 01 Jan 2014 20:24:37 +0100

libvirt (1.2.0-1) unstable; urgency=medium

  * Upload to unstable
  * [230609e] Depend on kmod instead of module-init-tools (Closes: #731451)
  * [affb1ce] New upstream version 1.2.0
  * [e9de7b2] Fix crashes in lxcDomain{S,G}etMemoryParameters.
    This fixes CVE-2013-6436

 -- Guido Günther <agx@sigxcpu.org>  Wed, 18 Dec 2013 08:18:48 +0100

libvirt (1.2.0-0ubuntu3) trusty; urgency=medium

  * debian/apparmor/usr.lib.libvirt.virt-aa-helper: add
    /var/lib/nova/instances/snapshots/** r to allow virt-aa-helper to read
    the snapshot directory to find images which VMs should be granted access
    to.  (LP: #1244694)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Thu, 09 Jan 2014 16:39:13 -0600

libvirt (1.2.0-0ubuntu2) trusty; urgency=low

  * Refresh/fix detection of xm/xl toolstack in use. The previous port
    had two glitches, one of them causing the daemon to segfault.
  * Cherry-pick "libxl: Fix initialization of nictype in libxl_device_nic"
    from upstream to have the same default NIC choice with the libxl driver
    as we had with the xen(d) driver (HVM guest uses a emulated rtl8139).
  * Cherry-pick "libxl: Fix devid init in libxlMakeNicList" from upstream
    to allow HVM guests to be brought up from the libxl driver.

 -- Stefan Bader <stefan.bader@canonical.com>  Thu, 09 Jan 2014 11:19:07 +0100

libvirt (1.2.0-0ubuntu1) trusty; urgency=low

  * New upstream release:
    - Refreshed patches:
      + debian/patches/storage-default-permission-mode-to-0711
    - Dropped patches:
      + debian/patches/util_use_w_flag_when_calling_iptables.patch
   * debian/control, debian/rules, debian/python.mk,
     debian/python-libvirt.install: python libvirt bindings have been
     split out into its own source called libvirt-python.
   * debian/libvirt-dev.install: Install API files into dev package

 -- Chuck Short <zulcss@ubuntu.com>  Mon, 02 Dec 2013 09:56:17 -0500

libvirt (1.2.0~rc2-1) experimental; urgency=low

  * [8bfdc7f] New upstream version 1.2.0~rc2
  * [56d17d0] Bump symbol versions
  * [288778f] Drop atomic-pthread-link-fix.  Fixed upstream.
  * [c8151f5] Rediff patches
  * [dd5ae42] Drop python-libvirt.  Python bindings were split out of
    libvirt's git into libvirt-python.
  * [bafc3d6] Install API files into dev package.  These are needed by the
    python bindings

 -- Guido Günther <agx@sigxcpu.org>  Mon, 02 Dec 2013 21:31:31 +0100

libvirt (1.1.4-2) unstable; urgency=low

  * [78cadf5] Rados storage backend needs --with-storage-rbd not
    --with-storage-rados
  * [a384975] Explicitly disable phyp support so we can enable libssh2 uri
    support.
  * [9d8f3c5] Check correct dirs for existence (Closes: #729331)
  * [1ede11d] Document new cgroup rrequirements (Closes: #707201)
  * Acknowledge NMU, Thanks Julien Cristau (Closes: #730345)

 -- Guido Günther <agx@sigxcpu.org>  Sun, 01 Dec 2013 19:56:25 +0100

libvirt (1.1.4-1.1) unstable; urgency=high

  * Non-maintainer upload.
  * Fix linking when using pthread atomic ops, such as on armel.
  * Disable silent build rules.

 -- Julien Cristau <jcristau@debian.org>  Sun, 24 Nov 2013 12:27:18 +0100

libvirt (1.1.4-1) unstable; urgency=low

  * Upload to unstable
  * [54c6758] New upstream version 1.1.4

 -- Guido Günther <agx@sigxcpu.org>  Mon, 04 Nov 2013 07:05:45 +0100

libvirt (1.1.4-0ubuntu5) trusty; urgency=medium

  * Build using dh-autoreconf.
  * Enable numa support on ppc64 and ppc64el.

 -- Matthias Klose <doko@ubuntu.com>  Sun, 22 Dec 2013 15:55:04 +0100

libvirt (1.1.4-0ubuntu4) trusty; urgency=low

  * debian/libvirt-dev.install: Add missing libvirt-lxc.so. 

 -- Chuck Short <zulcss@ubuntu.com>  Thu, 21 Nov 2013 13:10:58 -0500

libvirt (1.1.4-0ubuntu3) trusty; urgency=low

  * d/p/accomodate-new-qemu-migration-status-setup.patch: work around
    libvirt's not yet knowing of qemu's new migration state, 'setup'.
    This can be removed when upstream libvirt has a proper patch.  QRT
    fails without this.

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Thu, 14 Nov 2013 08:41:07 -0600

libvirt (1.1.4-0ubuntu2) trusty; urgency=low

  * debian/patches/9002-better_default_uri_virsh.patch: Update to fix the
    FTBFS.

 -- Chuck Short <zulcss@ubuntu.com>  Wed, 13 Nov 2013 11:04:29 -0500

libvirt (1.1.4-0ubuntu1) trusty; urgency=low

  [ Chuck Short ]
  * New upstream version:
    - Rediffed patches:
      + d/p/Don-t-enable-default-network-on-boot.patch
      + d/p/ubuntu-xend-probe.patch
      + d/p/Don-t-fail-if-we-can-t-setup-avahi.patch
      + d/p/Disable-failing-virnetsockettest.patch
      + d/p/Don-t-enable-default-network-on-boot.patch
    - Dropped patches:
      + d/p/v1.1.1-maint/0001-xen-fix-memory-corruption-in-legacy-driver.patch
      + d/p/v1.1.1-maint/0002-qemu_migration-Don-t-error-on-tunelled-migration-wit.patch
      + d/p/v1.1.1-maint/0003-build-fix-configure-detection-of-if_bridge.h-on-RHEL.patch
      + d/p/v1.1.1-maint/0004-remote-Fix-a-segfault-in-remoteDomainCreateWithFlags.patch
      + d/p/v1.1.1-maint/0005-Revert-build-fix-configure-detection-of-if_bridge.h-.patch
      + d/p/v1.1.1-maint/0006-build-more-workarounds-for-if_bridge.h.patch
      + d/p/v1.1.1-maint/0007-Fix-qemuProcessReadLog-with-non-zero-offset.patch
      + d/p/v1.1.1-maint/0008-Reverse-logic-allowing-partial-DHCP-host-XML.patch
      + d/p/v1.1.1-maint/0009-virsh-domain-Fix-memleak-in-cmdUndefine-with-storage.patch
      + d/p/v1.1.1-maint/0010-virsh-domain-Fix-memleak-in-cmdCPUBaseline.patch
      + d/p/v1.1.1-maint/0011-virbitmap-Refactor-virBitmapParse-to-avoid-access-be.patch
      + d/p/CVE-2013-4296.patch
      + d/p/CVE-2013-4311.patch
      + d/p/CVE-2013-4297.patch
      + d/p/fix-crash-in-libvirtd-when-events
      + d/p/security-provide-supplemental-groups
      + d/p/add-bounds-checking-on-virdomainmigrate
      + d/p/xen-use-internal-interfaces-in-xendomainusedcpus
      + d/p/fix-remote-client-segfault.patch
      + d/p/ubuntu-xend-xmlcreate-double-free.patch
      + d/p/9002-better_default_uri_virsh.patch

  [ Serge Hallyn ]
  * update and re-add d/p/9002-better_default_uri_virsh.patch.  Also patch
    new uri-precedence test, as we break it with this patch.
  * add d/p/util_use_w_flag_when_calling_iptables.patch (LP: #1245322)
  * debian/apparmor/libvirt-qemu: allow access to hugepages mounts
    (LP: #1250216)
  * debian/apparmor/libvirt-qemu: allow access to usb info (LP: #1245251)

 -- Chuck Short <zulcss@ubuntu.com>  Mon, 11 Nov 2013 11:03:06 -0500

libvirt (1.1.4~rc2-1) experimental; urgency=low

  * [b56f727] Add option to mount cgroups during daemon start.  The init
    script can mount each control group to a different mount point during
    prior to starting libvirt bin. This allows running qemu and lxc guests
    together without using systemd.
    Thanks to Manuel VIVES (Closes: #725261)
  * [e044f56] New upstream version 1.1.4~rc2 (Closes: #727101)
  * [d046906] Update symbols file
  * [6a8cd2d] Update patches
  * [ac24680] Lower policykit-1 build-dep since CVE-2013-4288 was fixed in
    unstable by patching policykit instead of moving the new upstream version
    from unstable.

 -- Guido Günther <agx@sigxcpu.org>  Sun, 03 Nov 2013 11:44:18 +0100

libvirt (1.1.3-2) experimental; urgency=low

  * [63167cd] Enable libxl (Closes: #698093)
  * [c7747b0] Enable rados block device support
  * [6aa2998] Build against fuse for lxc fuse support
  * [a2a1a74] Don't fail chmod/chdir if a file doesn't exist.  We don't use -f
    since we want to detect other errors (ro filesystem, etc.)
    (Closes: #726203)

 -- Guido Günther <agx@sigxcpu.org>  Mon, 14 Oct 2013 12:22:13 +0200

libvirt (1.1.3-1) experimental; urgency=low

  * [6ec841f] New upstream version 1.1.3
  * [3721380] Drop Add-check-aclperms.pl.patch applied upstream
  * [acc5263] Refresh patches

 -- Guido Günther <agx@sigxcpu.org>  Tue, 01 Oct 2013 13:22:11 +0200

libvirt (1.1.3~rc1-1) experimental; urgency=low

  * [1894ff0] Use libvirt-qemu as group for qemu-kvm related directories since
    this is the group we run the process with.
  * [adf14d0] Make sure qemu guest agent related directories are
    readable/writeable by the kvm process (Closes: #717406)
  * [b7c1b69] Explicitly enable sheepdog support we already set the configure
    params but didn't pass them on. Sheepdog support was enabled anyway due to
    ./configure autoprobing.
  * [85436a4] No need for gawk.  Awk isn't used in libvirt anymore and
    virt-pki-validate can cope with mawk. (Closes: #703380)
  * [20cacff] New upstream version 1.1.3~rc1
  * [fe3ccca] Drop patches fixed upstream.
        Fix-cgroups-when-all-are-mounted-on-sys-fs-cgroup.patch
        Fix-launching-of-VMs-on-when-only-logind-part-of-sys.patch
        Fix-make-check-not-finding-finding-the-libvirtd-lens.patch
        Parse-AM_LDFLAGS-to-driver-modules-too.patch
        virFileNBDDeviceAssociate-Avoid-use-of-uninitialized.patch
  * [da60777] Rediff patches
  * [d5e311a] Update symbols file
  * [634a67a] Depend on newer polkit. We want a pkcheck that supports the uid
    arg to address CVE-2013-4311
  * [7c5e09d] Add check-aclperms.pl missing from the dist tarball

 -- Guido Günther <agx@sigxcpu.org>  Thu, 26 Sep 2013 14:08:44 +0200

libvirt (1.1.2-3) unstable; urgency=low

  * [d7b6d7a] Cherry-pick cgroup related fixes from upstream trunk.
    (a48838ad2e36c124229b6faaf6e24284810e3802 and
    f0b6d8d472de3c1bf3ade24e07df7c6d02075b77).
    Thanks to Laurent Biognville for chasing this and Daniel P. Berrange for
    the actual fixes.
    (Closes: #721979)

 -- Guido Günther <agx@sigxcpu.org>  Thu, 12 Sep 2013 16:15:31 +0200

libvirt (1.1.2-2) unstable; urgency=low

  * [f5f3818] virFileNBDDeviceAssociate: Avoid use of uninitialized variable.
    This fixes CVE-2013-4297.
    Thanks to Michal Privoznik

 -- Guido Günther <agx@sigxcpu.org>  Mon, 09 Sep 2013 09:22:20 +0200

libvirt (1.1.2-1) unstable; urgency=low

  * [1fb0a76] Parse AM_LDFLAGS to driver modules too got get a RO got
    Thanks again lintian and lintian-maintainers!
  * [921150d] Bump standards version to 0.9.4
  * [7b8d517] New upstream version 1.1.2

 -- Guido Günther <agx@sigxcpu.org>  Mon, 02 Sep 2013 10:04:33 +0200

libvirt (1.1.2~rc2-1) experimental; urgency=low

  * [4db5aa3] Remove unneeded systemd targets.
    While it's nice to have them upstream for backward compat we can drop
    them in Debian already.
  * [b4a9eaf] New upstream version 1.1.2~rc2 (Closes: #721325)

 -- Guido Günther <agx@sigxcpu.org>  Fri, 30 Aug 2013 17:46:54 +0200

libvirt (1.1.2~rc1-1) experimental; urgency=low

  * [a3b140a] New upstream version 1.1.2~rc1 (Closes: #719533)
  * [6c162e3] Update patches:
    Drop virGetGroupList-always-include-the-primary-group.patch applied
    upstream.
  * [e6c12ec] Update symbols
  * [a3548ee] Drop versioned libaudit-dev dependency (Closes: #721172)
  * [1562bb3] Fix "make check" not finding finding the libvirtd lense

 -- Guido Günther <agx@sigxcpu.org>  Thu, 29 Aug 2013 20:22:10 +0200

libvirt (1.1.1-1) unstable; urgency=low

  * [58c2a29] New upstream version 1.1.1 (Closes: #15510, #715320)
  * [0a06224] Move directory creation form dh_auto_build to dh_auto_install
    since this isn't part of the building but the installing process.
  * [a1c747a] Update symbols
  * [90a1881] Update patches.
    Dropped patches fixed upstream
        CVE-2013-4153-qemu-Fix-double-free-of-returned-JSON-.patch
        CVE-2013-4154-qemu-Prevent-crash-of-libvirtd-without.patch
        Create-directory-for-lease-files-if-it-s-missing.patch
        Fix-crash-when-multiple-event-callbacks-were-registe.patch
  * [1308542] virGetGroupList: always include the primary group
    otherwise we're lacking the group to access /dev/kvm

 -- Guido Günther <agx@sigxcpu.org>  Mon, 05 Aug 2013 11:31:05 +0200

libvirt (1.1.1-0ubuntu9) trusty; urgency=low

  * debian/apparmor/usr.sbin.libvirtd: add audit_write capability
    (LP: #1204616)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Wed, 23 Oct 2013 14:09:04 -0500

libvirt (1.1.1-0ubuntu8) saucy; urgency=low

  * SECURITY UPDATE: denial of service via invalid free in
    virFileNBDDeviceAssociate.
    - debian/patches/CVE-2013-4297.patch: properly initialize qemunbd in
      src/util/virfile.c.
    - CVE-2013-4297

 -- Marc Deslauriers <marc.deslauriers@ubuntu.com>  Wed, 02 Oct 2013 13:35:14 -0400

libvirt (1.1.1-0ubuntu7) saucy; urgency=low

  * fix-crash-in-libvirtd-when-events: make sure to remove all event
    callbacks when a client disconnects from libvirtd.

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Wed, 02 Oct 2013 08:14:53 -0500

libvirt (1.1.1-0ubuntu6) saucy; urgency=low

  * SECURITY UPDATE: possible privilege escalation via pkcheck race.
    - debian/patches/CVE-2013-4311.patch: add uid to pkcheck call in
      configure.ac, daemon/remote.c, src/access/viraccessdriverpolkit.c,
      src/rpc/virnetserverclient.c, src/util/viridentity.*.
    - debian/rules: use DEB_AUTO_UPDATE_AUTOCONF and
      DEB_AUTO_UPDATE_AUTOHEADER.
    - debian/control: specify version of policykit-1 security update, add
      libpolkit-gobject-1-dev to Build-Depends.
    - CVE-2013-4311
  * SECURITY UPDATE: denial of service in remoteDispatchDomainMemoryStats
    - debian/patches/CVE-2013-4296.patch: properly initialize stats in
      daemon/remote.c.
    - CVE-2013-4296

 -- Marc Deslauriers <marc.deslauriers@ubuntu.com>  Tue, 24 Sep 2013 19:25:55 -0400

libvirt (1.1.1-0ubuntu5) saucy; urgency=low

  * add-bounds-checking-on-virdomainmigrate: upstream patch for CVE-2013-4292
  * security-provide-supplemental-groups: upstream patch for CVE-2013-4291

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Mon, 09 Sep 2013 13:16:43 -0500

libvirt (1.1.1-0ubuntu4) saucy; urgency=low

  * apply all patches from v1.1.1-maint
  * cherrypick xen-use-internal-interfaces-in-xendomainusedcpus from upstream
    git.

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Thu, 22 Aug 2013 10:57:20 -0500

libvirt (1.1.1-0ubuntu3) saucy; urgency=low

  * debian/apparmor/usr.sbin.libvirtd: Include the system bus abstraction in
    the libvirtd AppArmor profile as libvirtd connects to the D-Bus system bus

 -- Tyler Hicks <tyhicks@canonical.com>  Tue, 20 Aug 2013 09:07:17 -0700

libvirt (1.1.1-0ubuntu2) saucy; urgency=low

  * debian/patches/fix-remote-client-segfault.patch: Fix segfault when 
    using a remote client. 

 -- Chuck Short <zulcss@ubuntu.com>  Mon, 19 Aug 2013 10:33:08 -0400

libvirt (1.1.1-0ubuntu1) saucy; urgency=low

  [ Chuck Short ]
  * New usptream version:
    - Dropped: 
      + debian/patches/CVE-2013-2218-fix-crash-listing-network-interfaces-with-filters:
        no longer needed.
      + debian/patches/ubuntu-xen-hypervisor-4.3.patch: no longer needed.
      + debian/patches/ubuntu-xen-fix-api-deadlocks.patch: no longer needed.
    - Rediffed:
      + debian/patches/Don-t-enable-default-network-on-boot.patch
      + debian/patches/9005-increase-unix-socket-timeout.patch

   [ Stefan Bader ]
   * Add apparmor rights to call into /usr/lib/xen-common/bin/xen-toolstack
     to figure out which one is active.
   * debian/patches/ubuntu-xend-probe.patch: Fix failure to detect
     whether Xen uses xm/xend toolstack or xl/libxl. Avoid running
     "xend status" as we do not package that in a pbublic path.

 -- Chuck Short <zulcss@ubuntu.com>  Thu, 15 Aug 2013 17:23:21 +0000

libvirt (1.1.0-4) unstable; urgency=low

  * [22913a0] Skip tests on all architectures except for i386 and amd64 as we
    did with cdbs
  * [23a28f2] CVE-2013-4153: qemu: Fix double free of returned JSON array in
    qemuAgentGetVCPUs() Thanks to Peter Krempa (Closes: #717354)
  * [85b5fda] CVE-2013-4154: qemu: Prevent crash of libvirtd without guest
    agent configuration.  Thanks to Alex Jia (Closes: #717355)

 -- Guido Günther <agx@sigxcpu.org>  Sat, 20 Jul 2013 09:58:29 +0200

libvirt (1.1.0-3) unstable; urgency=low

  * [3a2a899] Create directory for lease files if it's missing
    (Closes: #715200)
  * [000df64] Don't assume EXAMPLES_DIR exists as seen on the autobuilders
    (Closes: #717059)
  * [8369f65] Fix crash when multiple event callbacks were registered.
    CVE-2013-2230. Thanks to Ján Tomko (Closes: #715559)

 -- Guido Günther <agx@sigxcpu.org>  Tue, 16 Jul 2013 16:03:40 +0200

libvirt (1.1.0-2) unstable; urgency=low

  * [ac2fb88] Create /var/lib/libvirt/qemu/channel/target (Closes: #712179)
  * [54deab3] Switch to dh
  * [642e1f9] Set LD_PRELOAD empty (Closes: #714515)

 -- Guido Günther <agx@sigxcpu.org>  Tue, 09 Jul 2013 15:51:16 +0200

libvirt (1.1.0-1) unstable; urgency=low

  [ Guido Günther ]
  * [f0c8ed9] Remove now unused DM-Upload-Allowed
  * [aff716e] Depend on newer libnetcf1 that has a proper symbols file so we
    can drop the explicit libnetcf1 dependency in libvirt-bin
    (Closes: #712073)
  * [985164b] New upstream version 1.1.0. Addresses CVE-2013-2218.
    (Closes: #714699)
  * [390c5bd] Update symbols file
  * [9854fa9] Rebase patches
  * [9f9bb30] Move renaming of the service files prior to the dh_systemd_*
    helpers so they pick up the right service name.

  [ Michael Stapelberg ]
  * [5978fc0] switch to dh-systemd for proper systemd maintscripts
    (Closes: #714197)

 -- Guido Günther <agx@sigxcpu.org>  Tue, 02 Jul 2013 22:40:05 +0200

libvirt (1.0.6-1) unstable; urgency=low

  * [d233204] Make sure qemu.conf isn't world readable by default
    since the user might add passwords to it. (Closes: #710537)
  * [3a2c75c] New upstream version 1.0.6
  * [792d607] Update symbols
  * [7921e44] Update patches:
     Changed patches.
        Debianize-libvirt-guests.patch adjuste to upstream changes
     Dropped patches (applied upstream):
        Add-sanitytest.py.patch
        Fixup-rpcgen-code-on-kFreeBSD-too.patch
        Make-detect_scsi_host_caps-a-function-on-all-archite.patch
        daemon-fix-leak-after-listing-all-volumes.patch
        virInitctlRequest-Don-t-hardcode-384-bytes-size.patch
        virthreadpthread-don-t-try-to-cast-pthread_t-to-void.patch

 -- Guido Günther <agx@sigxcpu.org>  Thu, 06 Jun 2013 15:27:52 +0200

libvirt (1.0.6-0ubuntu4) saucy; urgency=low

  * ubuntu-xen-fix-api-deadlocks.patch (LP: #1191782)
    Fix the deadlocks in the xen driver when doing a dumpxml for active
    domains.
  * ubuntu-libxl-qemu-nopath.patch
    Create libxl configurations without paths for qemu-dm and hvmloader.
    The Xen toolstack can figure this out.
  * ubuntu-xen-hypervisor-4.3.patch
    Update the xen driver to handle the new sysctl and domctl versions
    in Xen-4.3.
  * Add apparmor definitions to execute scripts in /etc/xen/scrips as
    the libxl driver calls out to them (with the xen/xm driver this was
    done by the xen toolstack and communication with that was through
    a socket).

 -- Stefan Bader <stefan.bader@canonical.com>  Tue, 16 Jul 2013 10:59:11 +0200

libvirt (1.0.6-0ubuntu3) saucy; urgency=low

  * debian/apparmor/usr.lib.libvirt.virt-aa-helper: allow owner read of
    @{PROC}/[0-9]*/status

 -- Jamie Strandboge <jamie@ubuntu.com>  Mon, 15 Jul 2013 10:28:42 -0500

libvirt (1.0.6-0ubuntu2) saucy; urgency=low

  * Apply CVE-2013-2218-fix-crash-listing-network-interfaces-with-filters.

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Fri, 28 Jun 2013 13:13:20 -0500

libvirt (1.0.6-0ubuntu1) saucy; urgency=low

  * New upstream relase.
    + Dropped patches:
      - debian/patches/vnc-socket.patch: Dropped no longer needed.
      - debian/patches/Add-sanitytest.py.patch: Dropped no longer needed.
   * debian/libvirt-bin.postinst: Make sure qemu.conf isn't world readable 
     by default.

 -- Chuck Short <zulcss@ubuntu.com>  Mon, 03 Jun 2013 11:27:02 -0500

libvirt (1.0.5-3) unstable; urgency=low

  * Upload to unstable (Closes: #709216, #705205)
  * [037b674] daemon: fix leak after listing all volumes.
    Thanks to Ján Tomko (Closes: #708647)

 -- Guido Günther <agx@sigxcpu.org>  Wed, 29 May 2013 11:10:18 +0200

libvirt (1.0.5-2) experimental; urgency=low

  * [3686504] virInitctlRequest: Don't hardcode 384 bytes size
    another kFreeBSD build fix
  * [b47d706] Disable xen and vbox on all non-linux platforms
  * [031648a] Fixup rpcgen code on kFreeBSD too
  * [5154850] Make detect_scsi_host_caps a function on all architectures.
    Another kFreeBSD build fix

 -- Guido Günther <agx@sigxcpu.org>  Fri, 03 May 2013 10:42:38 +0200

libvirt (1.0.5-1) experimental; urgency=low

  * [c90d756] New upstream version 1.0.5
    Fixes a kFreeBSD build failure
  * [910e185] virthreadpthread: don't try to cast pthread_t to void*
    Fixes another build failure on kFreeBSD
  * [3f914e6] Add back sanitytest.py that got lost in the upstream tarball

 -- Guido Günther <agx@sigxcpu.org>  Thu, 02 May 2013 21:34:32 +0200

libvirt (1.0.5-0ubuntu1) saucy; urgency=low

  * New upstream release: 
    + Dropped patches:
      - debian/patches/fix-virterror-namechange
      - debian/patches/apparmor-use-apparmor-setfdlabel
      - debian/patches/prevent-lxc-shutdown-host.patch
      - debian/patches/apparmor-no-need-to-check-security-model
      - debian/patches/nonblock-fix.patch
     + Refreshed patches:
      - debian/patches/9002-better_default_uri_virsh.patch
      - debian/patches/enable-kvm-spice.patch
      - debian/patches/patch-qemuMonitorTextGetMigrationStatus-to-intercept.patch
   * debian/patches/Add-sanitytest.py.patch: Add patch to fix missing sanitytest.py
     when building the testsuite.
   * debian/libvirt-dev.install: dont't ship files for static linking.

 -- Chuck Short <zulcss@ubuntu.com>  Thu, 02 May 2013 10:21:49 -0500

libvirt (1.0.5~rc1-1) experimental; urgency=low

  * [c2302f5] Dont' fail with aug-tools installed.
    Thanks; Manuel VIVES (Closes: #705528)
  * [60e9fd4] New upstream version 1.0.5~rc1
  * [2625e81] Update patches. Dropped.
        Add-sanitytest.py.patch
    applied upstream.
  * [f16f97d] Don't ship files for static linking
  * [77362d6] Update symbols

 -- Guido Günther <agx@sigxcpu.org>  Tue, 30 Apr 2013 15:35:01 +0200

libvirt (1.0.4-1) experimental; urgency=low

  * [ddd8c30] lxc: Init activeUsbHostdevs (Closes: #700267)
  * [95adca0] New upstream version 1.0.4
  * [237a6ca] Update symbols file

 -- Guido Günther <agx@sigxcpu.org>  Mon, 01 Apr 2013 14:25:22 +0200

libvirt (1.0.3-1) experimental; urgency=low

  * [38c4d9a] New upstream version 1.0.3
  * [4fa2cf2] Update patches.
    Dropped (fixed upstream)
        - Hook-log-the-exit-status-of-the-hook-not-256.patch
  * [ab5c109] Add sanitytest.py missing from the upstream tarball
  * [524cdb1] Properly remove libvirt-qemu group and user.
    Thanks to Adam D.  Barratt for noticing
  * [5dbabe0] Use "getent passwd" instead of the non existing "getent user"
    Thanks again to Adam D. Barratt
  * [f59b09c] Only add libvirt-qemu user to libvirt-qemu group once when the
    group gets created

 -- Guido Günther <agx@sigxcpu.org>  Fri, 08 Mar 2013 19:07:33 +0100

libvirt (1.0.3~rc2-1) experimental; urgency=low

  * [9afb984] Enable systemd services
  * [623674a] New upstream version 1.0.3~rc2
  * [e0bccfc] Update symbols
  * [7414d07] Refresh patches.
    Drop
        Fix-missing-error-constants-in-libvirt-python-module.patch
        complete-virterror-virerror-name-change.patch
    fixed upstream.
  * [bae2f7b] Hook log the exit status of the hook not 256
    (Closes: #701570)

 -- Guido Günther <agx@sigxcpu.org>  Fri, 01 Mar 2013 16:54:48 +0100

libvirt (1.0.2-3) experimental; urgency=low

  * [6270001] CVE-2013-1766: Use libvirt-qemu as group to run qemu/kvm
    instances.  This makes sure we don't chown files to groups possibly used
    by other programs. (Closes: #701649)

 -- Guido Günther <agx@sigxcpu.org>  Tue, 26 Feb 2013 09:32:59 +0100

libvirt (1.0.2-2) experimental; urgency=low

  * [7e3ee2f] Cherry-pick upstream fixes for Python bindings (Closes: #700077)

 -- Guido Günther <agx@sigxcpu.org>  Fri, 08 Feb 2013 14:04:08 +0100

libvirt (1.0.2-1) experimental; urgency=low

  * [7adf6b4] New upstream version 1.0.2
  * [1156772] Drop Don-t-fail-the-build-without-libcurl-and-esx.patch
    applied upstream
  * [5d66d5a] Rediff patches

 -- Guido Günther <agx@sigxcpu.org>  Wed, 30 Jan 2013 21:06:02 +0100

libvirt (1.0.2-0ubuntu12) saucy; urgency=low

  * debian/libvirt-bin.{dirs,install}: install dnsmasq.d-available/libvirt-bin
    (LP: #1113821)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Mon, 29 Apr 2013 07:38:07 -0500

libvirt (1.0.2-0ubuntu11) raring; urgency=low

  * debian/patches/nonblock-fix.patch: cherrypicked upstream patch to
    not mark qemu migration fd non-blocking.  This fixes tcp live
    migration. (LP: #1157626)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Thu, 18 Apr 2013 10:43:26 -0500

libvirt (1.0.2-0ubuntu10) raring; urgency=low

  * Add code to postinst to fix any double-migration of /etc/dnsmasq.
    (LP: #1157332)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Thu, 28 Mar 2013 09:11:04 -0500

libvirt (1.0.2-0ubuntu9) raring; urgency=low

  * debian/patches/prevent-lxc-shutdown-host.patch: Backport fix
    from upstream to prevent lxc-containets shutting down the host. 

 -- Chuck Short <zulcss@ubuntu.com>  Mon, 25 Mar 2013 09:28:47 -0500

libvirt (1.0.2-0ubuntu8b1) raring; urgency=low

  * No-change rebuild against libudev1

 -- Martin Pitt <martin.pitt@ubuntu.com>  Wed, 13 Mar 2013 07:02:03 +0000

libvirt (1.0.2-0ubuntu8) raring; urgency=low

  * put libvirt-bin dnsmasq file into /etc/dnsmasq.d-available, and
    create a symlink in /etc/dnsmasq.d, to avoid problems when removing
    and re-installing libvirt-bin.  (LP: #1113821)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Tue, 26 Feb 2013 12:09:37 -0600

libvirt (1.0.2-0ubuntu7) raring; urgency=low

  * libvirt-bin.postinst: also put admin group members into the libvirtd
    group, to support systems installed before precise.  (LP: #1124127)
  * libvirt-bin.postinst: use getent group instead of grep /etc/group
  * rules: pass path to collie to enable sheepdog backend (LP: #1129107)
  * control, rules: enable building against libaudit, which is in main.

 -- Adam Conrad <adconrad@ubuntu.com>  Wed, 20 Feb 2013 15:50:47 -0700

libvirt (1.0.2-0ubuntu6) raring; urgency=low

  * Really refresh debian/patches/fix-ubuntu-xen-qemu-dm-path.patch and
    not only claim to and disable it.

 -- Stefan Bader <stefan.bader@canonical.com>  Tue, 19 Feb 2013 15:00:27 +0100

libvirt (1.0.2-0ubuntu5) raring; urgency=low

  * debian/apparmor/libvirt-qemu: allow qemu read access to
    @{PROC}/sys/vm/overcommit_memory

 -- Jamie Strandboge <jamie@ubuntu.com>  Thu, 14 Feb 2013 10:12:40 -0600

libvirt (1.0.2-0ubuntu4) raring; urgency=low

  * Update Readme.Debian
    - we use libvirtd, not libvirt group (LP: #1095140)
    - we add users from sudo, not admin group, to libvirtd.
  * libvirt-bin.postinst: put users from sudo, not admin group, into group
    libvirtd. (LP: #1124127)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Wed, 13 Feb 2013 09:47:58 -0600

libvirt (1.0.2-0ubuntu3) raring; urgency=low

  * libvirt-bin.postrm: only remove /etc/dnsmasq.d/libvirt-bin during
    remove.  (LP: #1113821)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Mon, 04 Feb 2013 10:35:47 -0600

libvirt (1.0.2-0ubuntu2) raring; urgency=low

  * debian/patches/fix-virterror-namechange: Include virterror otherwise
    python-libvirt wont be able to find any error codes. 

 -- Chuck Short <zulcss@ubuntu.com>  Fri, 01 Feb 2013 13:10:58 -0600

libvirt (1.0.2-0ubuntu1) raring; urgency=low

  [ Chuck Short ]
  * New upstream release: 
    + Dropped patches:
      - debian/patches/Add_RESUME_event_listener_to_qemu_monitor.patch
      - debian/patches/build-work-around-broken-kernel-header.patch
      - debian/patches/bridge-fix-persistent-networks.patch
      - debian/patches/CVE-2013-0170.patch
      - debian/patches/qemu-relax-hard-rss-limit.patch
      - debian/patches/9003-better-default-arch.patch
    + Refreshed patches:
      - debian/patches/fix-ubuntu-xen-qemu-dm-path.patch
      - debian/patches/Reduce-udevadm-settle-timeout-to-10-seconds.patch
      - debian/patches/9021-fix-uint64_t.patch
      - debian/patches/9020-lp545795.patch
      - debian/patches/Don-t-fail-if-we-can-t-setup-avahi.patch
    + debian/libvirt0.install: Add libvirt-lxc.so.*

  [ Serge Hallyn ]
  * debian/patches/fix-virterror-namechange: fix unfinished name change
    causing errors in generated libvirt.py.

 -- Chuck Short <zulcss@ubuntu.com>  Wed, 30 Jan 2013 09:04:38 -0600

libvirt (1.0.2~rc1-1) experimental; urgency=low

  * [5ce607c] Make python-libvirt depend on the exact same libvirt0 version
    (Closes: #697852)
  * [9335bdd] New upstream version 1.0.2~rc1
  * [8af24a9] Dropped patch
       Define-SANLK_INQ_WAIT-if-missing-in-headers.patch - fixed upstream
  * [be521af] Update symbols
  * [47dbf6b] New patch Don-t-fail-the-build-without-libcurl-and-esx.patch
  * [9e52c7b] Install libvirt-lxc.so

 -- Guido Günther <agx@sigxcpu.org>  Mon, 28 Jan 2013 08:55:36 +0100

libvirt (1.0.1-4) experimental; urgency=low

  * [753d41c] Add epoch to libnetcf1 dependency (Closes: #697457)

 -- Guido Günther <agx@sigxcpu.org>  Mon, 07 Jan 2013 15:59:51 +0100

libvirt (1.0.1-3) experimental; urgency=low

  * [11f91ea] Make sure we build against sid's libaudit since libaudit0 and
    libaudit1 aren't coinstallable (see #697459).

 -- Guido Günther <agx@sigxcpu.org>  Sat, 05 Jan 2013 17:04:51 +0100

libvirt (1.0.1-2) experimental; urgency=low

  * [0019ff9] Pass WITH_AUDIT to configure (Closes: #688177)
  * [faf7972] Add epoch to libnetcf build dependency since both the usuable
    and unusable verion carry an epoch now (Closes: #697303)

 -- Guido Günther <agx@sigxcpu.org>  Thu, 03 Jan 2013 22:36:56 +0100

libvirt (1.0.1-1) experimental; urgency=low

  * [e722456] New upstream version 1.0.1
  * [dccead7] Update patches
  * [1384de7] Dropped patches.
      * Define-SANLK_INQ_WAIT-if-missing-in-headers.patch - fixed upstream

 -- Guido Günther <agx@sigxcpu.org>  Sun, 23 Dec 2012 12:28:01 +0100

libvirt (1.0.1-0ubuntu4) raring; urgency=low

  * SECURITY UPDATE: denial of service and possible code execution via
    uninitialized pointer
    - debian/patches/CVE-2013-0170.patch: remove message from queue before
      freeing in src/rpc/virnetserverclient.c.
    - CVE-2013-0170

 -- Marc Deslauriers <marc.deslauriers@ubuntu.com>  Tue, 29 Jan 2013 15:19:54 -0500

libvirt (1.0.1-0ubuntu3) raring; urgency=low

  * debian/apparmor/libvirt-qemu: add /usr/share/ovmf/** r (LP: #1074207)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Tue, 29 Jan 2013 11:55:19 -0600

libvirt (1.0.1-0ubuntu2) raring; urgency=low

  * add qemu-relax-hard-rss-limit.rss to avoid OOM kills (LP: #1102290)
  * debian/rules: replace --without-vbox with --with-vbox (LP: #1103721)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Thu, 24 Jan 2013 13:00:48 -0600

libvirt (1.0.1-0ubuntu1) raring; urgency=low

  * New upstream version.  (LP: #1102487)
    + Dropped apparmor-allow-hugepages
    + update dnsmasq-as-priv-user, upstream now uses a configuration file.
    + swap Add_RESUME_event_listener_to_qemu_monitor.patch from git tree for
      the backported handle_resume_1.0.0-0ubuntu4.patch.
    + rebuild debian/patches/build-work-around-broken-kernel-header
    + add bridge-fix-persistent-networks.patch from upstream to fix bug
      where new networks are not marked persistent.

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Wed, 23 Jan 2013 13:24:30 -0600

libvirt (1.0.1~rc1-1) experimental; urgency=low

  * [dca42fb] Rely on DBus activation for hal (Closes: #694020)
  * [cbb8fd5] Disable firewalld since this would make us hard depend on DBus
  * [751c235] New upstream version 1.0.1~rc1
  * [f672206] Update patches
  * [a6fae3d] Define SANLK_INQ_WAIT if missing in headers
  * [50956c7] libvirt-guests init script moved
    for better systemd integration
  * [a05c9c7] Update symbols

 -- Guido Günther <agx@sigxcpu.org>  Thu, 13 Dec 2012 18:54:12 +0100

libvirt (1.0.0-1) experimental; urgency=low

  * [f5c8dae] New upstream version 1.0.0

 -- Guido Günther <agx@sigxcpu.org>  Tue, 06 Nov 2012 20:59:48 +0100

libvirt (1.0.0-0ubuntu5) raring; urgency=low

  * handle_resume_1.0.0-0ubuntu4.patch: Add RESUME event listener to qemu
    monitor (LP: #1097824)
  * build-work-around-broken-kernel-header: work around FTBFS due to a
    broken linux/if_bridge.h.

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Wed, 16 Jan 2013 09:15:20 -0600

libvirt (1.0.0-0ubuntu4) raring; urgency=low

  * debian/patches/apparmor-allow-hugepages: update apparmor policies to
    allow use of hugepages.  (LP: #646468)
  * debian/patches/vnc-socket.patch: If a vnc socket is in use, add it's
    path to the apparmor policy.  (LP: #1069534)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Wed, 05 Dec 2012 16:43:04 -0600

libvirt (1.0.0-0ubuntu3) raring; urgency=low

  * libvirt-bin.postinst: on first install, don't autostart virbr0 if
    192.168.122.0 already is in use.  On upgrade, always autostart
    virbr0 if and only if it was autostarted before the upgrade.

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Tue, 27 Nov 2012 00:25:11 -0600

libvirt (1.0.0-0ubuntu2) raring; urgency=low

  * debian/patches/add-armhf-sysinfo-infomration.patch: Disable
    to fix FTBFS on arm.

 -- Chuck Short <zulcss@ubuntu.com>  Mon, 19 Nov 2012 10:41:02 -0600

libvirt (1.0.0-0ubuntu1) raring; urgency=low

  [ Chuck Short ]
  * New upstream version: 
    + droppped:
      - debian/patches/CVE-2012-3445.patch
      - debian/patches/fix-cve-2012-4423
      - debian/patches/lp1039678.patch
      - debian/patches/add-libvirt-highbank-support.patch
      - debian/patches/add-armhf-cpuinfo-parser.patch
      - debian/patches/fix-lxc-container-unmounting.patch
      - debian/patches/libnl3-build-fix.patch
      - debian/patches/Don-t-require-gawk-for-a-simple-print-expression.patch
      - debian/patches/virsh-Initialize-library-before-calling-virResetLast.patch
      - debian/patches/qemu-warn-on-pc-0.12.patch
      - debian/patches/storage-default-pool-permission-mode-to-0755
      - debian/patches/netcf-daemon-fix-wrong-macro-name
      - debian/patches/xen_hypervisor-treat-missing-privcmd-file-as-temporary.patch
    + Re-diffed:
      - debian/patches/9002-better_default_uri_virsh.patch
      - debian/patches/dnsmasq-as-priv-user
      - debian/patches/enable-kvm-spice.patch
    + debian/control, debian/rules: Turn on rbd pool storage.

   [ Serge Hallyn ]
   * Add patches to fix apparmor labeling issue at VM start:
     - apparmor-no-need-to-check-security-model
     - apparmor-use-apparmor-setfdlabel

 -- Chuck Short <zulcss@ubuntu.com>  Mon, 12 Nov 2012 07:50:44 -0600

libvirt (1.0.0~rc3-1) experimental; urgency=low

  * [d3d06ad] New upstream version 1.0.0~rc3
  * [610ff5d] Drop Create-temporary-dir-for-socket.patch, applied upstream.

 -- Guido Günther <agx@sigxcpu.org>  Thu, 01 Nov 2012 21:59:41 +0100

libvirt (1.0.0~rc2-3) experimental; urgency=low

  * [55ec399] Don't try to configure systemtap support on architectures
    lacking support for it.

 -- Guido Günther <agx@sigxcpu.org>  Tue, 30 Oct 2012 13:28:50 +0100

libvirt (1.0.0~rc2-2) experimental; urgency=low

  * [a2dd93d] Adjust systemtap build-dependency to architectures that actually
    have it.

 -- Guido Günther <agx@sigxcpu.org>  Tue, 30 Oct 2012 07:21:19 +0100

libvirt (1.0.0~rc2-1) experimental; urgency=low

  * [2b79e3d] New upstream version 1.0.0~rc2
  * [79d2200] Add empty systemtap dir so dh_install doesn't fail on kFreeBSD
  * [e68850a] Create temporary dir for socket to avoid ENAMETOOLONG

 -- Guido Günther <agx@sigxcpu.org>  Mon, 29 Oct 2012 10:55:22 +0100

libvirt (1.0.0~rc1-1) experimental; urgency=low

  * [51182d6] New upstream version 1.0.0~rc1
  * [a8b162b] Refresh patches.
    Fixed upstream:
        * Properly-parse-unsigned-long-long.patch
        * storage-lvm-Don-t-overwrite-lvcreate-errors.patch
        * storage-lvm-lvcreate-fails-with-allocation-0-don-t-d.patch
  * [418be04] Update symbols
  * [f3fdef3] Install systemtap tapsets on Linux
  * [e18098f] Build require a netcf linked against libnl-3-dev
  * [8acbd16] Adjust to changed policy file names

 -- Guido Günther <agx@sigxcpu.org>  Sun, 28 Oct 2012 17:13:08 +0100

libvirt (0.10.2-4) experimental; urgency=low

  * [cb74dfd] Properly parse (unsigned) long long in the python bindings to
    fix those on platforms where sizeof(long) != sizeof(long long).
    This fixes virt-install's '--location='.

 -- Guido Günther <agx@sigxcpu.org>  Sat, 13 Oct 2012 10:31:21 +0200

libvirt (0.10.2-3) experimental; urgency=low

  * [ce15a08] Build against libnl-3 on Linux systems (Closes: #688167)
  * [19ec20b] Depend on a libnetcf1 that's build against libnl3 to avoid
    pulling in libnl1 symbols.

 -- Guido Günther <agx@sigxcpu.org>  Tue, 09 Oct 2012 20:30:51 +0200

libvirt (0.10.2-2) experimental; urgency=low

  * [20830ab] Mark sheepdog as linux-any since it's not available on kFreeBSD
  * [be7423c] Allow xen toolstack to find it's binaries.
    Thanks to George Dunlap for the patch. (Closes: #685749)

 -- Guido Günther <agx@sigxcpu.org>  Tue, 02 Oct 2012 19:20:17 +0200

libvirt (0.10.2-1) experimental; urgency=low

  * [40e1704] Enable auditing on linux-any.
    Thanks to Laurent Bigonville for testing. (Closes: 688177)
  * [8d56723] New upstream version 0.10.2
  * [312d8e6] Update symbols

 -- Guido Günther <agx@sigxcpu.org>  Thu, 27 Sep 2012 16:25:26 +0200

libvirt (0.10.1-2) experimental; urgency=low

  * [cd7e695] Recommend pm-utils used for host power management.
  * [2f928f7] Add missing "-d" to libvirt-bin's restart option otherwise
    daemon restarts will just hang. Thanks to Laurent Bigonville.
    (Closes: #688146)

 -- Guido Günther <agx@sigxcpu.org>  Wed, 19 Sep 2012 22:32:34 +0200

libvirt (0.10.1-1) experimental; urgency=low

  * [aa3d87e] New upstream version 0.10.1
  * [39ae471] Drop Revert-security-Add-DAC-to-security_drivers.patch: fixed
    upstream.
  * [b531061] Update symbol file
  * [8d4f9dc] Enable sheepdog support

 -- Guido Günther <agx@sigxcpu.org>  Thu, 06 Sep 2012 13:06:02 +0200

libvirt (1.0.0-2) unstable; urgency=low

  * Upload to unstable
  * [dca42fb] Rely on DBus activation for hal (Closes: #694020)
  * [cbb8fd5] Disable firewalld since this would make us hard depend on DBus

 -- Guido Günther <agx@sigxcpu.org>  Mon, 26 Nov 2012 22:10:17 +0100

libvirt (0.10.0-1) experimental; urgency=low

  * [b3ae724] New upstream version 0.10.0
  * [19618d9] Update symbols file
  * Dropped patches, fixed upstream:
        * security/CVE-2012-3445.patch
        * virsh-Initialize-library-before-calling-virResetLast.patch
        * Don-t-require-gawk-for-a-simple-print-expression.patch
  * [2a5d5b7] Revert "security: Add DAC to security_drivers" to allow guest
    start. Thanks to Peter Krempa and Marcelo Cerri for tracking this down.

 -- Guido Günther <agx@sigxcpu.org>  Thu, 30 Aug 2012 09:27:43 +0200

libvirt (0.9.13-1) experimental; urgency=low

  * [6cf501c] New upstream version 0.9.13
  * [8ff7077] Fix CVE-2012-3445 with upstream commit
    6039a2cb49c8af4c68460d2faf365a7e1c686c7b. (Closes: #683483)

 -- Guido Günther <agx@sigxcpu.org>  Wed, 01 Aug 2012 13:14:30 +0200

libvirt (0.9.13-0ubuntu12) quantal; urgency=low

  * Refresh fix-ubuntu-xen-qemu-dm-path.patch to only use executable
    names and let the toolchain find out the right paths (LP: #914788).
    Thanks George Dunlap.
  * Refresh and re-activate xen_hypervisor-treat-missing-privcmd-file-
    as-temporary.patch (LP: #922486)

 -- Stefan Bader <stefan.bader@canonical.com>  Fri, 05 Oct 2012 11:35:43 +0200

libvirt (0.9.13-0ubuntu11) quantal-proposed; urgency=low

  * SECURITY UPDATE: denial of service via invalid RPC command
    - debian/patches/CVE-2012-3445.patch: make sure nparams isn't set to
      zero in daemon/remote.c.
    - CVE-2012-3445

 -- Marc Deslauriers <marc.deslauriers@ubuntu.com>  Wed, 26 Sep 2012 11:49:45 -0400

libvirt (0.9.13-0ubuntu10) quantal; urgency=high

  * apply fix-cve-2012-4423 from upstream to prevent potential daemon
    segfaults with newer virsh.
    - Fixes: CVE-2012-4423.

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Fri, 14 Sep 2012 11:05:40 -0500

libvirt (0.9.13-0ubuntu9) quantal; urgency=low

  * debian/patches/lp1039678.patch: fix segfault in 'snapshot-list'
    - LP: #1039678

 -- Jamie Strandboge <jamie@ubuntu.com>  Tue, 21 Aug 2012 13:59:34 -0500

libvirt (0.9.13-0ubuntu8) quantal-proposed; urgency=low

  * debian/libvirt-bin.apport: add filter on AppArmor profile names to
    prevent false positives from denials originating in other packages.

 -- Marc Deslauriers <marc.deslauriers@ubuntu.com>  Mon, 20 Aug 2012 10:49:17 -0400

libvirt (0.9.13-0ubuntu7) quantal; urgency=low

  * debian/apparmor/libvirt-qemu: allow owner read access to @{PROC}/*/auxv

 -- Jamie Strandboge <jamie@ubuntu.com>  Tue, 14 Aug 2012 16:44:30 -0500

libvirt (0.9.13-0ubuntu6) quantal; urgency=low

  * enable netcf support (LP: #520386)
    - debian/control: build-dep on libnetcf-dev
    - debian/rules: add --with-netcf to configure args
  * add patch netcf-daemon-fix-wrong-macro-name from upstream so netcf support
    can actually work.

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Wed, 08 Aug 2012 07:54:16 -0500

libvirt (0.9.13-0ubuntu5) quantal; urgency=low

  * add patch Reduce-udevadm-settle-timeout-to-10-seconds.patch (copied from
    Debian tree) to fix 3 minute hang during pool-refresh when using LVM
    backed pools.  (LP: #1027987)
  * debian/control: add pm-utils to libvirt-bin Suggests.  (LP: #994476)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Thu, 26 Jul 2012 11:05:18 -0500

libvirt (0.9.13-0ubuntu4) quantal; urgency=low

  * debian/patches/add-armhf-sysinfo-infomration.patch:
    Provides cpuinfo for armhf cpus.
  * debian/patches/add-armhf-cpuinfo-parser.patch:
    Fixes compile time warning about armhf cpus.

 -- Chuck Short <zulcss@ubuntu.com>  Thu, 19 Jul 2012 14:54:47 -0500

libvirt (0.9.13-0ubuntu3) quantal; urgency=low

  * debian/apparmor/libvirt-qemu: add ceph.conf (LP: #1026404)
  * debian/patches: re-add 9002-better_default_uri_virsh.patch (LP: #1026515)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Thu, 19 Jul 2012 07:58:39 -0500

libvirt (0.9.13-0ubuntu2) quantal; urgency=low

  * Apply upstream patch to switch default storage pool dir perms from 0700
    to 0755.  Then push our own patch to change that to 0711.  We'll get the
    upstream patch on 0.9.14 merge, but we'll want to keep our patch on top
    of that.

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Mon, 16 Jul 2012 18:06:43 +0000

libvirt (0.9.13-0ubuntu1) quantal; urgency=low

  * New upstream version: 
  * debian/rules: Remove .la files
  * debian/control: Dropped debian vcs info.
  * Dropped:
    - debian/paches/9022-pass-the-virt-driver-name-into-security-drivers:
      Already applied upstream.
    - debian/patches/9023-dont-enable-apparmor-driver-with-lxc
      Already applied upstream.
    - debian/patches/9024-initialize-random-generator-in-lxc:
      Already applied upstream.
  * Re-diffed:
    - debian/patches/9002-better_default_uri_virsh.patch
  * Added:
    - debian/patches/add-libvirt-highbank-support.patch: Add highbank 
      CPU detection support.
    - debian/patches/fix-lxc-container-unmounting.patch: Fix container
      mounting.

 -- Chuck Short <zulcss@ubuntu.com>  Wed, 11 Jul 2012 12:37:49 -0500

libvirt (0.9.13~rc2-1) experimental; urgency=low

  * [505f873] New upstream version 0.9.13~rc2
  * [bd1c1e0] Rebase patches

 -- Guido Günther <agx@sigxcpu.org>  Fri, 29 Jun 2012 11:23:54 +0200

libvirt (0.9.13~rc1-2) experimental; urgency=low

  * [628a05a] Add empty systemd dir on kFreeBSD to make dh_install pass
  * [e5b4fbf] Remove -d from libvirtd_opts
    so we can use the same options in the systemd unit file without having
    to fork there too.

 -- Guido Günther <agx@sigxcpu.org>  Thu, 28 Jun 2012 11:30:29 +0200

libvirt (0.9.13~rc1-1) experimental; urgency=low

  * [9deae39] New upstream version 0.9.13~rc1
  * [487acd7] Drop Include-stdint.h-for-uint32_t.patch fixed upstream
  * [ab7be10] Drop Only-check-for-cluster-fs-if-we-re-using-a-filesyste.patch
    applied upstream
  * [385bac4] Rebase remaining patches
  * [cb0d1f7] Update symbol versions
  * [c2bd465] Remove *.la files generated for dynamically loaded modules
  * [e4714b7] Add sanlock support.
    Thanks to David Weber (Closes: #676345)
  * [5f715ed] Install systemd init scripts on Linux

 -- Guido Günther <agx@sigxcpu.org>  Tue, 26 Jun 2012 15:29:27 +0200

libvirt (0.9.12-5) unstable; urgency=high

  * Setting urgency to high since it's a security only fix
  * [c0f4995] New patch security-Fix-libvirtd-crash-possibility.patch.
    Fix libvirtd crash possibility (CVE-2012-4423)
    Thanks to Martin Kletzander (Closes: #687598)

 -- Guido Günther <agx@sigxcpu.org>  Fri, 14 Sep 2012 22:35:08 +0200

libvirt (0.9.12-4) unstable; urgency=low

  * [80ac2a6] Fix CVE-2012-3445 with upstream commit
    6039a2cb49c8af4c68460d2faf365a7e1c686c7b (Closes: #683483)

 -- Guido Günther <agx@sigxcpu.org>  Wed, 01 Aug 2012 21:12:13 +0200

libvirt (0.9.12-3) unstable; urgency=low

  * [6b610b6] Include stdint.h for uint32_t to fix the build on kFreeBSD

 -- Guido Günther <agx@sigxcpu.org>  Wed, 20 Jun 2012 08:24:38 +0200

libvirt (0.9.12-2) unstable; urgency=medium

  * Upload to unstable to fix CVE-2012-2693. Bumping urgency to medium.
    (Closes: #677496)
  * [9515e28] Only check for cluster fs if we're using a filesystem
    (Closes: #676328)
  * [202939f] Reduce udevadm settle timeout to 10 seconds
    (Closes: #663931)

 -- Guido Günther <agx@sigxcpu.org>  Thu, 14 Jun 2012 19:37:42 +0200

libvirt (0.9.12-1) experimental; urgency=low

  * [75e280b] New upstream version 0.9.12

 -- Guido Günther <agx@sigxcpu.org>  Tue, 15 May 2012 14:31:26 +0200

libvirt (0.9.12-0ubuntu5) quantal; urgency=low

  * 9024-initialize-random-generator-in-lxc: invoke virRandomInitialize()
    to prevent segfaults when lxc uses virRandomBits().  (LP: #1023205)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Wed, 11 Jul 2012 07:59:03 -0500

libvirt (0.9.12-0ubuntu4) quantal; urgency=low

  * 9022-pass-the-virt-driver-name-into-security-drivers and
    9023-dont-enable-apparmor-driver-with-lxc: fix libvirt-lxc breakages
    due to incomplete apparmor security driver for lxc.

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Fri, 29 Jun 2012 18:15:04 -0500

libvirt (0.9.12-0ubuntu3) quantal; urgency=low

  * install apport hook as right name - libvirt-bin is the binary package,
    the source package name is libvirt.  (LP: #1007405)
  * install /etc/dnsmasq.d/libvirt to configure system wide dnsmasq to not
    listen on the libvirt bridge.  (Following Stéphane's lxc example)
    (LP: #928524) (LP: #231060)
    - postinst: restart dnsmasq; postrm: remove dnsmasq.d/libvirt file and
      restart dnsmasq;  rules, libvirt-bin.dirs and libvirt-bin.install:
      install new debian/libvirt-bin.dnsmasq file.

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Fri, 01 Jun 2012 09:36:58 -0500

libvirt (0.9.12-0ubuntu2) quantal; urgency=low

  * Warn user about bad pc-0.12 machine type, and help user transition.
    (LP: #1001625)
    - qemu-warn-on-pc-0.12.patch: When defining or starting a VM which uses the
      pc-0.12 machine type, warn in libvirtd.log. 
    - debian/libvirt-migrate-qemu-machinetype: automatically migrate QEMU VMs
      to newest machine type.  This is not done automatically as there will
      be some users who have good reason to stay with pc-0.12.

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Mon, 28 May 2012 17:48:50 +0000

libvirt (0.9.12-0ubuntu1) quantal; urgency=low

  * New upstream version:
    * Synchronize with debian packaging:
      - debian/control: Update build depends.
      - debian/libvirt-bin.postrm: Cleanup /var/log/libvirt
        on purge.
      - Bump standards verson (no changes).
      - debian/patches/Don-t-fail-if-we-can-t-setup-avahi.patch: Added
    * Dropped patches:
      - debian/patches/Debianize-libvirt-guests.patch
      - debian/patches/rewrite-lxc-controller-eof-handling-yet-again
      - debian/patches/ubuntu/libnl13.patch
      - debian/patches/ubuntu/fix-lxc-startup-error.patch
      - debian/patches/ubuntu/fix-bridge-fd.patch
      - debian/patches/ubuntu/skip-labelling-network-disks.patch
      - debian/patches/ubuntu/xen-xend-shutdown-detection.patch
      - debian/patches/ubuntu/xen-config-no-vfb-for-hvm.patch
      - debian/patches/debian/Disable-daemon-start-test.patch
      - debian/patches/debian/Disable-gnulib-s-test-nonplocking-pipe.sh.patch
      - debian/patches/ubuntu/9006-default-config-test-case.patch
      - debian/patches/fix-block-migration.patch
      - debian/patches/ubuntu/9022-qemu-unescape-HMP-commands-before-converting-them-to.patch
      - debian/patches/ubuntu/9023-qemu-change-rbd-auth_supported-separation-character-.patch
      - debian/patches/ubuntu/9024-qemu-allow-snapshotting-of-sheepdog-and-rbd-disks.patch
      - debian/patches/9025-qemu-change-rbd-auth_supported-separation-character-.patch
      - debian/patches/ubuntu/arm-gcc-workaround.patch
    * Rediffed:
      - debian/patches/Allow-libvirt-group-to-access-the-socket.patch
      - debian/patches/Disable-failing-virnetsockettest.patch
      - debian/patches/dnsmasq-as-priv-user
      - debian/patches/9002-better_default_uri_virsh.patch
    * debian/control: Add libnl-route-3-dev ass a build depends.
    * debian/patches/libnl3-build-fix.patch: Fix build with libnl3.

 -- Chuck Short <zulcss@ubuntu.com>  Sun, 13 May 2012 15:44:12 -0400

libvirt (0.9.12~rc2-1) experimental; urgency=low

  * [721a2d8] New upstream version 0.9.12~rc2
  * [a469ff6] Update symbols
  * [a483028] Daemon tests changed so update the patches
  * [fbd9c12] Drop virURIParse-don-t-forget-to-copy-the-user-part applied
    upstream
  * [00931ed] Update gbp.conf for experimental

 -- Guido Günther <agx@sigxcpu.org>  Mon, 14 May 2012 08:43:49 +0200

libvirt (0.9.11.3-1) unstable; urgency=low

  * [f254551] New upstream version 0.9.11.3
  * [5362229] Drop virURIParse-don-t-forget-to-copy-the-user-part.patch.
    Fixed upstream.
  * [36ed9f0] Update symbols file

 -- Guido Günther <agx@sigxcpu.org>  Mon, 30 Apr 2012 09:44:51 +0200

libvirt (0.9.11-2) unstable; urgency=low

  * [70dcb2e] Make module-init-tools a linux-any dependency
    (Closes: #667477)
  * [ea112f4] Depend on dwarves for checks requiring pdwtags
  * [5152b85] virURIParse: don't forget to copy the user part
    (Closes: #667636)

 -- Guido Günther <agx@sigxcpu.org>  Mon, 09 Apr 2012 17:29:46 +0200

libvirt (0.9.11-1) unstable; urgency=low

  * Upload to unstable
  * [34aa61b] New upstream version 0.9.11
  * [649c570] Build-dependency on virtualbox-ose no longer needed.
    Thanks to Jean-Baptiste Rouault (Closes: #663589)
  * [8323080] We need gcrypt so build-depend on it although it's already being
    pulled in by gnutls. Thanks to Serge Hallyn (Closes: #660018)

 -- Guido Günther <agx@sigxcpu.org>  Tue, 03 Apr 2012 20:18:08 +0200

libvirt (0.9.11~rc1-1) experimental; urgency=low

  * [b8ad28b] Build-dependency on virtualbox-ose no longer needed.
    Thanks to Jean-Baptiste Rouault (Closes: #663589)
  * [049b63b] New upstream version 0.9.11~rc1
  * [deacbc5] Update symbols file
  * [697838f] Update Debianize-libvirt-guests.patch
    with new config option PARALLEL_SHUTDOWN
  * [ba62183] Bump standards version (no changes)
  * [bece9d3] Install missing manpages

 -- Guido Günther <agx@sigxcpu.org>  Mon, 26 Mar 2012 21:35:21 +0200

libvirt (0.9.10-2) unstable; urgency=low

  * Upload to unstable

 -- Guido Günther <agx@sigxcpu.org>  Wed, 22 Feb 2012 13:42:23 +0100

libvirt (0.9.10-1) experimental; urgency=low

  * [63a7e8c] New upstream version 0.9.10

 -- Guido Günther <agx@sigxcpu.org>  Wed, 15 Feb 2012 09:05:27 +0100

libvirt (0.9.10~rc1-1) experimental; urgency=low

  * Upload to experimental
  * [8f97b0f] New upstream version 0.9.10~rc1
  * [7636706] Update symbols
  * [8d776a5] Drop xen-Don-t-crash-when-we-fail-to-init-caps.patch applied
    upstream.

 -- Guido Günther <agx@sigxcpu.org>  Tue, 07 Feb 2012 19:47:45 +0100

libvirt (0.9.9-3) unstable; urgency=low

  * Upload to unstable
  * [367b47b] Enable netcf support (Closes: #567606)

 -- Guido Günther <agx@sigxcpu.org>  Sun, 05 Feb 2012 14:10:07 +0100

libvirt (0.9.9-2) experimental; urgency=low

  * [97182f9] Don't fail if we can't setup avahi. We'd need to make this a
    hard dependency otherwise.
  * [bf94bbd] xen: Don't crash when we fail to init caps (Closes: #656075)
  * [56f2dbc] Cleanup /var/log/libvirt on purge (Closes: #656460)

 -- Guido Günther <agx@sigxcpu.org>  Fri, 03 Feb 2012 17:45:12 +0100

libvirt (0.9.9-1) experimental; urgency=low

  * [dd5f96f] New upstream version 0.9.9
  * [623022f] Rebase patches
  * [77eb5a4] Update symbols file

 -- Guido Günther <agx@sigxcpu.org>  Tue, 10 Jan 2012 13:40:41 +0100

libvirt (0.9.8-2ubuntu18) quantal; urgency=low

  * debian/apparmor/usr.sbin.libvirtd: allow execution of /lib/udev/scsi_id
    (LP: #992378)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Wed, 02 May 2012 14:02:32 -0500

libvirt (0.9.8-2ubuntu17) precise; urgency=low

  * debian/apparmor/usr.lib.libvirt.virt-aa-helper: add /**.qed r so qed
    drives in non-standard locations can be used.  (LP: #981571)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Mon, 16 Apr 2012 11:30:47 -0500

libvirt (0.9.8-2ubuntu16) precise; urgency=low

  [ Serge Hallyn ]
  * Apply patches from Josh Durgin <josh.durgin@dreamhost.com> to make
    attaching rbd volumes and taking snapshots of them work.
    - ubuntu/9022-qemu-unescape-HMP-commands-before-converting-them-to.patch
    - ubuntu/9023-qemu-change-rbd-auth_supported-separation-character-.patch
    - ubuntu/9024-qemu-allow-snapshotting-of-sheepdog-and-rbd-disks.patch
    - ubuntu/9025-qemu-change-rbd-auth_supported-separation-character-.patch

  [ Stefan Bader ]
  * Do not use vfb sections in HVM graphics definitions (side-
    effect will create a vkbd device as well which causes error
    messages in the HVM guest). (LP: #973529)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Thu, 05 Apr 2012 11:43:15 -0500

libvirt (0.9.8-2ubuntu15) precise; urgency=low

  [ Stefan Bader ]
  * Use domain/status to check for inactive domains in the xend sub-
    driver. (LP: #929626)
  * Prevent the hypervisor sub-driver from logging an internal error
    just because it cannot find a certain domain when looking for
    the number of vcpus. (LP: #963006)

 -- Stefan Bader <stefan.bader@canonical.com>  Fri, 23 Mar 2012 11:38:24 +0100

libvirt (0.9.8-2ubuntu14) precise; urgency=low

  * re-enable numa (undo delta against debian)  (LP: #614322):
    - debian/control: remove from dependencies
    - debian/rules: turn it off

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Tue, 13 Mar 2012 11:25:53 -0500

libvirt (0.9.8-2ubuntu13) precise; urgency=low

  * ubuntu/skip-labelling-network-disks.patch: don't try to label network
    drives with apparmor.  It fails.  (LP: #949428)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Mon, 12 Mar 2012 14:20:05 -0500

libvirt (0.9.8-2ubuntu12) precise; urgency=low

  [ Stefan Bader ]
  * Never use type=ioemu for NIC definitions. It is not needed
    and actually breaks the paravirt interface which always gets
    created in parallel.

 -- Stefan Bader <stefan.bader@canonical.com>  Wed, 07 Mar 2012 15:08:55 +0100

libvirt (0.9.8-2ubuntu11) precise; urgency=low

  [ Serge Hallyn ]
  * run dnsmasq as a new libvirt-dnsmasq user (LP: #938255)
    - ubuntu/dnsmasq-as-priv-user: add '-u libvirt-dnsmasq' to dnsmasq args
    - debian/libvirt-bin.postinst: create libvirt-dnsmasq user
    - tests/networkxml2argvdata/*.argv: update expected dnsmasq command lines
      to include '-u libvirt-dnsmasq'.

  [ Chuck Short ]
  * cherry-pick rewrite-lxc-controller-eof-handling-yet-again (commit
    9130396214975ba2251082f943c9717281039050) from upstream.

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Fri, 02 Mar 2012 08:49:41 -0600

libvirt (0.9.8-2ubuntu10) precise; urgency=low

  * debian/control: add libgcrypt11-dev to build-depends (LP: #932889)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Wed, 15 Feb 2012 13:13:09 -0600

libvirt (0.9.8-2ubuntu9) precise; urgency=low

  [ Stefan Bader ]
  * xen_hypervisor: libvirtd can be started before xenfs has been loaded
    as a module. A missing privcmd file is not necessarily a permanent
    error. (LP: #922486)

  [ Serge Hallyn ]
  * debian/libvirt-bin.upstart: start on just 'runlevel [2345]'

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Wed, 08 Feb 2012 11:20:35 -0600

libvirt (0.9.8-2ubuntu8) precise; urgency=low

  * ubuntu/fix-bridge-fd.patch: cherrypick commit
    2d5046d31f4f5c961fc4aa6b415a00bb9eadae2b from upstream to write the
    bridge delay to the right file.  (LP: #924446)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Wed, 01 Feb 2012 11:13:23 -0600

libvirt (0.9.8-2ubuntu7) precise; urgency=low

  [ David weber ]
  * debian/patches/fix-block-migration.patch: Fix block-migration for large images.

  [ Guilhem Lettron ]
  * debian/apparmor/libvirt-qemu: add apparmor rule for mavtap  (LP: #921870)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Thu, 26 Jan 2012 11:22:04 -0600

libvirt (0.9.8-2ubuntu6) precise; urgency=low

  * debian/patches/fix-lxc-startup-error.patch: Fix lxc start up error.
    (LP: #921004)

 -- Chuck Short <zulcss@ubuntu.com>  Tue, 24 Jan 2012 10:05:29 -0500

libvirt (0.9.8-2ubuntu5) precise; urgency=low

  * debian/libvirt-bin.postinst: even if we think it's a new install, don't
    assume that /etc/libvirt/qemu/networks/autostart/default.xml doesn't
    exist.

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Mon, 23 Jan 2012 12:43:02 -0600

libvirt (0.9.8-2ubuntu4) precise; urgency=low

  * debian/patches/fix-ubuntu-xen-qemu-dm-patch.patch:
    Update patch due to failing tests. 

 -- Chuck Short <zulcss@ubuntu.com>  Fri, 20 Jan 2012 16:05:45 -0500

libvirt (0.9.8-2ubuntu3) precise; urgency=low

  * debian/control: add dbus to libvirt-bin depends.  It fails to start
    otherwise.  (LP: #918343)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Thu, 19 Jan 2012 16:11:44 -0600

libvirt (0.9.8-2ubuntu2) precise; urgency=low

  * debian/patches/fix-ubuntu-xen-qemu-dm-path.patch:
    Fix qemu-dm paths so Xen can be used with libvirt.
    (LP: #914788)

 -- Chuck Short <zulcss@ubuntu.com>  Wed, 18 Jan 2012 14:31:27 -0500

libvirt (0.9.8-2ubuntu1) precise; urgency=low

  * Merge from Debian Unstable, remaining changes are: 
    - debian/control:
      * set X-Python-Version to 2.7, as 2.6 is not in oneiric.
      * set ubuntu maintainer
      * Build-Depends:
        - swap  open-iscsi to open-iscsi-utils
        - remove virtualbox-ose
        - add libapparmor-dev
        - swap libnl-dev for libnl3-dev
      * convert Vcs-Git to Xs-Debian-Vcs-Git
      * libvirt-bin Depends: move netcat-openbsd, bridge-utils, dnsmasq-base
        (>= 2.46-1), and iptables from Recommends to Depends
      * libvirt-bin Recommends: move qemu to Suggests
      * libvirt-bin Suggests: add apparmor
      * libvirt0 Recommends: move lvm2 to Suggests
      * Install cgroup-lite
    - keep debian/libvirt-bin.apport
    - keep debian/libvirt-bin.cron.daily
    - debian/libvirt-bin.dirs:
      * add apparmor, cron.daily, and apport dirs
    - debian/libvirt-bin.examples:
      * add debian/libvirt-suspendonreboot
    - debian/libvirt-bin.install:
      * add /etc/apparmor.d files
      * add apport hook
    - debian/libvirt-bin.postinst:
      * replace libvirt groupname with libvirtd
      * add each admin user to libvirtd group
      * call apparmor_parser on usr.sbin.libvirtd and
        usr.lib.libvirt.virt-aa-helper
      * call 'libvirt-migrate-qemu-disks -a' after
        libvirt-bin has started if migrating from
        older than 0.8.3-1ubuntu1
    - debian/libvirt-bin.postrm:
      * replace libvirt groupname with libvirtd
      * remove usr.sbin.libvirtd and
        usr.lib.libvirt.virt-aa-helper
    - keep added files under debian/:
      * libvirt-bin.upstart
      * libvirt-migrate-qemu-disks
      * libvirt-migrate-qemu-disks.1
      * libvirt-suspendonreboot
      * apparmor profiles
    - debian/README.Debian:
      * add 'Apparmor Profile' section
      * add 'Disk migration' section
    - debian/rules:
      * don't build with vbox since virtualbox-ose is in universe
        - remove WITH_VBOX, add explicit --without-vbox
      * add --with-apparmor to DEB_CONFIGURE_EXTRA_FLAGS
      * set DEB_DH_INSTALLINIT_ARGS to '--upstart-only'
      * remove unneeded clean:: section (they only deal with sysvinit stuff)
      * comment out binary-install/libvirt-bin:: part dealing with sysvinit
      * dont ship libvirt-guests init script for now.
      * add build/libvirt-bin:: section to install
        - apparmor files
        - apport hooks
        - libvirt-migrate-qemu-disks
  * debian/patches/series:
    - don't apply Debian-specific Debianize-libvirt-guests.patch (sysvinit only)
    - don't apply Disable qemu-disable-network.diff.patch
  * debian/patches(/ubuntu):
    - Disable-gnulib-s-test-nonplocking-pipe.sh.patch is in sid's debian/patches
    - drop patches:
      * 9000-delayed_iff_up_bridge.patch
      * 9011-move-ebtables-script.patch
      * apparmor-allow-tunnelled-migration.patch
      * apparmor-allow-tunnelled-migration-2.patch
      * fix-qemu-1.0.patch
      * conf-dont-drop-console-def-ondomain-restart.patch
    - keep (and refreshed) patches:
      * 9002-better_default_uri_virsh.patch
      * 9003-better-default-arch.patch
      * 9004-libvirtd-group-name.patch
      * 9005-increase-unix-socket-timeout.patch
      * 9006-default-config-test-case.patch
      * 9020-lp545795.patch
      * 9021-fix-uint64_t.patch
      * libnl3.patch
      * arm-gcc-workaround.patch
  * disable numa - until the MIR for numa is done
    - debian/control: remove from dependencies
    - debian/rules: turn it off
  * Fix default network autostart symlink disappearing on upgrade (LP: #901298)
    - debian/libvirt-bin.preinst: note if the symlink exists
    - debian/libvirt-bin.postinst: if symlink existed, OR if we are upgrading
      from one of the broken versions, then recreate the symlink.  (Continue
      to create the symlink on new installs.)
   * enable use of libvirt with kvm-spice (LP: #903962):
    . src/qemu/qemu_capabilities.c: search for 'kvm-spice' before
      'kvm' (debian/patches/ubuntu/enable-kvm-spice.patch)
    . debian/apparmor/libvirt-qemu:
      * prepend 'owner' to /run/shm/spice.* rule
      * add more needed spice perms 

 -- Chuck Short <zulcss@ubuntu.com>  Fri, 13 Jan 2012 15:11:48 +0100

libvirt (0.9.8-2) unstable; urgency=low

  * Upload to unstable. Works with qemu-kvm and qemu 1.0.
    (Closes: #652454)

 -- Guido Günther <agx@sigxcpu.org>  Sat, 17 Dec 2011 14:01:20 +0100

libvirt (0.9.8-1) experimental; urgency=low

  * [8a35c97] New upstream version 0.9.8
  * [52e19b5] Drop remote_driver-don-t-fail-if-keepalive-check-fails.patch
    applied upstream.

 -- Guido Günther <agx@sigxcpu.org>  Thu, 08 Dec 2011 23:31:31 +0100

libvirt (0.9.8~rc2-2) experimental; urgency=low

  * [e50aac4] remote_driver: don't fail if keepalive check fails. This fixes
    remote connections to older libvirt versions.

 -- Guido Günther <agx@sigxcpu.org>  Mon, 05 Dec 2011 18:00:06 +0100

libvirt (0.9.8~rc2-1) experimental; urgency=low

  * [9b1abb2] New upstream version 0.9.8~rc2

 -- Guido Günther <agx@sigxcpu.org>  Sun, 04 Dec 2011 13:58:31 +0100

libvirt (0.9.8~rc1-1) experimental; urgency=low

  * [99476ba] New upstream version 0.9.8~rc1
  * [3bdcf07] Make radvd a linux-any build-dep (Closes: #649635)
  * [7546785] Drop patch storage-forbid-rebuilding-existing-disk-storage-pool
    applied upstream.
  * [0c2afdb] Rediff remaining patches
  * [3d121b2] Update symbols file

 -- Guido Günther <agx@sigxcpu.org>  Sat, 03 Dec 2011 14:49:49 +0100

libvirt (0.9.7-2ubuntu16) precise; urgency=low

  * Don't apply ubuntu/conf-dont-drop-console-def-ondomain-restart.patch:
    it breaks virt-manager.

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Fri, 13 Jan 2012 14:59:03 +0100

libvirt (0.9.7-2ubuntu15) precise; urgency=low

  * debian/patches/ubuntu/conf-dont-drop-console-def-ondomain-restart.patch:
    cherrypicked from upstream to fix 'virsh console'.  (LP: #915355)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Thu, 12 Jan 2012 23:47:09 +0100

libvirt (0.9.7-2ubuntu14) precise; urgency=low

  * debian/apparmor/usr.lib.libvirt.virt-aa-helper: Update for nova.
    (LP: #907269) 

 -- Chuck Short <zulcss@ubuntu.com>  Wed, 11 Jan 2012 09:50:26 -0500

libvirt (0.9.7-2ubuntu13) precise; urgency=low

  * move cgroup-lite | cgroup-bin to depends, now that cgroup-lite is in
    main.

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Wed, 11 Jan 2012 14:02:40 +0100

libvirt (0.9.7-2ubuntu12) precise; urgency=low

  * enable use of libvirt with kvm-spice (LP: #903962):
    . src/qemu/qemu_capabilities.c: search for 'kvm-spice' before
      'kvm' (debian/patches/ubuntu/enable-kvm-spice.patch)
    . debian/apparmor/libvirt-qemu:
      * prepend 'owner' to /run/shm/spice.* rule
      * add more needed spice perms
  * move cgroup-lite | cgroup-bin to depends, now that cgroup-lite is in
    main.

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Tue, 10 Jan 2012 12:06:13 +0100

libvirt (0.9.7-2ubuntu11) precise; urgency=low

  * debian/control: Revert cgroup-lite | cgroup-bin move from suggests to
    depends: cgroup-lite is not in main.

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Mon, 09 Jan 2012 12:16:17 +0100

libvirt (0.9.7-2ubuntu10) precise; urgency=low

  * debian/control: move (cgroup-lite | cgroup-bin) from Suggests to Depends.
    Libvirt-lxc is broken without it.
  * apparmor/usr.lib.libvirt.virt-aa-helper: add 'deny /dev/dm-*' to silence
    warnings about lvm backing stores (LP: #912007)
  [ Peter Silva ]
  * apparmor/libvirt-qemu: add rules to enable spice audio
    (LP: #913023)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Mon, 09 Jan 2012 10:15:57 +0100

libvirt (0.9.7-2ubuntu9) precise; urgency=low

  * Build-Depend on libnl-3-dev. (LP: #908581)
  * Update libnl3 patch to also pass LIBNL_CFLAGS in the LXC target.

 -- Andreas Moog <amoog@ubuntu.com>  Wed, 04 Jan 2012 21:56:55 +0000

libvirt (0.9.7-2ubuntu8) precise; urgency=low

  * debian/apparmor/libvirt-qemu: add /etc/pki/CA/* and /etc/pki/libvirt/**
    (LP: #901272)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Wed, 04 Jan 2012 13:18:50 -0600

libvirt (0.9.7-2ubuntu7) precise; urgency=low

  * Fix default network autostart symlink disappearing on upgrade (LP: #901298)
    - debian/libvirt-bin.preinst: note if the symlink exists
    - debian/libvirt-bin.postinst: if symlink existed, OR if we are upgrading
      from one of the broken versions, then recreate the symlink.  (Continue
      to create the symlink on new installs.)
  * debian/patches/fix-qemu-1.0.patch: without this patch, libvirt fails
    when trying to parse the version # from qemu 1.0.

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Wed, 07 Dec 2011 10:26:05 -0600

libvirt (0.9.7-2ubuntu6) precise; urgency=low

  * debian/rules, libvirt-bin.dirs and libvirt-bin.install: put
    /etc/apparmor.d/local/usr.sbin.libvirtd into place.  (fixes break since
    0.9.7-2ubuntu4)  (LP: #900857)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Tue, 06 Dec 2011 11:03:16 -0600

libvirt (0.9.7-2ubuntu5) precise; urgency=low

  * Fix compile failure (VIR_WARN needs logging.h)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Fri, 02 Dec 2011 13:50:12 -0600

libvirt (0.9.7-2ubuntu4) precise; urgency=low

  * debian/apparmor/usr.sbin.libvirtd:
    - allow access to /etc/libvirt/hooks/** (LP: #891472)
    - #include <local/usr.sbin.libvirtd> for site-local customizations
  * debian/control: Suggest cgroup-lite | cgroup-bin (LP: #544146)
  * debian/patches/ubuntu/apparmor-allow-tunnelled-migration-2.patch:
    Warn but don't error out when we can't find a pathname for a file.
    This is needed to support tunnelled migration.  (LP: #869553)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Fri, 02 Dec 2011 11:50:47 -0600

libvirt (0.9.7-2ubuntu3) precise; urgency=low

  * Don't override local removal of default network autostart on upgrades
    (LP: #372001)
    - re-enable debian/Don-t-enable-default-network-on-boot.patch
    - debian/libvirt-bin.postinst: create default network autostart symlink
      for new installs only.

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Thu, 01 Dec 2011 21:55:01 +0000

libvirt (0.9.7-2ubuntu2) precise; urgency=low

  * apparmor-allow-tunnelled-migration.patch: adjust virt-aa-helper to
    allow tunnelled migration (LP: #869553)
    (Thanks to Simon Deziel <simon.deziel@gmail.com>)
  * fix break in last upload: *really* don't apply patch
    debian/Don-t-enable-default-network-on-boot.patch

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Fri, 18 Nov 2011 15:52:38 -0600

libvirt (0.9.7-2ubuntu1) precise; urgency=low

  * Merged from debian unstable (LP: #889104) (LP: #890036).
    Remaining changes are:
    - debian/control:
      * set X-Python-Version to 2.7, as 2.6 is not in oneiric.
      * set ubuntu maintainer
      * Build-Depends:
        - swap  open-iscsi to open-iscsi-utils
        - remove virtualbox-ose
        - add libapparmor-dev
        - swap libnl-dev for libnl3-dev
      * convert Vcs-Git to Xs-Debian-Vcs-Git
      * libvirt-bin Depends: move netcat-openbsd, bridge-utils, dnsmasq-base
        (>= 2.46-1), and iptables from Recommends to Depends
      * libvirt-bin Recommends: move qemu to Suggests
      * libvirt-bin Suggests: add apparmor
      * libvirt0 Recommends: move lvm2 to Suggests
    - keep debian/libvirt-bin.apport
    - keep debian/libvirt-bin.cron.daily
    - debian/libvirt-bin.dirs:
      * add apparmor, cron.daily, and apport dirs
    - debian/libvirt-bin.examples:
      * add debian/libvirt-suspendonreboot
    - debian/libvirt-bin.install:
      * add /etc/apparmor.d files
      * add apport hook
    - debian/libvirt-bin.postinst:
      * replace libvirt groupname with libvirtd
      * add each admin user to libvirtd group
      * call apparmor_parser on usr.sbin.libvirtd and
        usr.lib.libvirt.virt-aa-helper
      * call 'libvirt-migrate-qemu-disks -a' after
        libvirt-bin has started if migrating from
        older than 0.8.3-1ubuntu1
    - debian/libvirt-bin.postrm:
      * replace libvirt groupname with libvirtd
      * remove usr.sbin.libvirtd and
        usr.lib.libvirt.virt-aa-helper
    - keep added files under debian/:
      * libvirt-bin.upstart
      * libvirt-migrate-qemu-disks
      * libvirt-migrate-qemu-disks.1
      * libvirt-suspendonreboot
      * apparmor profiles
    - debian/README.Debian:
      * add 'Apparmor Profile' section
      * add 'Disk migration' section
    - debian/rules:
      * don't build with vbox since virtualbox-ose is in universe
        - remove WITH_VBOX, add explicit --without-vbox
      * add --with-apparmor to DEB_CONFIGURE_EXTRA_FLAGS
      * set DEB_DH_INSTALLINIT_ARGS to '--upstart-only'
      * remove unneeded clean:: section (they only deal with sysvinit stuff)
      * comment out binary-install/libvirt-bin:: part dealing with sysvinit
      * dont ship libvirt-guests init script for now.
      * add build/libvirt-bin:: section to install
        - apparmor files
        - apport hooks
        - libvirt-migrate-qemu-disks
  * debian/patches/series:
    - don't apply Debian-specific Debianize-libvirt-guests.patch (sysvinit only)
    - don't apply Disable qemu-disable-network.diff.patch
  * debian/patches(/ubuntu):
    - Disable-gnulib-s-test-nonplocking-pipe.sh.patch is in sid's debian/patches
    - drop patches:
      * 9014-skip-nodeinfotest.patch # should this be dropped?
      * lp832507.patch (applied upstream)
      * 9029-skip-tests.patch
      * lxc-use-own-ptyfns.patch (applied upstream)
    - keep (and refreshed) patches:
      * 9000-delayed_iff_up_bridge.patch
      * 9002-better_default_uri_virsh.patch
      * 9003-better-default-arch.patch
      * 9004-libvirtd-group-name.patch
      * 9005-increase-unix-socket-timeout.patch
      * 9006-default-config-test-case.patch
      * 9011-move-ebtables-script.patch
      * 9020-lp545795.patch
      * 9021-fix-uint64_t.patch
      * libnl3.patch
      * arm-gcc-workaround.patch
  * disable numa - until the MIR for numa is done
    - debian/control: remove from dependencies
    - debian/rules: turn it off

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Tue, 15 Nov 2011 21:33:16 -0600

libvirt (0.9.7-2) unstable; urgency=low

  * [b0bdb13] Enable numa support. (Closes: #648323)
    Thanks to Ralf Spenneberg for testing
  * [5b55828] Disk storage: forbid rebuilding existing disk storage pools
    wiping all it's data.
  * [d77511c] Build depend on radvd (Closes: #648551)

 -- Guido Günther <agx@sigxcpu.org>  Sat, 12 Nov 2011 23:16:21 +0100

libvirt (0.9.7-1) experimental; urgency=low

  * [c06e393] debian/watch: match releases and release candidates
  * [2d08768] New upstream version 0.9.7
  * [a260f43] Add empty hooks dir (Closes: #623996)
  * [0b10e48] Install logrotate files again. This got broken by moving to
    separate build-dir. Based on a patch from Serge Hallyn. (Closes: #647953)

 -- Guido Günther <agx@sigxcpu.org>  Thu, 10 Nov 2011 19:11:02 +0100

libvirt (0.9.7~rc2-1) experimental; urgency=low

  * [2d51700] New upstream version 0.9.7~rc2
  * [bae02ad] Drop patches, now fixed upstream.
      - Fix-storage-pool-source-comparison-to-avoid-comparin.patch
      - Skip-socket-test-if-we-exceed-UNIX_PATH_MAX.patch

 -- Guido Günther <agx@sigxcpu.org>  Thu, 03 Nov 2011 18:59:03 +0100

libvirt (0.9.7~rc1-2) experimental; urgency=low

  * [c0292f7] Skip socket test if we exceed UNIX_PATH_MAX.
  * [764a29c] Fix storage pool source comparison to avoid comparing with self
    Thanks to Daniel P. Berrange

 -- Guido Günther <agx@sigxcpu.org>  Wed, 02 Nov 2011 19:07:51 +0100

libvirt (0.9.7~rc1-1) experimental; urgency=low

  * [6dba3c4] New upstream version 0.9.7~rc1
  * [456c4b7] Update symbols file
  * [a5b6513] debian/watch: allow for '-' in the version number so we also
    catch the release candidates.
  * [a5d0318] Drop Autodetect-if-the-remote-nc-command-supports-the-q-o.patch
    fixed upstream.
  * [fb8aed9] Update remaining patches
  * [1f841c0] Move Debian specific patches to debian/patches/debian

 -- Guido Günther <agx@sigxcpu.org>  Wed, 02 Nov 2011 10:04:40 +0100

libvirt (0.9.6-2ubuntu2) precise; urgency=low

  * Move creation of /var/log/libvirt/{lxc,uml,qemu} dirs from libvirt-bin.dirs
    to libvirt-bin.postinst.  Otherwise after a 'apt-get remove libvirt-bin',
    that dir will be removed (if empty) but /etc/logrotate.d/libvirtd will 
    still try to rotate it and raise errors. (LP: #886770)
  * debian/rules: Fix a bug in the new logic for installing upstream-supplied
    logrotate files.  (LP: #887312)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Mon, 07 Nov 2011 12:58:49 -0600

libvirt (0.9.6-2ubuntu1) precise; urgency=low

  * Sync changes from 0.9.6-2 to install the libvirtd manpage (LP: #522710)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Mon, 31 Oct 2011 22:22:27 -0400

libvirt (0.9.6-2) unstable; urgency=low

  * [6e5ad9d] Install libvirtd manpage. Thanks to Serge E. Hallyn
    (Closes: #644457, #606069)
  * [480ef36] Remove now superfluous build-dep on QEMU
  * [86140cf] python-libvirt: Recommend libvirt-bin (Closes: #646440)
  * [a76d37f] Build-depend and Recommend: parted since it's needed for disk
    storage pool creation (found by libvirt-tck)
  * [2e7bee9] Remove workaround for m68k ICE fixed in gcc-4.6 upstream and
    Debian's gcc-4.4. Thanks to Thorsten Glaser

 -- Guido Günther <agx@sigxcpu.org>  Sun, 30 Oct 2011 17:14:21 +0100

libvirt (0.9.6-1ubuntu3) precise; urgency=low

  * debian/control: - add radvd to build-depends (LP: #862136)
  * debian/control: remove moved relations from original:
    - libvirt-bin Depends: move netcat-openbsd, bridge-utils, dnsmasq-base
      (>= 2.46-1), and iptables from Recommends to Depends
    - libvirt-bin Recommends: move qemu to Suggests

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Mon, 24 Oct 2011 08:54:14 -0500

libvirt (0.9.6-1ubuntu2) precise; urgency=low

  * debian/patches/lxc-use-own-ptyfns.patch: Re-add dropped patch. 

 -- Chuck Short <zulcss@ubuntu.com>  Fri, 21 Oct 2011 10:30:36 -0400

libvirt (0.9.6-1ubuntu1) precise; urgency=low

  * Merged from debian unstable, remaning changes are:
    - debian/control:
      * set X-Python-Version to 2.7, as 2.6 is not in oneiric.
      * set ubuntu maintainer
      * Build-Depends:
        - remove [linux-any] from all dependencies
        - remove [!linux-any] deps
        - swap  qemu to qemu-kvm and open-iscsi to
          open-iscsi-utils in Build-Depends
        - remove virtualbox-ose Build-Depends
        - add parted and libapparmor-dev Build-Depends
      * convert Vcs-Git to Xs-Debian-Vcs-Git
      * libvirt-bin Depends: move netcat-openbsd, bridge-utils, dnsmasq-base
        (>= 2.46-1), and iptables from Recommends to Depends
      * libvirt-bin Recommends: move qemu to Suggests
      * libvirt-bin Suggests: add apparmor
      * libvirt0 Recommands: move lvm2 to Suggests
    - keep debian/libvirt-bin.apport
    - keep debian/libvirt-bin.cron.daily
    - debian/libvirt-bin.dirs:
      * add apparmor, cron.daily, and apport dirs
    - debian/libvirt-bin.examples:
      * add debian/libvirt-suspendonreboot
    - debian/libvirt-bin.install:
      * add /etc/apparmor.d files
      * add apport hook
    - debian/libvirt-bin.manpages:
      * add debian/libvirt-migrate-qemu-disks.1
    - debian/libvirt-bin.postinst:
      * replace libvirt groupname with libvirtd
      * add each admin user to libvirtd group
      * call apparmor_parser on usr.sbin.libvirtd and
        usr.lib.libvirt.virt-aa-helper
      * call 'libvirt-migrate-qemu-disks -a' after
        libvirt-bin has started if migrating from
        older than 0.8.3-1ubuntu1
    - debian/libvirt-bin.postrm:
      * replace libvirt groupname with libvirtd
      * remove usr.sbin.libvirtd and
        usr.lib.libvirt.virt-aa-helper
    - keep added files under debian/:
      * libvirt-bin.upstart
      * libvirt-migrate-qemu-disks
      * libvirt-migrate-qemu-disks.1
      * libvirt-suspendonreboot
      * apparmor profiles
    - debian/README.Debian:
      * add 'Apparmor Profile' section
      * add 'Disk migration' section
    - debian/rules:
      * move include of debhelper.mk to top of file so DEB_HOST_ARCH_OS
        is defined.
      * don't build with vbox since virtualbox-ose is in universe
        - remove WITH_VBOX, add explicit --without-vbox
      * add --with-apparmor to DEB_CONFIGURE_EXTRA_FLAGS
      * set DEB_DH_INSTALLINIT_ARGS to '--upstart-only'
      * remove unneeded binary-install/libvirt-bin:: and clean::
        sections (they only deal with sysvinit stuff)
      * add build/libvirt-bin:: section to install
        - apparmor files
        - apport hooks
        - libvirt-migrate-qemu-disks
      * dont ship libvirt-guests init script for now.
  * debian/patches/9029-skip-tests.patch: Skip broken tests on ubuntu.
  * debian/patches/series:
    - don't apply Debian-specific Debianize-libvirt-guests.patch (sysvinit only)
    - don't apply Disable qemu-disable-network.diff.patch
  * debian/patches:
    - dropped patches:
      * 9001-dont_clobber_existing_bridges.patch
      * 9026-lp795800.patch
      * 9027-move-apparmor-load-to-genlabel.patch
      * 9028-linux-3-0-no-micro.patch
      * lp810270.patch
      * CVE-2011-2511.patch
      * lxc-do-not-require-ifconfig-or-ip-commands-in-guest.patch
      * 0001-make-ptmx-a-bind-mount-rather-than-symlink.patch
      * arm-startup-fixes.patch
    - keep patches:
      * 9000-delayed_iff_up_bridge.patch
      * 9001-dont_clobber_existing_bridges.patch
      * 9002-better_default_uri_virsh.patch
      * 9003-better-default-arch.patch
      * 9004-libvirtd-group-name.patch
      * 9005-increase-unix-socket-timeout.patch
      * 9006-default-config-test-case.patch
      * 9011-move-ebtables-script.patch
      * 9014-skip-nodeinfotest.patch
      * 9020-lp545795.patch
      * 9021-fix-uint64_t.patch
      * 9026-lp795800.patch
      * libnl3.patch
      * arm-gcc-workaround.patch
      * Disable-gnulib-s-test-nonplocking-pipe.sh.patch

 -- Chuck Short <zulcss@ubuntu.com>  Mon, 17 Oct 2011 12:19:15 +0000

libvirt (0.9.6-1) unstable; urgency=low

  * [828e4e3] New upstream version 0.9.6
  * [59404f4] Use versioned X-Python-Version
  * [0b43f12] Update symbols file
  * [744aaeb] Drop Readd-LFS-support.patch - fixed upstream
  * [f759960] Rediff remaining patches

 -- Guido Günther <agx@sigxcpu.org>  Mon, 26 Sep 2011 23:28:03 +0200

libvirt (0.9.4-2) unstable; urgency=low

  [ Philipp Hahn ]
  * [c9a080d] Build python-libvirt for all python versions (Closes: #628828)

 -- Guido Günther <agx@sigxcpu.org>  Tue, 23 Aug 2011 21:17:55 +0200

libvirt (0.9.4-1) experimental; urgency=low

  * [a92d03e] New upstream version 0.9.4
  * [76f0333] Run tests verbosely to ease error diagnostics
  * [f4e7d0b] Work around ICE on m68k.
    Thanks to Thorsten Glaser
  * [ac6e760] Add directories chown'ed in the postinst.
    Thanks to Houmehr Aghabozorgi for the report (Closes: #636965)
  * [194722a] Simplify netcat probe and adjust testcase output to reduce
    number of failing testcases.
  * [05e5a06] Use libyajl QEMU JSON support
  * [e7934f7] Use libpcap for ip address learning support
  * [6661730] Readd LFS support
  * [17d831b] Don't require gawk for a simple print expression
    (Closes: #636712)

 -- Guido Günther <agx@sigxcpu.org>  Tue, 09 Aug 2011 16:41:24 +0200

libvirt (0.9.4~rc1-1) experimental; urgency=low

  * [0e60a81] New upstream version 0.9.4~rc1
  * [db6dbcc] Suggest radvd needed for IPv6
  * [a9b77e5] Drop Catch-dnsmasq-start-failures.patch applied upstream
  * [b18ac26] Rediff remaining patches
  * [8ee8750] Update symbols

 -- Guido Günther <agx@sigxcpu.org>  Tue, 26 Jul 2011 13:12:57 +0200

libvirt (0.9.3-5) unstable; urgency=low

  * [44874f6] Add directories chown'ed in the postinst.  Thanks to Houmehr
    Aghabozorgi for the report (Closes: #636965)

 -- Guido Günther <agx@sigxcpu.org>  Thu, 11 Aug 2011 08:19:38 +0200

libvirt (0.9.3-4) unstable; urgency=low

  * [db6dbcc] Suggest radvd needed for IPv6
  * [32ac1cf] Work around ICE on m68k. Thanks to Thorsten Glaser.

 -- Guido Günther <agx@sigxcpu.org>  Wed, 27 Jul 2011 21:26:02 +0200

libvirt (0.9.3-3) unstable; urgency=low

  * [6db6929] Catch dnsmasq start failures
  * [0254bfb] Add empty log directories to make logrotate happy
    (Closes: #635239)

 -- Guido Günther <agx@sigxcpu.org>  Sun, 24 Jul 2011 10:51:58 +0200

libvirt (0.9.3-2) unstable; urgency=low

  * Upload to unstable
  * [331afb8] Move build rules to make sure DEB_BUILD_ARCH_OS is properly
    defined.
    Thanks to Serge E. Hallyn
  * [4f3fe1d] Adjust directory permissions to what upstream uses to avoid
    potential information leakage.
    (Closes: #632332)
  * [ab7ad05] Add sanlock dir
  * [bc05a9d] Logrotate logs from HVs other than qemu too
    (Closes: #625746)

 -- Guido Günther <agx@sigxcpu.org>  Sat, 23 Jul 2011 15:28:10 +0200

libvirt (0.9.3-1) experimental; urgency=low

  * [320f8b6] New upstream version 0.9.3 (Closes: #633840)
  * [fff5144] Update symbols
  * [787d91c] Depend on dnsmasq-base, netcat-openbsd and openssh-client for
    "make check"
  * [1fa64b0] Remove article from libvirt-bin description to make lintian
    happy.
  * [3689fc5] Drop patches applied upstream:
    - Skip-nodeinfo-test-on-non-intel-architectures.patch
    - Split-out-dlopen-detection.patch
    - nodeinfo-remove-superfluous-braces.patch
  * [31b17c8] Drop Update-generated-autoconf-files.patch. No need to
    regenerate autoconf for 0.9.3
  * [65871eb] Adjust nc autodetect patch to new socket code
  * [7b0c6df] Disable failing virnetsockettest until investigated further
  * [248bc3f] Rediff remaining patches

 -- Guido Günther <agx@sigxcpu.org>  Sun, 10 Jul 2011 19:43:05 +0200

libvirt (0.9.2-6) unstable; urgency=low

  * [b385504] Disable the testsuite on all architectures except i386 and amd64
    so the current version can move into testing.

 -- Guido Günther <agx@sigxcpu.org>  Mon, 04 Jul 2011 09:14:56 +0200

libvirt (0.9.2-5) unstable; urgency=low

  * [e523120] New patch Disable-gnulib-s-test-nonplocking-pipe.sh.patch.
    Disable gnulib's test-nonplocking-pipe.sh.

 -- Guido Günther <agx@sigxcpu.org>  Sun, 26 Jun 2011 15:57:24 +0200

libvirt (0.9.2-4ubuntu16) precise; urgency=low

  * lxc_controller: use our own unlocpt+grantpt rather than glibc's, which
    can't handle opening a pty in a devpts not mounted at /dev/pts.
    (LP: #863629)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Fri, 14 Oct 2011 10:47:57 -0500

libvirt (0.9.2-4ubuntu15) oneiric; urgency=low

  * Pull patches from upstream which prevent a race between lxc driver and
    controller while a container is started, easily exposed by nova.
    (LP: #842845)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Mon, 03 Oct 2011 14:39:05 -0500

libvirt (0.9.2-4ubuntu14) oneiric; urgency=low

  * debian/patches/lp832507.patch: update virt-aa-helper to use the correct
    paths for character devices that are pipes. This can be removed in
    0.9.7. (LP: #832507)

 -- Jamie Strandboge <jamie@ubuntu.com>  Tue, 27 Sep 2011 13:18:28 -0500

libvirt (0.9.2-4ubuntu13) oneiric; urgency=low

  * debian/patches/arm-startup-fies.patch: Fix typo in patch. 
    (LP: #845764) 

 -- Chuck Short <zulcss@ubuntu.com>  Fri, 09 Sep 2011 14:41:53 -0400

libvirt (0.9.2-4ubuntu12) oneiric; urgency=low

  [Serge Hallyn]
  * do not rely on 'ip' or 'ifconfig' commands inside container (LP: #828211)
    Reported and fixed by Scott Moser <smoser@ubuntu.com>.
  * make ptmx a bind mount rather than a symlink (LP: #832123)

  [Chuck Short]
  * debian/arm-startup-fixes.patch: Dont detect DMI information on non-intel
    compatible arches.

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Thu, 01 Sep 2011 09:25:51 -0500

libvirt (0.9.2-4ubuntu11) oneiric; urgency=low

  * debian/patches/Autodetect-if-the-remote-nc-command-supports-the-q-o.patch:
    updated to support target systems where the grep utility has no -q
    option. (LP: #792985)

 -- Marc Deslauriers <marc.deslauriers@ubuntu.com>  Tue, 16 Aug 2011 13:30:14 -0400

libvirt (0.9.2-4ubuntu10) oneiric; urgency=low

  * Source /etc/default/libvirt-bin at the upstart 'start' section (LP: #823638)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Mon, 15 Aug 2011 13:00:41 -0500

libvirt (0.9.2-4ubuntu9) oneiric; urgency=low

  * Fix build failure on ARM, working around a GCC issue. LP: #823711.

 -- Matthias Klose <doko@ubuntu.com>  Mon, 15 Aug 2011 16:00:53 +0200

libvirt (0.9.2-4ubuntu8) oneiric; urgency=low

  * Port to libnl3.

 -- Colin Watson <cjwatson@ubuntu.com>  Tue, 09 Aug 2011 11:36:08 +0100

libvirt (0.9.2-4ubuntu7) oneiric; urgency=low

  * libvirt-bin.upstart: add a pre-stop script to shut down running VMs
    before the host shuts down.  (LP: #350936)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Tue, 02 Aug 2011 19:49:40 -0500

libvirt (0.9.2-4ubuntu6) oneiric; urgency=low

  * SECURITY UPDATE: integer overflow in virDomainGetVcpus()
    - debian/patches/CVE-2011-2511.patch: use INT_MULTIPLY_OVERFLOW() to
      verify maxinfo * maplen < REMOTE_CPUMAPS_MAX
    - this can be dropped in 0.9.2-7/0.9.3
    - CVE-2011-2511

 -- Jamie Strandboge <jamie@ubuntu.com>  Tue, 19 Jul 2011 08:20:20 -0500

libvirt (0.9.2-4ubuntu5) oneiric; urgency=low

  * debian/libvirt-bin.apport: use new apport MAC function instead of
    parsing and attaching AppArmor events here.

 -- Marc Deslauriers <marc.deslauriers@ubuntu.com>  Fri, 15 Jul 2011 08:36:56 -0400

libvirt (0.9.2-4ubuntu4) oneiric; urgency=low

  * debian/apparmor/libvirt-qemu: adjust for /dev/shm -> /run/shm transition
  * debian/patches/lp810270.patch: adjust AppArmor profile for /var/run ->
    /run
    - LP: #810270

 -- Jamie Strandboge <jamie@ubuntu.com>  Thu, 14 Jul 2011 08:46:32 -0500

libvirt (0.9.2-4ubuntu3) oneiric; urgency=low

  * Fix /etc/init/libvirt-bin.conf start on to wait until networking.conf
    has stopped with success, meaning ifup -a completed successfully and
    all auto-started network devices are up.  (LP: #495394)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Thu, 07 Jul 2011 10:23:25 -0500

libvirt (0.9.2-4ubuntu2) oneiric; urgency=low

  [ Scott Moser ]
  * 9028-linux-3-0-no-micro.patch: support running libvirt with lxc on linux
    3.0 (LP: #802977)

  [ Jamie Strandboge ]
  * debian/apparmor/usr.sbin.libvirtd: allow ipc_lock

 -- Scott Moser <smoser@ubuntu.com>  Tue, 28 Jun 2011 10:00:54 -0400

libvirt (0.9.2-4ubuntu1) oneiric; urgency=low

  * Merge from debian unstable.  Remaining changes:
    - debian/control:
      * set X-Python-Version to 2.7, as 2.6 is not in oneiric.
      * set ubuntu maintainer
      * Build-Depends:
        - remove [linux-any] from all dependencies
        - remove [!linux-any] deps
        - swap  qemu to qemu-kvm and open-iscsi to
          open-iscsi-utils in Build-Depends
        - remove virtualbox-ose Build-Depends
        - add parted and libapparmor-dev Build-Depends
      * convert Vcs-Git to Xs-Debian-Vcs-Git
      * libvirt-bin Depends: move netcat-openbsd, bridge-utils, dnsmasq-base
        (>= 2.46-1), and iptables from Recommends to Depends
      * libvirt-bin Recommends: move qemu to Suggests
      * libvirt-bin Suggests: add apparmor
      * libvirt0 Recommands: move lvm2 to Suggests
    - keep debian/libvirt-bin.apport
    - keep debian/libvirt-bin.cron.daily
    - debian/libvirt-bin.dirs:
      * add apparmor, cron.daily, and apport dirs
    - debian/libvirt-bin.examples:
      * add debian/libvirt-suspendonreboot
    - debian/libvirt-bin.install:
      * add /etc/apparmor.d files
      * add apport hook
    - debian/libvirt-bin.manpages:
      * add debian/libvirt-migrate-qemu-disks.1
    - debian/libvirt-bin.postinst:
      * replace libvirt groupname with libvirtd
      * add each admin user to libvirtd group
      * call apparmor_parser on usr.sbin.libvirtd and
        usr.lib.libvirt.virt-aa-helper
      * call 'libvirt-migrate-qemu-disks -a' after
        libvirt-bin has started if migrating from
        older than 0.8.3-1ubuntu1
    - debian/libvirt-bin.postrm:
      * replace libvirt groupname with libvirtd
      * remove usr.sbin.libvirtd and
        usr.lib.libvirt.virt-aa-helper
    - keep added files under debian/:
      * libvirt-bin.upstart
      * libvirt-migrate-qemu-disks
      * libvirt-migrate-qemu-disks.1
      * libvirt-suspendonreboot
      * apparmor profiles
    - debian/README.Debian:
      * add 'Apparmor Profile' section
      * add 'Disk migration' section
    - debian/rules:
      * move include of debhelper.mk to top of file so DEB_HOST_ARCH_OS
        is defined.
      * don't build with vbox since virtualbox-ose is in universe
        - remove WITH_VBOX, add explicit --without-vbox
      * add --with-apparmor to DEB_CONFIGURE_EXTRA_FLAGS
      * set DEB_DH_INSTALLINIT_ARGS to '--upstart-only'
      * remove unneeded binary-install/libvirt-bin:: and clean::
        sections (they only deal with sysvinit stuff)
      * add build/libvirt-bin:: section to install
        - apparmor files
        - apport hooks
        - libvirt-migrate-qemu-disks
  * debian/patches/series:
    - don't apply Debian-specific Debianize-libvirt-guests.patch (sysvinit only)
    - don't apply Disable qemu-disable-network.diff.patch
  * debian/patches:
    - dropped patches:
      * 9022-allows-lxc-containers-with-lxcguest.patch (applied upstream)
      * 9023-disable-test-poll.patch
      * 9024-ftbfs-with-arm.patch (doesnt really fix arm just yet)
      * 9025-CVE-2011-2178.patch (applied upstream)
    - keep patches:
      * 9000-delayed_iff_up_bridge.patch
      * 9001-dont_clobber_existing_bridges.patch
      * 9002-better_default_uri_virsh.patch
      * 9003-better-default-arch.patch
      * 9004-libvirtd-group-name.patch
      * 9005-increase-unix-socket-timeout.patch
      * 9006-default-config-test-case.patch
      * 9011-move-ebtables-script.patch
      * 9014-skip-nodeinfotest.patch
      * 9020-lp545795.patch
      * 9021-fix-uint64_t.patch
      * 9026-lp795800.patch

  [ Jamie Strandboge ]
  * 9027-move-apparmor-load-to-genlabel.patch: 0.9.2 introduced a change that
    caused aa_change_profile() to be called before the profile was loaded into
    the kernel. Adjust AppArmorGenSecurityLabel() in
    src/security/security_apparmor.c to load the profile itself, and adjust
    AppArmorSetSecurityAllLabel() to reload the profile when stdin_fn is
    specified. This patch can be removed in 0.9.3. (LP: #801569)

 -- Chuck Short <zulcss@ubuntu.com>  Wed, 22 Jun 2011 11:09:15 -0400

libvirt (0.9.2-4) unstable; urgency=low

  * [398a4dd] New patch Split-out-dlopen-detection.patch.  Explicitly pass
    -ldl since the lock manager needs it.
  * [3be22be] New patch Update-generated-autoconf-files.patch. Update
    generated autoconf files

 -- Guido Günther <agx@sigxcpu.org>  Mon, 13 Jun 2011 19:09:17 +0200

libvirt (0.9.2-3) unstable; urgency=low

  * [008e65d] New patch Skip-nodeinfo-test-on-non-intel-architectures.patch:
    Skip nodeinfo test on non intel architectures since the testfiles assume a
    /proc/cpuinfo specific to this architecture.

 -- Guido Günther <agx@sigxcpu.org>  Sun, 12 Jun 2011 22:00:05 +0200

libvirt (0.9.2-2) unstable; urgency=low

  * [17570fc] Enable OpenVZ on Linux only (Closes: #630099)
  * [31a35bc] New patch nodeinfo-remove-superfluous-braces.patch
    nodeinfo: remove superfluous braces to fix compilation on non intel
    architectures

 -- Guido Günther <agx@sigxcpu.org>  Sat, 11 Jun 2011 18:40:14 +0200

libvirt (0.9.2-1) unstable; urgency=low

  * [c6187ec] New upstream version 0.9.2
  * [368375a] Update netcat detection to new code
  * [e3319ee] Drop security-plug-regression-introduced-in-disk-probe-lo.patch
    applied upstream
  * [a1428a7] Refresh patches
  * [77590ee] Update symbols
  * [0626972] Depend on iproute
  * [a1b211d] Version dependency on iptables and drop
    Disable-CHECKSUM-rule.patch (Closes: #627595)

 -- Guido Günther <agx@sigxcpu.org>  Wed, 08 Jun 2011 16:58:19 +0200

libvirt (0.9.1-2) unstable; urgency=high

  * [4fbc990] New patch security-plug-regression-introduced-in-disk-probe-lo.
    patch (Closes: #629128)
    - Fixes: CVE-2011-2178

 -- Laurent Léonard <laurent@open-minds.org>  Sat, 04 Jun 2011 01:53:43 +0200

libvirt (0.9.1-1ubuntu4) oneiric; urgency=low

  * SECURITY UPDATE: 0.8.8 regression which reopens disk probing
    (CVE-2010-2238). This can be dropped in 0.9.2.
    - 9025-CVE-2011-2178.patch: use correct pointer address in
      virSecurityManagerGetPrivateData()
    - CVE-2011-2178
  * fix virsh save when AppArmor driver is enabled
    - 9026-lp795800.patch: src/security/security_apparmor.c: implement
      AppArmorSetFDLabel(), which is now used by qemuMigrationToFile() if
      our version of qemu supports fd migraton. This can be dropped in 0.9.3.
    - LP: #795800

 -- Jamie Strandboge <jamie@ubuntu.com>  Thu, 16 Jun 2011 14:16:00 -0500

libvirt (0.9.1-1ubuntu3) oneiric; urgency=low

  * debian/patches/9024-ftbfs-with-arm.patch: Fix FTBFS with arm.

 -- Chuck Short <zulcss@ubuntu.com>  Tue, 14 Jun 2011 21:33:15 -0400

libvirt (0.9.1-1ubuntu2) oneiric; urgency=low

  * Depend on libxen-dev rather than libxen3-dev. 

 -- Chuck Short <zulcss@ubuntu.com>  Mon, 13 Jun 2011 12:48:52 -0400

libvirt (0.9.1-1ubuntu1) oneiric; urgency=low

  * Resynchronize and merge from Debian unstable (LP: #794378). Remaining
    changes:
    - debian/control:
      * set X-Python-Version to 2.7, as 2.6 is not in oneiric.
      * set ubuntu maintainer
      * Build-Depends:
        - remove [linux-any] from all dependencies
        - remove [!linux-any] deps
        - swap libxen to libxen3, qemu to qemu-kvm, and open-iscsi to
          open-iscsi-utils in Build-Depends
        - remove virtualbox-ose Build-Depends
        - add parted and libapparmor-dev Build-Depends
      * convert Vcs-Git to Xs-Debian-Vcs-Git
      * libvirt-bin Depends: move netcat-openbsd, bridge-utils, dnsmasq-base
        (>= 2.46-1), and iptables from Recommends to Depends
      * libvirt-bin Recommends: move qemu to Suggests
      * libvirt-bin Suggests: add apparmor
      * libvirt0 Recommands: move lvm2 to Suggests
    - keep debian/libvirt-bin.apport
    - keep debian/libvirt-bin.cron.daily
    - debian/libvirt-bin.dirs:
      * add apparmor, cron.daily, and apport dirs
    - debian/libvirt-bin.examples:
      * add debian/libvirt-suspendonreboot
    - debian/libvirt-bin.install:
      * add /etc/apparmor.d files
      * add apport hook
    - debian/libvirt-bin.manpages:
      * add debian/libvirt-migrate-qemu-disks.1
    - debian/libvirt-bin.postinst:
      * replace libvirt groupname with libvirtd
      * add each admin user to libvirtd group
      * call apparmor_parser on usr.sbin.libvirtd and
        usr.lib.libvirt.virt-aa-helper
      * call 'libvirt-migrate-qemu-disks -a' after
        libvirt-bin has started if migrating from
        older than 0.8.3-1ubuntu1
    - debian/libvirt-bin.postrm:
      * replace libvirt groupname with libvirtd
      * remove usr.sbin.libvirtd and
        usr.lib.libvirt.virt-aa-helper
    - keep added files under debian/:
      * libvirt-bin.upstart
      * libvirt-migrate-qemu-disks
      * libvirt-migrate-qemu-disks.1
      * libvirt-suspendonreboot
      * apparmor profiles
    - debian/README.Debian:
      * add 'Apparmor Profile' section
      * add 'Disk migration' section
    - debian/rules:
      * move include of debhelper.mk to top of file so DEB_HOST_ARCH_OS
        is defined.
      * don't build with vbox since virtualbox-ose is in universe
        - remove WITH_VBOX, add explicit --without-vbox
      * add --with-apparmor to DEB_CONFIGURE_EXTRA_FLAGS
      * set DEB_DH_INSTALLINIT_ARGS to '--upstart-only'
      * remove unneeded binary-install/libvirt-bin:: and clean::
        sections (they only deal with sysvinit stuff)
      * add build/libvirt-bin:: section to install
        - apparmor files
        - apport hooks
        - libvirt-migrate-qemu-disks
  * debian/patches/series:
    - don't apply Disable-CHECKSUM-rule.patch: our iptables can do this
    - don't apply Debian-specific Debianize-libvirt-guests.patch (sysvinit only)
    - don't apply Disable qemu-disable-network.diff.patch
  * debian/patches:
    - drop 9007-fix-daemon-conf-ftbfs.patch (looks like it may be fixed)
    - drop patches applied upstream:
      * 9022-drop-booton-when-kernel-specified.patch
      * 9023-fix-lxc-console-hangup.patch
      * 9024-fix-broken-commandtest.patch
      * 9025-Pass-virSecurityManagerPtr-to-virSecurityDAC-Set-Res.patch
      * 9026-security-avoid-memory-leak.patch
      * 9027-CVE-2011-1146.patch
    - keep patches:
      * 9000-delayed_iff_up_bridge.patch
      * 9001-dont_clobber_existing_bridges.patch
      * 9002-better_default_uri_virsh.patch
      * 9003-better-default-arch.patch
      * 9004-libvirtd-group-name.patch
      * 9005-increase-unix-socket-timeout.patch
      * 9006-default-config-test-case.patch
      * 9011-move-ebtables-script.patch (refreshed)
      * 9014-skip-nodeinfotest.patch (modified to make it apply)
      * 9020-lp545795.patch (modified to make it still apply)
      * 9021-fix-uint64_t.patch
      * 9022-allows-lxc-containers-with-lxcguest.patch (renamed, modified
        to make it still apply, and added DEP-3 tags).
    - new patches:
      * 9023-disable-test-poll.patch - don't run broken test-poll

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Wed, 11 May 2011 12:29:51 -0500

libvirt (0.9.1-1) unstable; urgency=low

  * [1546b8c] New upstream version 0.9.1
  * [2418ebf] Rediff patches
  * [d4e2b71] Drop Make-sure-DNSMASQ_STATE_DIR-exists.patch: applied upstream
  * [0fef693] libvirt0: Update symbols
  * [b4ff149] Bump standards version to 3.9.2

 -- Guido Günther <agx@sigxcpu.org>  Tue, 10 May 2011 22:45:11 +0200

libvirt (0.9.0-2) unstable; urgency=low

  * [3a8e07f] New patch Make-sure-DNSMASQ_STATE_DIR-exists.patch
    (Closes: #623536)

 -- Guido Günther <agx@sigxcpu.org>  Mon, 09 May 2011 17:14:02 +0200

libvirt (0.9.0-1) unstable; urgency=low

  * [a91c8f6] New upstream version 0.9.0
  * [1608a8c] Drop patch Make-macros-work-as-rvalues.patch, fixed upstream
  * [85c3f78] Fix test failure caused by our libvirtd.conf changes
  * [0defeee] Fix crashes due to missing initialization of the error system
  * [0a63618] Disable daemon start test for now
  * [1c29d34] Enable testsuite
  * [cf3a26f] Build for Python 2.6 only

 -- Guido Günther <agx@sigxcpu.org>  Sat, 16 Apr 2011 15:26:34 +0200

libvirt (0.9.0~rc2-2) experimental; urgency=low

  * [7da1fd9] New patch Make-macros-work-as-rvalues.patch fixes kFreeBSD build
  * [08c4915] Add support for kFreeBSD (Closes: #612238)

 -- Guido Günther <agx@sigxcpu.org>  Thu, 31 Mar 2011 23:01:58 +0200

libvirt (0.9.0~rc2-1) experimental; urgency=low

  * [77fc1c5] New upstream version 0.9.0~rc2
  * [30ceba5] Drop superflous build-dep on dpkg-dev.
    The affected versions are neither in Lenny, Squeeze nor Sid.
  * [5845bed] Switch to dh_python2 (Closes: #616874)

 -- Guido Günther <agx@sigxcpu.org>  Wed, 30 Mar 2011 14:14:03 +0200

libvirt (0.9.0~rc1-1) experimental; urgency=low

  * [02daf0b] New upstream version 0.9.0~rc1
  * [b4a05a1] Update patches. Drop patches applied upstream:
        Do-not-add-drive-boot-on-param-when-a-kernel-is-spec.patch
        Don-t-pass-empty-arguments-to-dnsmasq.patch
        Make-sure-the-rundir-is-accessible-by-the-user.patch
        upstream/Add-missing-checks-for-read-only-connections.patch
  * [7ff8e58] Update symbols for 0.9.0~rc1

 -- Guido Günther <agx@sigxcpu.org>  Tue, 29 Mar 2011 10:04:54 +0200

libvirt (0.8.8-3) unstable; urgency=low

  * [28df435] Don't create the rundir in the init script. The daemon does this
    now.
  * [7302aff] New patch Make-sure-the-rundir-is-accessible-by-the-user.patch.
    Make sure the rundir is accessible by the user (Closes: #614210)
  * [6dde59d] Recommend dmidecode used by the qemu driver
  * [235f893]  Add missing checks for read only connections.
    As pointed on CVE-2011-1146, some API forgot to check the read-only
    status of the connection for entry point which modify the state
    of the system or may lead to a remote execution using user data.
    The entry points concerned are:
      - virConnectDomainXMLToNative
      - virNodeDeviceDettach
      - virNodeDeviceReAttach
      - virNodeDeviceReset
      - virDomainRevertToSnapshot
      - virDomainSnapshotDelete
     src/libvirt.c: fix the above set of entry points to error on read-only
     connections (Closes: #617773)

 -- Guido Günther <agx@sigxcpu.org>  Mon, 14 Mar 2011 20:06:57 +0100

libvirt (0.8.8-2) unstable; urgency=low

  * [f5fa0d3] initscript: depend on $local_fs (Closes: #616162)
  * [f503698] README.Debian: Mention netcat.openbsd. Thanks to Luca Capello
    for the patch.
  * [9d1ceb0] New patch:
        Do-not-add-drive-boot-on-param-when-a-kernel-is-spec.patch.
    Do not add drive 'boot=on' param when a kernel is specified
    Thanks to Jim Fehlig and Wolfgang Frisch (Closes: #615013)

 -- Guido Günther <agx@sigxcpu.org>  Mon, 07 Mar 2011 21:43:32 +0100

libvirt (0.8.8-1ubuntu8) oneiric; urgency=low

  * Force rebuild to find brctl in its new location.  (LP: #780896)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Wed, 11 May 2011 09:41:42 -0500

libvirt (0.8.8-1ubuntu7) oneiric; urgency=low

  * add parted to build-depends (LP: #697046)

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Wed, 04 May 2011 19:54:43 -0500

libvirt (0.8.8-1ubuntu6) natty; urgency=low

  * debian/patches/allows-lxc-containers-with-lxcguest.patch:
    Pass "libvirt" to lxc containers, so that libvirt can 
    work with lxcguest. (LP: #757752)

 -- Chuck Short <zulcss@ubuntu.com>  Mon, 11 Apr 2011 13:44:03 -0400

libvirt (0.8.8-1ubuntu5) natty; urgency=low

  * debian/apparmor/usr.sbin.libvirtd: allow read access to '/' (LP: #727286)

 -- Jamie Strandboge <jamie@ubuntu.com>  Fri, 18 Mar 2011 08:02:32 -0500

libvirt (0.8.8-1ubuntu4) natty; urgency=low

  [ Serge Hallyn ]
  * Replace 9024-skip-broken-commandtest.patch with
    9024-fix-broken-commandtest.patch from upstream.

  [ Jamie Strandboge ]
  * debian/patches/9026-security-avoid-memory-leak.patch: avoid memory leaks
    with the security drivers. Can be dropped in 0.8.9.
  * SECURITY UPDATE: debian/patches/9027-CVE-2011-1146.patch: Add missing
    checks for read only connections. Patch from Debian. Can be dropped in
    0.8.8-3.
    - CVE-2011-1146

 -- Jamie Strandboge <jamie@ubuntu.com>  Tue, 15 Mar 2011 11:46:34 -0500

libvirt (0.8.8-1ubuntu3) natty; urgency=low

  * 9025-Pass-virSecurityManagerPtr-to-virSecurityDAC-Set-Res.patch: Fix
    ownership setting of chardevs.

 -- Soren Hansen <soren@ubuntu.com>  Thu, 03 Mar 2011 15:48:45 +0100

libvirt (0.8.8-1ubuntu2) natty; urgency=low

  * debian/control: Demoted package ebtables from Recommends 
    to Suggests for binary package, libvirt-bin. 

 -- Dave Walker (Daviey) <DaveWalker@ubuntu.com>  Tue, 01 Mar 2011 13:46:35 +0000

libvirt (0.8.8-1ubuntu1) natty; urgency=low

  * Resynchronize and merge from Debian unstable. Remaining changes:
    - debian/patches:
      * 9000-delayed_iff_up_bridge.patch
      * 9001-dont_clobber_existing_bridges.patch
      * 9002-better_default_uri_virsh.patch
      * 9003-better-default-arch.patch
      * 9004-libvirtd-group-name.patch
      * 9005-increase-unix-socket-timeout.patch
      * 9006-default-config-test-case.patch
      * 9007-fix-daemon-conf-ftbfs.patch
      * 9011-move-ebtables-script.patch
      * 9014-skip-nodeinfotest.patch
      * 9020-lp545795.patch
      * 9021-fix-uint64_t.patch
    - debian/patches/series:
      * Disable qemu-disable-network.diff.patch
    - debian/control:
      * set ubuntu maintainer
      * Build-Depends:
        - swap libxen to libxen3, qemu to qemu-kvm, and open-iscsi to
          open-iscsi-utils in Build-Depends
        - remove virtualbox Build-Depends
        - add libxml2 and libapparmor-dev Build-Depends
      * convert Vcs-Git to Xs-Debian-Vcs-Git
      * libvirt-bin Depends: move netcat-openbsd, bridge-utils, dnsmasq-base
        (>= 2.46-1), and iptables from Recommends to Depends
      * libvirt-bin Recommends: move qemu to Suggests
      * libvirt-bin Suggests: add apparmor
      * libvirt0 Recommands: move lvm2 to Suggests
    - keep debian/libvirt-bin.apport
    - keep debian/libvirt-bin.cron.daily
    - debian/libvirt-bin.dirs:
      * add apparmor, cron.daily, and apport dirs
    - debian/libvirt-bin.examples:
      * add debian/libvirt-suspendonreboot
    - debian/libvirt-bin.install:
      * add /etc/apparmor.d files
      * add apport hook
    - debian/libvirt-bin.manpages:
      * add debian/libvirt-migrate-qemu-disks.1
    - debian/libvirt-bin.postinst:
      * replace libvirt groupname with libvirtd
      * add each admin user to libvirtd group
      * call apparmor_parser on usr.sbin.libvirtd and
        usr.lib.libvirt.virt-aa-helper
      * call 'libvirt-migrate-qemu-disks -a' after
        libvirt-bin has started if migrating from
        older than 0.8.3-1ubuntu1
    - debian/libvirt-bin.postrm:
      * replace libvirt groupname with libvirtd
      * remove usr.sbin.libvirtd and
        usr.lib.libvirt.virt-aa-helper
    - keep added files under debian/:
      * libvirt-bin.upstart
      * libvirt-migrate-qemu-disks
      * libvirt-migrate-qemu-disks.1
      * libvirt-suspendonreboot
      * apparmor profiles
    - debian/README.Debian:
      * add 'Apparmor Profile' section
      * add 'Disk migration' section
    - debian/rules:
      * don't build with vbox since virtualbox-ose is in universe
      * add --with-apparmor to DEB_CONFIGURE_EXTRA_FLAGS
      * set DEB_DH_INSTALLINIT_ARGS to '--upstart-only'
      * set DEB_MAKE_CHECK_TARGET to 'check'
      * remove unneeded binary-install/libvirt-bin:: and clean::
        sections (they only deal with sysvinit stuff)
      * add build/libvirt-bin:: section to install
        - apparmor files
        - apport hooks
        - libvirt-migrate-qemu-disks
  * The following Ubuntu packaging changes occurred during the divergence
    between Debian and Ubuntu. These changes are not new, but included here
    for completeness: (0.8.5-0ubuntu1 - 0.8.5-0ubuntu5):
    - Have upstart job source /etc/default/libvirt-bin.  This is only a
      temporary fix until upstart provides proper default override support
      through /etc/init/libvirt-bin.override (or any other mechanism).
      (LP: 708172)
    - debian/apparmor/usr.sbin.libvirtd: use PUx instead of Ux for executables
      (LP: 573315)
    - Rebuild with python 2.7 as the python default.
    - debian/libvirt-bin.cron.daily: use shell globbing to enumerate xml files.
      Based on patch thanks to Henryk Plötz (LP: 655176)
  * Dropped the following patches included/fixed upstream:
    - 9010-dont-disable-ipv6.patch
    - 9022-build-cleanup-declaration-of-xen-tests.patch
    - 9023-vah-require-uuid.patch
    - 9009-autodetect-nc-params.patch
      * rolled into Debian's
        Autodetect-if-the-remote-nc-command-supports-the-q-o.patch
  * Updated the following patches:
    - 9011-move-ebtables-script.patch:
      * LOCALSTATEDIR is defined in configmake.h
    - 9000-9006: added DEP-3 tags
    - 9002-better_default_uri_virsh.patch: updated (context changed)
  * New patches:
    - 9022-drop-booton-when-kernel-specified.patch (LP: #720426)
    - 9023-fix-lxc-console-hangup.patch (LP: #668369)
    - 9024-skip-broken-commandtest.patch
  * debian/patches/series:
    - don't apply Disable-CHECKSUM-rule.patch: our iptables can do this
    - don't apply Debian-specific Debianize-libvirt-guests.patch

 -- Serge Hallyn <serge.hallyn@ubuntu.com>  Wed, 23 Feb 2011 09:05:46 -0600

libvirt (0.8.8-1) unstable; urgency=low

  [ Guido Günther ]
  * [6a174b7] Remove symbol versions that didn't introduce new public symbols
    and mark those as missing.

  [ Laurent Léonard ]
  * [d9e4cad] Imported Upstream version 0.8.8
  * [d5ae8aa] Drop patches
    - build-let-xgettext-see-strings-in-libvirt-guests.patch - fixed upstream
    - libvirt-guests-remove-bashisms.patch - fixed upstream
  * [d5990df] Update libvirt0 symbols

 -- Laurent Léonard <laurent@open-minds.org>  Tue, 22 Feb 2011 01:58:55 +0100

libvirt (0.8.7-3) unstable; urgency=low

  * [e6c5184] New patch Don-t-pass-empty-arguments-to-dnsmasq.patch: Don't
    pass empty arguments to dnsmasq
    Thanks to Simon McVittie for the detailed description (Closes: #613944)
  * [8887de6] Add gbp.conf

 -- Guido Günther <agx@sigxcpu.org>  Fri, 18 Feb 2011 15:49:44 +0100

libvirt (0.8.7-2) unstable; urgency=low

  [ Laurent Léonard ]
  * [aa3b6a0] Add gettext-base dependency for libvirt-bin.  Since
    libvirt-guests now needs it.
  * [bb7dbde] Add non dependency booting support for libvirt-guests

  [ Guido Günther ]
  * Upload to unstable
  * [f2fdde0] libvirt-bin.init: add cgconfig to Should-Start.
    This ensures we reliably process cgroups before starting libvirtd
    (Closes: #610738)
  * [261f679] libvirt-bin.init: Add hal and avahi to Should-Stop
    to make Should-Start and Should-Stop symmetric.

 -- Guido Günther <agx@sigxcpu.org>  Sat, 12 Feb 2011 15:10:48 +0100

libvirt (0.8.7-1) experimental; urgency=low

  [ Guido Günther ]
  * [f561b2e] New patch 0010-nwfilter-resolve-deadlock-between-VM-
    operations-and-.patch nwfilter: resolve deadlock between VM
    operations and filter update (Closes: #602715)

  [ Laurent Léonard ]
  * [6f95d48] Fix exit status codes in libvirt init script to comply
    with LSB
  * [7d7aed4] New patch 0010-Debianize-libvirt-guests.patch
  * [a7f4bed] Install libvirt-guests
  * [6408c57] Remove libvirt-suspendonreboot
  * [3466195] Imported Upstream version 0.8.7
  * [18bb43a] Update libvirt0 symbols
  * [d8e02ad] Fix typo in --with-init-script build option
  * [676a47e] New patch 0008-libvirt-guests-remove-bashisms.patch
  * [3a03ea6] New patch 0009-build-let-xgettext-see-strings-in-libvirt-
    guests.patch
  * [ee3d2e0] Update patch 0010-Debianize-libvirt-guests.patch
  * [904de70] Update libvirt-guests init script location

 -- Laurent Léonard <laurent@open-minds.org>  Tue, 18 Jan 2011 18:43:56 +0100

libvirt (0.8.6-1) experimental; urgency=low

  * [3b7b682] Imported Upstream version 0.8.6
  * [5b081c3] Drop patch
    - 0008-Move-MAX_VIRT_CPUS-so-all-xen-code-can-see-it.patch - fixed upstream
  * [38589e6] Update libvirt0 symbols

 -- Laurent Léonard <laurent@open-minds.org>  Tue, 30 Nov 2010 23:31:59 +0100

libvirt (0.8.5-1) experimental; urgency=low

  [ Laurent Léonard ]
  * [6e46f0e] Fix wrong regular expression in debian/watch
  * [802e658] Imported Upstream version 0.8.5
  * [c8e4517] Update patch 0002-qemu-disable-network.diff.patch
  * [5549d65] Drop patch
    - 0009-Don-t-fail-lxc-domain-start-when-memory-controller-s.patch - fixed
      upstream
  * [1af66c1] Update libvirt0 symbols

  [ Guido Günther ]
  * [fc234c4] New patch 0008-Move-MAX_VIRT_CPUS-so-all-xen-code-can-see-
    it.patch. Move MAX_VIRT_CPUS so all xen code can see it

 -- Laurent Léonard <laurent@open-minds.org>  Mon, 15 Nov 2010 14:09:53 +0100

libvirt (0.8.4-1) experimental; urgency=low

  [ Laurent Léonard ]
  * [49a581b] Imported Upstream version 0.8.4
  * [e1dc0c7] Redo patches
  * [cce7327] Update libvirt0 symbols

  [ Guido Günther ]
  * [bd91614] Drop 0007-Fix-block-statistics-with-newer-versions-of-
    Xen.patch fixed upstream.

 -- Guido Günther <agx@sigxcpu.org>  Wed, 29 Sep 2010 15:29:48 +0200

libvirt (0.8.3-6~1.gbpca2348) UNRELEASED; urgency=low

  ** SNAPSHOT build @ca2348476605efc4d067933f136ffdae3cf44283 **

  [ Laurent Léonard ]
  * [6e46f0e] Fix wrong regular expression in debian/watch
  * [6f95d48] Fix exit status codes in libvirt init script to comply with LSB

 -- Guido Günther <agx@sigxcpu.org>  Sat, 15 Jan 2011 13:55:42 +0100

libvirt (0.8.3-5) unstable; urgency=low

  [ Laurent Léonard ]
  * [6e46f0e] Fix wrong regular expression in debian/watch

  [ Guido Günther ]
  * [f561b2e] New patch 0010-nwfilter-resolve-deadlock-between-VM-
    operations-and-.patch nwfilter: resolve deadlock between VM operations and
    filter update (Closes: #602715)
  * [91a1b8d] New patch 0011-OpenVZ-take-veid-from-vmdef-name-when-
    defining-new-d.patch: Fixes OpenVZ domain creation (Closes: #592817) -
    thanks to Eric Litak.
  * [3d3f395] New patch 0012-OpenVZ-Fix-some-overwritten-error-codes.patch:
    Improve error reporting.

 -- Guido Günther <agx@sigxcpu.org>  Wed, 01 Dec 2010 15:12:48 +0100

libvirt (0.8.3-4) unstable; urgency=low

  * [29e8714] Recommend ebtables used by nwfilter
  * [e9eb650] New patch
    0009-Don-t-fail-lxc-domain-start-when-memory-controller-s.patch - Don't
    fail lxc domain start when memory controller support is missing (Closes:
    #566180)

 -- Guido Günther <agx@sigxcpu.org>  Mon, 01 Nov 2010 14:22:09 +0100

libvirt (0.8.3-3) unstable; urgency=low

  * [178670a] Add $syslog to the list of Required-{Start,Stop} services also
    drop $local_fs since we already have $remote_fs
  * [4db7451] Don't hardcode netcat's -q option. (Closes: #573172) - thanks to
    Marc Deslauriers for the patch
  * [d4c46ee] Disable CHECKSUM rules not supported by Squeeze's iptables
    (Closes: #598330)
  * [dbc2609] Move new NEWS items to the top

 -- Guido Günther <agx@sigxcpu.org>  Wed, 06 Oct 2010 19:47:46 +0200

libvirt (0.8.3-2) unstable; urgency=low

  * [4097bbd] New patch 0007-Fix-block-statistics-with-newer-versions-
    of-Xen.patch. Fix block statistics with newer versions of Xen
    (Closes: #596004) - thanks to Gerald Turner for the patch
  * [d554da3] Explain disk image probing changes (Closes: #594962)

 -- Guido Günther <agx@sigxcpu.org>  Wed, 29 Sep 2010 14:00:38 +0200

libvirt (0.8.3-1ubuntu14) maverick; urgency=low

  * Let Apparmor allow libvirtd to create PF_PACKET sockets. Several
    utility functions require it. Of particular interest, the NWFilter
    code uses it, so libvirt's firewalling functionality depends on
    this. (LP: #646706)

 -- Soren Hansen <soren@ubuntu.com>  Fri, 24 Sep 2010 23:36:36 +0200

libvirt (0.8.3-1ubuntu13) maverick; urgency=low

  * debian/patch/9028-lp628055.patch: include sys/stat.h to fix compiler
    warning and stat() failure on 32bit architectures when calling stat() on
    large files. This can be dropped in 0.8.5. (LP: #628055)

 -- Jamie Strandboge <jamie@ubuntu.com>  Wed, 22 Sep 2010 15:21:21 -0500

libvirt (0.8.3-1ubuntu12) maverick; urgency=low

  * 9027-Make-newfilter-xml-transformations-endian-safe.patch
    NWFilter XML processing includes endian assumptions.  Ensure
    that XML is parsed in an endian-safe manner.  Thanks to
    Stefan Berger for developing the patch upstream. (LP: #643394)

 -- Emmet Hikory <persia@ubuntu.com>  Mon, 20 Sep 2010 19:18:11 +0900

libvirt (0.8.3-1ubuntu11) maverick; urgency=low

  * 9026-Rebuild-network-filter-for-UML-guests-on-updates.patch.
    NWFilter updates are supposed to be immediate. Add this support to
    the UML driver.

 -- Soren Hansen <soren@ubuntu.com>  Wed, 15 Sep 2010 22:11:57 +0200

libvirt (0.8.3-1ubuntu10) maverick; urgency=low

  [ Jamie Strandboge ]
  * debian/apparmor/usr.lib.virt-aa-helper: add read access to new 'loader'
    for eucalyptus (LP: #637544)

  [ Soren Hansen ]
  * Add 9025-Add-nwfilter-support-to-UML-driver.patch. Adds missing
    nwfilter support to UML.

 -- Jamie Strandboge <jamie@ubuntu.com>  Tue, 14 Sep 2010 13:47:02 -0500

libvirt (0.8.3-1ubuntu9) maverick; urgency=low

  * Update 9023-Support-virDomainAttachDevice-and-virDomainDetachDev.patch
    based on a small last-minute change upstream.
  * Add 9024-Explicitly-pass-uml_dir-argument-to-user-mode-linux.patch
    to stop user-mode-linux domains running under a libvirtd run by
    upstart from mysteriously and silently crashing during boot.

 -- Soren Hansen <soren@ubuntu.com>  Tue, 31 Aug 2010 16:05:24 +0200

libvirt (0.8.3-1ubuntu8) maverick; urgency=low

  * debian/patches/9009-autodetect-nc-params.patch: updated to fix
    connecting to a remote server when using zsh or tcsh. (LP: #605172)

 -- Marc Deslauriers <marc.deslauriers@ubuntu.com>  Wed, 25 Aug 2010 12:41:25 -0400

libvirt (0.8.3-1ubuntu7) maverick; urgency=low

  * debian/patches/series: per Ubuntu Server team, run qemu/kvm as non-root
    and comment out 9008-run-as-root-by-default.patch. This has now received
    significant testing in Debian, adds a good security benefit for people
    who disable AppArmor and fixes the libvirt portion of LP: #619843. With
    this patch removed, libvirt will default to the Debian configure arguments
    and run qemu/kvm VMs as 'libvirt-qemu:kvm'.
  * debian/README.Debian: adjusted for the above

 -- Jamie Strandboge <jamie@ubuntu.com>  Tue, 24 Aug 2010 12:58:51 -0500

libvirt (0.8.3-1ubuntu6) maverick; urgency=low

  * FFe: LP: #622682.
  * Replace 9019-Remove-wrong-check-for-uml-monitor-response-size.patch with
    9019-uml-fix-logic-bug-in-checking-reply-length.patch which is what ended
    up getting applied upstream.
  * Add the following patches taken from upstream git:
    - 9021-Allow-chardev-of-type-file-for-UML-domains.patch
    - 9022-Rename-qemudShrinkDisks-to-virDomainDiskRemove-and-m.patch
    - 9023-Support-virDomainAttachDevice-and-virDomainDetachDev.patch

 -- Soren Hansen <soren@ubuntu.com>  Mon, 23 Aug 2010 14:24:06 +0200

libvirt (0.8.3-1ubuntu5) maverick; urgency=low

  * update to allow pcidev and hostdev to work with AppArmor (LP: #545795)
    - debian/patches/lp-545795.patch: add vendor and device to
      pciDeviceFileIterate(). Patch submitted upstream and they feel it is
      reasonable, but not committed yet. This should fix pcidev.
    - debian/apparmor/usr.lib.libvirt.virt-aa-helper: add read access to
      /sys/bus/usb/devices/**
    - debian/apparmor/libvirt-qemu: adjust read access to be
      /sys/devices/**/usb[0-9]*/** instead of /sys/devices/*/*/usb[0-9]*/**.
      Patched based on work by Andreas Ntaflos.

 -- Jamie Strandboge <jamie@ubuntu.com>  Fri, 20 Aug 2010 09:21:15 -0500

libvirt (0.8.3-1ubuntu4) maverick; urgency=low

  * debian/patches/9012-apparmor-dont-ignore-open.patch: don't bother with
    updated logic. After review, upstream's code is sufficient and simpler.
    Keep new tests and rename to 9012-apparmor-extra-tests.patch. This can be
    removed in 0.8.4.
  * debian/patches/9013-apparmor-lp457716.patch: updated based on upstream
    feedback. This can be removed in 0.8.4.

 -- Jamie Strandboge <jamie@ubuntu.com>  Mon, 16 Aug 2010 16:11:40 -0500

libvirt (0.8.3-1ubuntu3) maverick; urgency=low

  * Added the following patches:
    - 9015-Add-ubd-to-the-list-of-disk-prefixes.patch.
    - 9016-Close-fd-s-of-persistent-tap-devices.patch.
    - 9017-Make-sure-all-command-line-arguments-get-passed-to-U.patch.
    - 9018-Make-umlConnectTapDevice-ask-brAddTap-for-a-persiste.patch.
    - 9019-Remove-wrong-check-for-uml-monitor-response-size.patch
  * All but the last are already in upstream git. Together, they make
    user-mode-linux guests work again.
  * Note: The last patch in the list is still being reviewed upstream.
    Depending on the outcome, I'll update here accordingly.

 -- Soren Hansen <soren@ubuntu.com>  Mon, 16 Aug 2010 13:33:23 +0200

libvirt (0.8.3-1ubuntu2) maverick; urgency=low

  * debian/patches/9014-skip-nodeinfotest.patch: fix FTBFS in nodeinfotest
    which is still broken on armel

 -- Jamie Strandboge <jamie@ubuntu.com>  Fri, 13 Aug 2010 08:12:23 -0500

libvirt (0.8.3-1ubuntu1) maverick; urgency=low

  * Merge from debian unstable with security fixes
  * Fixes:
    - LP: #588369
    - LP: #585964
  * Remaining changes:
    - debian/control:
      + Build-Depends on qemu-kvm, not qemu
      + Build-Depends on open-iscsi-utils, not open-iscsi
      + Build-Depends on libxml2-utils
      + Build-Depends on libapparmor-dev and Suggests apparmor
      + Bump bridge-utils, dnsmasq-base, netcat-openbsd, and iptables
        to Depends of libvirt-bin
      + Drop lvm2, qemu-kvm and qemu to Suggests
      + We call libxen-dev libxen3-dev, so change all references
      + Rename Vcs-* to XS-Debian-Vcs-*
    - debian/libvirt-bin.postinst:
      + rename the libvirt group to libvirtd
      + add each admin user to the libvirtd group
      + reload apparmor profiles
    - debian/libvirt-bin.postrm:
      + rename the libvirt group to libvirtd
      + remove apparmor symlinks on purge
    - debian/README.Debian: add AppArmor section based on the upstream
      documentation
    - debian/rules:
      + update DEB_DH_INSTALLINIT_ARGS for upstart
      + add DEB_MAKE_CHECK_TARGET := check
      + use --with-apparmor
      + copy apparmor and apport hook to debian/tmp
    - add debian/libvirt-bin.upstart
    - debian/libvirt-bin.dirs: add /etc/apparmor.d/abstractions,
      /etc/apparmor.d/disable, /etc/apparmor.d/force-complain,
      /etc/apparmor.d/libvirt, /etc/cron.daily and
      /usr/share/apport/package-hooks
    - add debian/libvirt-bin.cron.daily
    - add debian/libvirt-bin.apport
    - debian/libvirt-bin.install: install apparmor profiles, abstractions
      and apport hook
    - debian/apparmor:
      - add TEMPLATE
      - add libvirt-qemu abstraction
      - add usr.lib.libvirt.virt-aa-helper
      - add usr.sbin.libvirtd
    - debian/patches/series:
      + don't apply 0002-qemu-disable-network.diff.patch
      + don't apply 0005-Terminate-nc-on-EOF.patch. Use
        9009-autodetect-nc-params.patch instead
      + 9000-delayed_iff_up_bridge.patch (refreshed)
      + 9001-dont_clobber_existing_bridges.patch
      + 9002-better_default_uri_virsh.patch (refreshed)
      + 9003-better-default-arch.patch (refreshsed)
      + 9004-libvirtd-group-name.patch
      + 9005-increase-unix-socket-timeout.patch (refreshed)
      + 9006-default-config-test-case.patch
      + 9007-fix-daemon-conf-ftbfs.patch (updated)
      + 9008-run-as-root-by-default.patch (refreshed)
      + 9009-autodetect-nc-params.patch (refreshed)
      + 9010-dont-disable-ipv6.patch (refreshsed)
      + 9011-move-ebtables-script.patch (refreshed)
  * Dropped the following patches included/fixed upstream:
    - 9012-fix-nodeinfotest-ftbfs.patch
    - 9013-apparmor-lp457716.patch
  * Disable virtualbox support since virtualbox-ose is not in main
    - debian/control: remove virtualbox-ose build dependency
    - debian/rules: use --without-vbox
  * debian/patches/9012-apparmor-dont-ignore-open.patch: fix logic when
    using virDomainDiskDefForeachPath() and add tests. This can be removed
    in 0.8.4.
  * debian/apparmor/usr.sbin.libvirtd: add capability fsetid (LP: #613549)
  * debian/apparmor/usr.lib.libvirt.virt-aa-helper: allow access to
    @{PROC}/[0-9]*/net/psched
  * debian/patches/9013-apparmor-chardev.patch: update for serial, parallel
    and channels. This can be removed in 0.8.4. (LP: #609055, LP: #578527)
  * migrate virtual machine definitions with non-raw disks and previously
    unspecified disk format with a one time probe:
    - add debian/libvirt-migrate-qemu-disks
    - add debian/libvirt-migrate-qemu-disks.1
    - debian/libvirt-bin.postinst: updated to run 'libvirt-migrate-qemu-disks
      -a' on upgrades
    - debian/rules: cp debian/libvirt-migrate-qemu-disks into place
    - debian/libvirt-bin.manpages: install debian/libvirt-migrate-qemu-disks.1
    - debian/README.Debian: updated for libvirt-migrate-qemu-disks

 -- Jamie Strandboge <jamie@ubuntu.com>  Thu, 12 Aug 2010 17:00:59 -0500

libvirt (0.8.3-1) unstable; urgency=low

  [ Guido Günther ]
  * Mention clear_emulator_capabilities
  * Recommend iptables and gawk

  [ Laurent Léonard ]
  * Imported Upstream version 0.8.3
    - Fixes: CVE-2010-2237, CVE-2010-2238, CVE-2010-2239, CVE-2010-2242
  * Redo patches
  * Update libvirt0 symbols
  * Bump Standards-Version to 3.9.1

  [ Guido Günther ]
  * Install libvirt-qemu library
  * Add libvirt-qemu.so symbols

  [ Laurent Léonard ]
  * Fix debian/NEWS syntax

 -- Laurent Léonard <laurent@open-minds.org>  Fri, 06 Aug 2010 17:18:55 +0200

libvirt (0.8.2-1) unstable; urgency=low

  * Imported Upstream version 0.8.2
  * Drop patches.
  * Update libvirt0 symbols.
  * Bump Standards-Version to 3.9.0.
  * Add virtualbox-ose and libnl-dev build dependencies.

 -- Laurent Léonard <laurent@open-minds.org>  Tue, 06 Jul 2010 12:14:33 +0200

libvirt (0.8.1-2ubuntu1) maverick; urgency=low

  * Merge from debian unstable. Remaining changes:
    - Fixes:
      LP: #522845
      LP: #553737
      LP: #520386
    - debian/control:
      + Build-Depends on qemu-kvm, not qemu
      + Build-Depends on open-iscsi-utils, not open-iscsi
      + Build-Depends on libxml2-utils
      + Build-Depends on libapparmor-dev and Suggests apparmor
      + Bump bridge-utils, dnsmasq-base, netcat-openbsd, and iptables
        to Depends of libvirt-bin
      + Drop qemu-kvm and qemu to Suggests
      + We call libxen-dev libxen3-dev, so change all references
      + Rename Vcs-* to XS-Debian-Vcs-*
    - debian/libvirt-bin.postinst:
      + rename the libvirt group to libvirtd
      + add each admin user to the libvirtd group
      + reload apparmor profiles
    - debian/libvirt-bin.postrm:
      + rename the libvirt group to libvirtd
      + remove apparmor symlinks on purge
    - debian/README.Debian: add AppArmor section based on the upstream
      documentation
    - debian/rules:
      + update DEB_DH_INSTALLINIT_ARGS for upstart
      + add DEB_MAKE_CHECK_TARGET := check
      + use --with-apparmor
      + copy apparmor and apport hook to debian/tmp
    - add debian/libvirt-bin.upstart
    - debian/libvirt-bin.dirs: add /etc/apparmor.d/abstractions,
      /etc/apparmor.d/disable, /etc/apparmor.d/force-complain,
      /etc/apparmor.d/libvirt, /etc/cron.daily and
      /usr/share/apport/package-hooks
    - add debian/libvirt-bin.cron.daily
    - add debian/libvirt-bin.apport
    - debian/libvirt-bin.install: install apparmor profiles, abstractions
      and apport hook
    - debian/apparmor:
      - add TEMPLATE
      - add libvirt-qemu abstraction
      - add usr.lib.libvirt.virt-aa-helper
      - add usr.sbin.libvirtd
    - debian/patches/series:
      + don't apply 0002-qemu-disable-network.diff.patch
      + don't apply 0005-Terminate-nc-on-EOF.patch. Use
        9010-autodetect-nc-params.patch instead
      + 9000-delayed_iff_up_bridge.patch (refreshed)
      + 9001-dont_clobber_existing_bridges.patch
      + 9002-better_default_uri_virsh.patch (updated)
      + 9004-better-default-arch.patch
      + 9005-libvirtd-group-name.patch
      + 9006-increase-unix-socket-timeout.patch (refreshed)
      + 9007-default-config-test-case.patch (updated)
      + 9008-fix-daemon-conf-ftbfs.patch (rewritten)
      + 9009-run-as-root-by-default.patch (refreshed)
      + 9010-autodetect-nc-params.patch (refreshed, formerly 9015)
      + 9011-dont-disable-ipv6.patch (updated)
  * Dropped following packaging changes, no longer required with upgrades
    from Lucid:
    - debian/control:
      + versioned Conflicts/Replaces to libvirt0 for libvirt0-dbg
      + remove Build-Depends on libcap-ng-dev
    - debian/libvirt-bin.postinst: virt-aa-helper profile migration to
      /usr/lib/libvirt
    - debian/libvirt-bin.preinst: added to force complain on certain
      upgrades
  * Dropped the following patches, included upstream:
    - 0010-Use-base-16-for-product-vendor.patch
    - 9003-increase-logoutput-timeout.patch
    - 9010-apparmor-ftbfs.patch
    - 9011-node_device_driver.patch
    - 9012-dont-crash-on-restart.patch
    - 9013-apparmor-dont-clear-caps.patch
    - 9014-apparmor-remove-unloaded-profile-is-not-fatal.patch
    - 9016-disk-cache-setting-xml.patch
    - 9018-fix-pty-console.patch
    - 9019-apparmor-fix-xauth.patch
    - 9020-apparmor-fix-backingstore.patch
    - 9021-apparmor-fix-hostdev.patch
    - 9022-dont-leak-log-fd.path.patch
    - 9023-virt-pki-validate_fixes.patch
    - 9024-free-memory-for-invalid-devices.patch (use
      0008-Fix-leaks-in-udev-device-add-remove.patch from Debian)
  * debian/apparmor/usr.lib.libvirt.virt-aa-helper: allow access to ecryptfs
    files (LP: #591769)
  * debian/patches/9012-fix-nodeinfotest-ftbfs.patch: fix FTBFS in
    nodeinfotest. Drop in 0.8.2.
  * debian/patches/9013-apparmor-lp457716.patch: properly support/save and
    restore (LP: #457716). Drop in 0.8.2.
  * debian/apparmor/libvirt-qemu: remove workaround for LP: #457716
  * don't create and run ebtables script in /tmp:
    - debian/apparmor/usr.sbin.libvirt: allow ixr to /var/lib/libvirt/virtd*
      for new ebtables functionality added in 0.8.0
    - debian/patches/9014-move-ebtables-script.patch: update
      nwfilter_ebiptables_driver.c /var/lib/libvirt to use /var/lib/libvirt
      instead of /tmp

 -- Jamie Strandboge <jamie@ubuntu.com>  Wed, 16 Jun 2010 14:22:39 -0500

libvirt (0.8.1-2) unstable; urgency=low

  * [41aea79] Drop patchsys-quilt since this package is 3.0 (quilt) now.
    (Closes: #577919)
  * [978e3c9] libvirt-bin.init: export PATH. (Closes: #584333)
  * [e4f0869] virt-xml-validate needs xmllint from libxml2-utils.
    (Closes: #584869)
  * [bba6d72] New patch 0008-Fix-leaks-in-udev-device-add-remove.patch:
    Fix leaks in udev device add/remove. (Closes: #582965) - thanks to
    Nigel Jones for forwarding this

 -- Guido Günther <agx@sigxcpu.org>  Mon, 07 Jun 2010 18:23:47 +0200

libvirt (0.8.1-1) unstable; urgency=low

  * [647cbd6] Imported Upstream version 0.8.1
        * fixes spurious syslog messages (Closes: #565275)
        * sysfs USB class parsing (Closes: #579208)
        * virsh honors $VISUAL (Closes: #574415)
  * [fecd1b9] Update libvirt symbols to 0.8.1
  * [3e58e0b] Drop patches merged upstream:
        * 0007-nwfilter-Don-t-crash-if-driverState-NULL.patch
        * 0008-Ignore-empty-type-statement-in-disk-element.patch
  * [561ab2e] New patch:
        * 0007-patch-qemuMonitorTextGetMigrationStatus-to-intercept.patch:
          make qemuMonitorTextGetMigrationStatus to intercept unknown
          command 'info migrate' (Closes: #574272) - thanks to Andreas Bießmann
  * [aeda8ea] Enanble macvtap support

 -- Guido Günther <agx@sigxcpu.org>  Sun, 09 May 2010 14:25:00 +0200

libvirt (0.8.0-2) unstable; urgency=low

  * [70fbcb6] New patch 0007-nwfilter-Don-t-crash-if-driverState- NULL.patch
    nwfilter: Don't crash if driverState == NULL (Closes: #577728)
  * [d7d1abd] New patch 0008-Ignore-empty-type-statement-in-disk-
    element.patch Ignore empty type statement in disk element
    (Closes: #578347)

 -- Guido Günther <agx@sigxcpu.org>  Mon, 19 Apr 2010 18:11:57 +0200

libvirt (0.8.0-1) unstable; urgency=low

  * Imported Upstream version 0.8.0
  * Drop patches.
  * Update libvirt0 symbols.
  * Switch to new source format 3.0 (quilt).

 -- Laurent Léonard <laurent@open-minds.org>  Tue, 13 Apr 2010 20:50:29 +0200

libvirt (0.7.7-4) unstable; urgency=low

  [ Guido Günther ]
  * [cf4919c] Recommend either qemu-kvm or qemu

  [ Laurent Léonard ]
  * [1b12f02] Change libparted1.8-dev build dependency to libparted0- dev.
    (Closes: #574906)

 -- Guido Günther <agx@sigxcpu.org>  Mon, 22 Mar 2010 20:50:30 +0100

libvirt (0.7.7-3) unstable; urgency=low

  * The "fix all those crashes" release
  * [f74e13a] Explicitly disable hal (Closes: #574177)
  * [21ef92b] New patch 0009-security-Set-permissions-for-kernel- initrd.patch
    security: Set permissions for kernel/initrd (Closes: #574241) - thanks to
    Cole Robinson
  * [b69d3cc] Revert "Enable NUMA support" since it breaks the python
    bindings.
  * [5f2ca4a] New patch 0010-Don-t-crash-without-a-security-driver.patch Don't
    crash without a security driver (Closes: #574359)

 -- Guido Günther <agx@sigxcpu.org>  Wed, 17 Mar 2010 21:05:35 +0100

libvirt (0.7.7-2) unstable; urgency=low

  [ Guido Günther ]
  * [b350683] Enable parallel build
  * [b2a6aab] Enable NUMA support
  * [13274cf] New patch 0007-Work-around-broken-linux-socket.h.patch
    Work around broken linux/socket.h

  [ Laurent Léonard ]
  * [3c12caf] qemu: Fix USB by product with security enabled.

 -- Laurent Léonard <laurent@open-minds.org>  Tue, 16 Mar 2010 00:47:34 +0100

libvirt (0.7.7-1) unstable; urgency=low

  * [f944460] Imported Upstream version 0.7.7
  * [bd457cc] Redo patches.
  * [098d1d3] Update libvirt0 symbols.

 -- Laurent Léonard <laurent@open-minds.org>  Fri, 05 Mar 2010 17:49:17 +0100

libvirt (0.7.6-2) unstable; urgency=low

  * [72790fc] Drop hal dependency We're using udev for device enumeration.
  * [ce225c4][11cc6e9] New patch
    0006-Don-t-drop-caps-when-exec-ing-qemu.patch: Don't drop caps when
    exec'ing qemu. Instead of disabling libcap-ng better exclude this one exec
    so we get the additional security for the rest of the calls. Makes
    interface type="network" work again. (Closes: #565767)

 -- Guido Günther <agx@sigxcpu.org>  Sun, 14 Feb 2010 18:22:30 +0100

libvirt (0.7.6-1) unstable; urgency=low

  * [0229557] Imported Upstream version 0.7.6
  * [6fdc00b] Drop patches.
  * [1b0670b] Update libvirt0 symbols.

 -- Laurent Léonard <laurent@open-minds.org>  Thu, 04 Feb 2010 00:38:08 +0100

libvirt (0.7.5-6) unstable; urgency=low

  [ Laurent Léonard ]
  * [a3b98c9] Don't free an uninitalized pointer in update_driver_name()
    (Closes: #565983) - thanks to Matthias Bolte
  * [719976d] Handle only official releases in debian/watch.
  * [83902d9] Bump Standards-Version to 3.8.4.

  [ Guido Günther ]
  * [959640d] New patch 0011-Fix-parsing-of-info-chardev-line-
    endings.patch Fix parsing of 'info chardev' line endings (Closes:
    #567818) - thanks to Matthew Booth

  [ Laurent Léonard ]
  * [0b2a9dd] Add $remote_fs to Required-Start and Required-Stop in
    libvirt-bin init script.

 -- Laurent Léonard <laurent@open-minds.org>  Mon, 01 Feb 2010 00:03:58 +0100

libvirt (0.7.5-5ubuntu29) maverick; urgency=low

  * debian/apparmor/libvirt-qemu: allow setgid and setuid so qemu can drop
    privileges (LP: #579584)

 -- Jamie Strandboge <jamie@ubuntu.com>  Thu, 10 Jun 2010 13:09:44 -0500

libvirt (0.7.5-5ubuntu28) maverick; urgency=low

  * debian/control: lower qemu-kvm and lvm2 from Recommends to Suggests,
    LP: #556312; it's reasonable to install libvirt on systems that
    host xen and qemu VMs; see meta packages (ubuntu-virt, ubuntu-virt-server,
    ubuntu-virt-mgmt) for group installation of virt pacakge sets

 -- Dustin Kirkland <kirkland@ubuntu.com>  Fri, 04 Jun 2010 19:09:36 -0500

libvirt (0.7.5-5ubuntu27.1) maverick; urgency=low

  [ Nigel Jones ]
  * debian/patches/9024-free-memory-for-invalid-devices.patch: clean
    up a memory leak affecting multipath+libvirt, LP: #571093

 -- Dustin Kirkland <kirkland@ubuntu.com>  Mon, 24 May 2010 10:00:07 -0500

libvirt (0.7.5-5ubuntu27) lucid; urgency=low

  * debian/libvirt-bin.postinst: ensure that the convenience feature
    of adding users to the libvirtd group does cause package setup
    failure, LP: #565380
  * debian/patches/9023-virt-pki-validate_fixes.patch: fix a bashism,
    a missing autoconf substitution, and an insufficient sed call, in
    order to get this working on Ubuntu, LP: #562266; patch submitted
    upstream

 -- Dustin Kirkland <kirkland@ubuntu.com>  Wed, 21 Apr 2010 15:59:49 -0500

libvirt (0.7.5-5ubuntu26) lucid; urgency=low

  * debian/patches/9022-dont-leak-log-fd.path.patch: Fix FD leak in
    qemudStartVMDaemon (LP: #567392)
  * debian/apparmor/usr.lib.libvirt.virt-aa-helper: update paths for LVM
    volumes and searching /sys/bus/usb/devices/ (LP: #565691)

 -- Jamie Strandboge <jamie@ubuntu.com>  Tue, 20 Apr 2010 13:45:12 -0500

libvirt (0.7.5-5ubuntu25) lucid; urgency=low

  * debian/apparmor/usr.lib.libvirt.virt-aa-helper: update paths for
    eucalyptus (LP: #564914)

 -- Jamie Strandboge <jamie@ubuntu.com>  Fri, 16 Apr 2010 14:10:06 -0500

libvirt (0.7.5-5ubuntu24) lucid; urgency=low

  * debian/apparmor/usr.lib.libvirt.virt-aa-helper: eek, the /dev change from
    the last upload was a wee bit too aggressive. Revert that and allow access
    to .img, .qcow{,2}, and .vmdk (file extensions that actually support
    backingstore) and .[iI][sS][oO] since it is so common (LP: #517714)

 -- Jamie Strandboge <jamie@ubuntu.com>  Thu, 15 Apr 2010 08:52:27 -0500

libvirt (0.7.5-5ubuntu23) lucid; urgency=low

  * debian/apparmor/usr.lib.libvirt.virt-aa-helper: also allow /opt but deny
    access to /dev to suppress confusing, non-fatal profile denials.

 -- Jamie Strandboge <jamie@ubuntu.com>  Wed, 14 Apr 2010 07:36:13 -0500

libvirt (0.7.5-5ubuntu22) lucid; urgency=low

  * debian/apparmor/usr.lib.libvirt.virt-aa-helper: allow ro access to files
    in /mnt, /media and /srv

 -- Jamie Strandboge <jamie@ubuntu.com>  Tue, 13 Apr 2010 08:27:46 -0500

libvirt (0.7.5-5ubuntu21) lucid; urgency=low

  * debian/libvirt-bin.upstart: simplify pidfile cleanup logic,
    per discussion with Jamie Strandboge and Loic Minier in LP: #510658

 -- Dustin Kirkland <kirkland@ubuntu.com>  Wed, 07 Apr 2010 16:09:05 -0500

libvirt (0.7.5-5ubuntu20) lucid; urgency=low

  * debian/libvirt-bin.upstart:
    - remove unnecessary pid file existence test, LP: #510658
    - revert virbr0 up/down hack added in 0.7.5-5ubuntu17, LP: #345485

 -- Dustin Kirkland <kirkland@ubuntu.com>  Wed, 07 Apr 2010 15:39:39 -0500

libvirt (0.7.5-5ubuntu19) lucid; urgency=low

  * fix for hostdev devices (LP: #545795). This can be dropped in 0.7.8
    - debian/patches/9021-apparmor-fix-hostdev.patch: adjust virt-aa-helper to
      handle pci devices. Update valid_path() to have an override array to
      check against, and add "/sys/devices/pci" to it. Then rename
      file_iterate_cb() to file_iterate_hostdev_cb() and create
      file_iterate_pci_cb() based on it. Update tests suite for this and SDL
    - debian/apparmor/libvirt-qemu: adjust for the above
    - debian/apparmor/usr.lib.libvirt.virt-aa-helper: allow access to
      /sys/devices

 -- Jamie Strandboge <jamie@ubuntu.com>  Mon, 05 Apr 2010 19:50:15 -0500

libvirt (0.7.5-5ubuntu18) lucid; urgency=low

  * handle SDL graphics (LP: #545426). This can be dropped in 0.7.8
    - 9019-apparmor-fix-xauth.patch: adjust virt-aa-helper to handle SDL
      graphics, specifically Xauthority. Also remove a couple redundant
      checks.
    - debian/apparmor/libvirt-qemu: add comment about /dev/fb*
  * handle backingstore (LP: #470636). This can be dropped in 0.7.8
    - debian/patches/9020-apparmor-fix-backingstore.patch: adjust
      virt-aa-helper to handle disks with backing stores
    - debian/apparmor/usr.lib.libvirt.virt-aa-helper: allow access to
      user-tmp, non-hidden files in @{HOME} and storage pools

 -- Jamie Strandboge <jamie@ubuntu.com>  Mon, 05 Apr 2010 16:56:25 -0500

libvirt (0.7.5-5ubuntu17) lucid; urgency=low

  * debian/libvirt-bin.upstart: bring virbr0 up/down on upstart start/stop
    of libvirt, LP: #345485

 -- Dustin Kirkland <kirkland@ubuntu.com>  Thu, 01 Apr 2010 23:08:33 -0500

libvirt (0.7.5-5ubuntu16) lucid; urgency=low

  * debian/libvirt-bin.upstart: libvirt has a nasty habit of leaving
    it's pidfile lying around when/if it crashes; add a pre-start
    check that removes the pidfile if it exists but the daemon is
    not actually running, LP: #510658

 -- Dustin Kirkland <kirkland@ubuntu.com>  Thu, 01 Apr 2010 19:47:04 -0500

libvirt (0.7.5-5ubuntu15) lucid; urgency=low

  * debian/apparmor/libvirt-qemu, examples/apparmor/libvirt-qemu:
    allow seabios in the apparmor profile, LP: #545302

 -- Dustin Kirkland <kirkland@ubuntu.com>  Tue, 23 Mar 2010 11:28:28 -0700

libvirt (0.7.5-5ubuntu14) lucid; urgency=low

  * debian/patches/9018-fix-pty-console.patch: fix issue using
    console in virsh.
    (LP: #542324)

 -- Scott Moser <smoser@ubuntu.com>  Fri, 19 Mar 2010 15:58:21 -0400

libvirt (0.7.5-5ubuntu13) lucid; urgency=low

  * debian/patches/9017-dont-disable-ipv6.patch: don't disable IPv6
    on the bridge interface. The original intent of disabling IPv6 was
    to prevent RAs received from client VMs from accidentally adding
    addresses to the bridge interface. However, only accept_ra=0 is
    necessary to fix this, without the side-effect of disabling IPv6.
    (LP: #528934)

 -- Jeremy Visser <jeremy@visser.name>  Thu, 04 Mar 2010 17:33:11 +1100

libvirt (0.7.5-5ubuntu12) lucid; urgency=low

  * Build against parted 2.2.

 -- Colin Watson <cjwatson@ubuntu.com>  Tue, 09 Mar 2010 01:18:49 +0000

libvirt (0.7.5-5ubuntu11) lucid; urgency=low

  * Make sure cache setting is output by virDomainGetXMLDesc (and, by
    extension, "virsh dumpxml"), even if no special driverName is set.
    (LP: #531741)

 -- Soren Hansen <soren@ubuntu.com>  Thu, 04 Mar 2010 22:19:52 +0100

libvirt (0.7.5-5ubuntu10) lucid; urgency=low

  * debian/patches/9015-autodetect-nc-params.patch: autodetect if the
    remote nc command supports the -q option. (LP: #517478)
  * debian/patches/0006-Terminate-nc-on-EOF.patch: disabled
    as the previous patch replaces it.

 -- Marc Deslauriers <marc.deslauriers@ubuntu.com>  Thu, 04 Mar 2010 07:58:52 -0500

libvirt (0.7.5-5ubuntu9) lucid; urgency=low

  * debian/apparmor/libvirt-qemu:
    - explicitly deny setpcap to silence denials. See LP: 522845 for details
    - allow read access to /proc/*/status
  * debian/patches/9014-apparmor-remove-unloaded-profile-is-not-fatal.patch:
    Don't exit with error if the user unloaded the profile outside of libvirt
    (LP: #530400)

 -- Jamie Strandboge <jamie@ubuntu.com>  Wed, 03 Mar 2010 06:29:39 -0600

libvirt (0.7.5-5ubuntu8) lucid; urgency=low

  * Build against parted 2.1.

 -- Colin Watson <cjwatson@ubuntu.com>  Fri, 26 Feb 2010 18:11:14 +0000

libvirt (0.7.5-5ubuntu7) lucid; urgency=low

  * debian/patches/0010-Use-base-16-for-product-vendor.patch: parse the USB
    and PCI product and vendor ids in hexadecimal. This fixes incorrect
    USB ids being used in virt-manager. (LP: #514610)

 -- Marc Deslauriers <marc.deslauriers@ubuntu.com>  Sun, 07 Feb 2010 11:08:23 -0500

libvirt (0.7.5-5ubuntu6) lucid; urgency=low

  * debian/patches/9013-apparmor-dont-clear-caps.patch: Don't clear
    capabilities when calling virt-aa-helper. When built with libcap-ng,
    clearing caps makes virt-aa-helper lose MAC_ADMIN, which is (obviously)
    needed by apparmor_parser. This restores libcap-ng behavior to what it was
    when not built with libcap-ng. (LP: #517714)

 -- Jamie Strandboge <jamie@ubuntu.com>  Fri, 05 Feb 2010 16:48:42 -0600

libvirt (0.7.5-5ubuntu5) lucid; urgency=low

  * Build-Depend on libcap-ng. (LP: #488963)

 -- Soren Hansen <soren@ubuntu.com>  Thu, 04 Feb 2010 14:50:40 -0800

libvirt (0.7.5-5ubuntu4) lucid; urgency=low

  * debian/patches/9011-node_device_driver.patch: Don't free an uninitalized
    pointer in update_driver_name() in src/node_device/node_device_driver.c
    (LP: #513544)
  * debian/patches/9012-dont-crash-on-restart.patch: don't crash on restart
    if domain(s) with PCI devices are running

 -- Jamie Strandboge <jamie@ubuntu.com>  Thu, 28 Jan 2010 08:26:14 -0600

libvirt (0.7.5-5ubuntu3) lucid; urgency=low

  * 9008-fix-daemon-conf-ftbfs.patch: fix for FTBFS on Ubuntu buildds by
    disabling running libvirtd with a valid config file in the daemon-conf
    test. This patch used to be 9008-warn-on-daemon-conf-test-wait.patch

 -- Jamie Strandboge <jamie@ubuntu.com>  Mon, 25 Jan 2010 21:08:46 -0600

libvirt (0.7.5-5ubuntu2) lucid; urgency=low

  * debian/patches/9010-apparmor-ftbfs.patch: updated to match upstream
    and give proper attribution

 -- Jamie Strandboge <jamie@ubuntu.com>  Mon, 25 Jan 2010 17:44:30 -0600

libvirt (0.7.5-5ubuntu1) lucid; urgency=low

  * Merge from debian unstable. Remaining changes:
    - debian/control:
      + Build-Depends on qemu-kvm, not qemu
      + Build-Depends on open-iscsi-utils, not open-iscsi
      + Build-Depends on libxml2-utils
      + Build-Depends on libapparmor-dev and Suggests apparmor (>=
        2.3+1289-0ubuntu14)
      + Bump bridge-utils, dnsmasq-base, netcat-openbsd, and iptables
        to Depends of libvirt-bin
      + Recommends qemu-kvm (>= 0.11.0-0ubuntu6)
      + Add versioned Conflicts/Replaces to libvirt0 for libvirt0-dbg,
        since we used to ship them as such
      + We call libxen-dev libxen3-dev, so change all references
      + temporarily remove Build-Depends on libcap-ng-dev, which isn't
        available in Ubuntu main yet
      + Rename Vcs-* to XS-Debian-Vcs-*
    - debian/libvirt-bin.postinst:
      + rename the libvirt group to libvirtd
      + add each admin user to the libvirtd group
      + reload apparmor profiles
      + 0.7.2 moved /usr/bin/virt-aa-helper to /usr/lib/libvirt, so the
        profile changed from usr.bin.virt-aa-helper to
        usr.lib.libvirt.virt-aa-helper and needs to be migrated. If the user
        made no changes to the old profile, remove it, otherwise, update the
        paths, preserving the shipped usr.lib.libvirt.virt-aa-helper
    - debian/libvirt-bin.postrm:
      + rename the libvirt group to libvirtd
      + remove apparmor symlinks on purge
    - debian/libvirt-bin.preinst: added to force complain on certain
      upgrades
    - debian/README.Debian: add AppArmor section based on the upstream
      documentation
    - debian/rules:
      + update DEB_DH_INSTALLINIT_ARGS for upstart
      + add DEB_MAKE_CHECK_TARGET := check
      + use --with-apparmor
      + copy apparmor and apport hook to debian/tmp
    - add debian/libvirt-bin.upstart
    - debian/libvirt-bin.dirs: add /etc/apparmor.d/abstractions,
      /etc/apparmor.d/disable, /etc/apparmor.d/force-complain,
      /etc/apparmor.d/libvirt, /etc/cron.daily and
      /usr/share/apport/package-hooks
    - add debian/libvirt-bin.cron.daily
    - add debian/libvirt-bin.apport
    - debian/libvirt-bin.install: install apparmor profiles, abstractions
      and apport hook
    - debian/patches/series: don't apply 0002-qemu-disable-network.diff.patch
      + 9000-delayed_iff_up_bridge.patch
      + 9001-dont_clobber_existing_bridges.patch
      + 9002-better_default_uri_virsh.patch
      + 9003-increase-logoutput-timeout.patch
      + 9004-better-default-arch.patch
      + 9005-libvirtd-group-name.patch
      + 9006-increase-unix-socket-timeout.patch
      + 9007-default-config-test-case.patch
      + 9008-warn-on-daemon-conf-test-wait.patch (renamed from 9016)
    - Dropped the following patches now including upstream:
      + 0005-Fix-SELinux-linking-issues.patch
      + 9008-apparmor-caps-mockup.patch
      + 9009-apparmor-lp453335.patch
      + 9010-apparmor-lp460271.patch
      + 9011-apparmor-code-cleanups.patch
      + 9012-apparmor-add-virt-aa-helper-test.patch
      + 9013-apparmor-examples.patch
      + 9014-event-fuzz.patch
      + 9015-hal-startup-failure-is-nonfatal.patch
  * debian/patches/9009-run-as-root-by-default.patch: run virtual machines
    via qemu:///system as root. As of 0.7, upstream libvirt has the ability to
    run VMs started via qemu:///system as an unprivileged user. Debian's
    libvirt now runs these VMs as libvirt-qemu:kvm. However, the upstream
    implementation is contentious among the community and while it does
    reduce the privileges of the VMs running under qemu:///system, all VMs
    currently run under the same user, so there is no guest isolation. Even if
    each user ran under its own user, an attacker could potentially break out
    of the VM and have unconfined user access (albeit non-root). In Ubuntu,
    Qemu/KVM virtual machines are already fully isolated and confined by the
    AppArmor security driver so this feature has been disabled. Once there is
    consensus among the community on the implementation and its use, changing
    this default in Ubuntu can be considered as an additional protection to
    the AppArmor driver.
  * debian/README.Debian: add section discussing the security implications of
    using qemu:///system
  * debian/patches/9010-apparmor-ftbfs.patch: fix missing bracket in
    virt-aa-helper.c and automake dependency declaration. This should be
    dropped in 0.7.6 or higher.

 -- Jamie Strandboge <jamie@ubuntu.com>  Mon, 25 Jan 2010 12:48:13 -0600

libvirt (0.7.5-5) unstable; urgency=low

  [ Guido Günther ]
  * [d8e60e8] Add css to docs
  * [f6e41ae] New patch 0008-qemu-Use-log-output-for-pty-assignment-if-
    info-chard.patch qemu: Use log output for pty assignment if 'info
    chardev' is unavailable - thanks to Matthias Bolte

  [ Laurent Léonard ]
  * [0905f82] Fix QEMU driver custom domain status XML extensions. -
    thanks to Daniel P. Berrange

 -- Laurent Léonard <laurent@open-minds.org>  Tue, 19 Jan 2010 23:16:16 +0100

libvirt (0.7.5-4) unstable; urgency=low

  * [18520c0] Same description of supported virt techs in all binary packages
    (Closes: #564909) - thanks to Loïc Minier
  * [49c357c] Implement path lookup for USB by vendor:product (Closes:
    #563502) - thanks to Cole Robinson

 -- Guido Günther <agx@sigxcpu.org>  Wed, 13 Jan 2010 23:57:26 +0100

libvirt (0.7.5-3) unstable; urgency=low

  * [4d41fd7] Also look for dmi information in /sys/class older kernels such
    as 2.6.26 have it there. (Closes: #564020)
  * [1c0e0b5] Explicitly disable ESX support
  * [c3c84f6] Terminate nc on EOF (Closes: #564053) - thanks to Gabor Gombas
    for the patch

 -- Guido Günther <agx@sigxcpu.org>  Fri, 08 Jan 2010 11:07:34 +0100

libvirt (0.7.5-2) unstable; urgency=low

  * Upload to unstable
  * [d6c5ca5] Add debugging symbols for all packages

 -- Guido Günther <agx@sigxcpu.org>  Sun, 03 Jan 2010 20:01:12 +0100

libvirt (0.7.5-1) experimental; urgency=low

  [ Laurent Léonard ]
  * [96f8d94] Imported Upstream version 0.7.5
  * [f8089a1] Redo patches.
  * [294ce3d] Update libvirt0 symbols.
  * [1c97be7] Allow DM upload and add myself as uploader.
  * [5635a32] Clean debian/watch.

  [ Guido Günther ]
  * [45f98ae] Drop 0005-udev_device_get_devpath-might-return-NULL.patch
    applied upstream.

 -- Guido Günther <agx@sigxcpu.org>  Sat, 26 Dec 2009 17:45:47 +0100

libvirt (0.7.4-2) experimental; urgency=low

  * [65d3755] Disable SELinux to work around #559356
  * [19bd427] Run qemu instances as qemu-libvirt instead of root by default
    (Closes: #558197)
  * [0a6c03b] Use kvm as primary group for libvirt-qemu user
  * [e5ae24b] Fix udev backend startup
  * [f610a8e] Use udev instead of hal backend

 -- Guido Günther <agx@sigxcpu.org>  Mon, 07 Dec 2009 21:20:20 +0100

libvirt (0.7.4-1) unstable; urgency=low

  [ Laurent Léonard ]
  * [8f2761b] Imported Upstream version 0.7.4
  * [20b6b3d] Drop patches.
      * 0005-Fix-SELinux-linking-issues.patch - fixed upstream.
      * 0006-Don-t-let-parent-of-daemon-exit-until-basic-initiali.patch -
        fixed upstream.
      * 0007-Only-remove-masquerade-roles-for-VIR_NETWORK_FORWARD.patch -
        applied upstream.
      * 0008-Fix-qemu-session.patch - fixed upstream.
  * [e41f8c6] Update libvirt0 symbols.
  * [f184e28] Revert "switch to new source format 3.0 (quilt)" This reverts
    commit 213ca47bbbefe2dc95be58a09db34669e3be5797.
  * [65084d2] Enhance handling of examples.

 -- Guido Günther <agx@sigxcpu.org>  Tue, 01 Dec 2009 18:51:18 +0100

libvirt (0.7.2-4ubuntu6) lucid; urgency=low

  * Update libvirt0 description to match the other packages in supported
    virtualization technologies.
  * Rename Vcs-* to XS-Debian-Vcs-*.

 -- Loïc Minier <loic.minier@ubuntu.com>  Tue, 12 Jan 2010 17:22:02 +0100

libvirt (0.7.2-4ubuntu5) lucid; urgency=low

  * debian/rules, debian/libvirt-bin.upstart: migrate libvirt to upstart
    (LP: #446036)
  * debian/control: depend on open-iscsi-utils, rather than open-iscsi,
    fixed again, grrr (LP: #414986)

 -- Dustin Kirkland <kirkland@ubuntu.com>  Tue, 05 Jan 2010 23:23:28 -0600

libvirt (0.7.2-4ubuntu4) lucid; urgency=low

  * debian/libvirt-bin.postinst: don't sed a non-existent file (LP: #493582)

 -- Jamie Strandboge <jamie@ubuntu.com>  Mon, 07 Dec 2009 08:55:03 -0600

libvirt (0.7.2-4ubuntu3) lucid; urgency=low

  * debian/patches/9016-warn-on-daemon-conf-test-wait.patch: workaround FTBFS
    on buildd by not failing when waiting on pid

 -- Jamie Strandboge <jamie@ubuntu.com>  Wed, 02 Dec 2009 12:12:17 -0600

libvirt (0.7.2-4ubuntu2) lucid; urgency=low

  * debian/control: Build-Depends on qemu-kvm, not qemu
  * debian/patches/9007-default-config-test-case.patch: revert last change
    which caused a different failure on buildd

 -- Jamie Strandboge <jamie@ubuntu.com>  Wed, 02 Dec 2009 11:14:59 -0600

libvirt (0.7.2-4ubuntu1) lucid; urgency=low

  * Merge from debian testing. Remaining changes:
    - debian/control:
      + Don't build-depend on QEmu
      + Bump bridge-utils, dnsmasq-base, netcat-openbsd, and iptables
        to Depends of libvirt-bin
      + Recommends qemu-kvm (>= 0.11.0-0ubuntu6)
      + Add versioned Conflicts/Replaces to libvirt0 for libvirt0-dbg,
        since we used to ship them as such
      + We call libxen-dev libxen3-dev, so change all references
      + Build-Depends on libxml2-utils
      + Build-Depends on open-iscsi-utils instead of open-iscsi due to
        LP: #414986
    - debian/postinst:
      + rename the libvirt group to libvirtd
      + add each admin user to the libvirtd group
    - debian/libvirt-bin.postrm: rename the libvirt group to libvirtd
    - debian/rules: add DEB_MAKE_CHECK_TARGET := check
    - debian/patches/900[0-7]: updated/refreshed for new paths in 0.7.2
    - debian/patches/series: don't apply 0002-qemu-disable-network.diff.patch
    - AppArmor integration:
      + debian/control: Build-Depends on libapparmor-dev and Suggests
        apparmor (>= 2.3+1289-0ubuntu14)
      + debian/libvirt-bin.dirs: add /etc/apparmor.d/abstractions,
        /etc/apparmor.d/force-complain, /etc/apparmor.d/libvirt,
        /etc/cron.daily and /usr/share/apport/package-hooks
      + add debian/libvirt-bin.cron.daily (LP: #438165)
      + add debian/libvirt-bin.apport
      + debian/libvirt-bin.install: install apparmor profiles, abstractions
        and apport hook
      + debian/postinst: reload apparmor profiles
      + debian/libvirt-bin.postrm: remove apparmor symlinks on purge
      + debian/libvirt-bin.preinst: added to force complain on certain
        upgrades
      + debian/README.Debian: add AppArmor section based on the upstream
        documentation
      + debian/rules: use --with-apparmor and copy apparmor and apport hook to
        debian/tmp
    - Dropped the following patches now included upstream:
      + 0005-Close-logfile-fd-after-spawning-qemu.patch
      + 9090-reenable-nonfile-labels.patch
      + 9091-apparmor.patch
      + 9092-apparmor-autoreconf.patch
  * AppArmor integration updates:
    - debian/apparmor/usr.sbin.libvirtd: allow libvirtd access to
      /usr/lib/libvirt/* (LP: #480478)
    - debian/apparmor/libvirt-qemu: allow guests access to
      /etc/pki/libvirt-vnc/** (LP: #484562)
    - debian/libvirt-bin.postinst: 0.7.2 moved /usr/bin/virt-aa-helper to
      /usr/lib/libvirt, so the profile changed from usr.bin.virt-aa-helper
      to usr.lib.libvirt.virt-aa-helper and needs to be migrated. If the user
      made no changes to the old profile, remove it, otherwise, update the
      paths, preserving the shipped usr.lib.libvirt.virt-aa-helper
    - update to 0.7.4 version of the sVirt AppArmor driver (can be dropped in
      0.7.4):
      + debian/patches/9008-apparmor-caps-mockup.patch
      + debian/patches/9009-apparmor-lp453335.patch
      + debian/patches/9010-apparmor-lp460271.patch
      + debian/patches/9011-apparmor-code-cleanups.patch
    - add virt-aa-helper-test and examples/apparmor that were omitted from the
      upstream tarball (can be dropped in 0.7.5):
      + debian/patches/9012-apparmor-add-virt-aa-helper-test.patch
      + debian/patches/9013-apparmor-examples.patch
      + debian/rules: add post-patches target to make virt-aa-helper-test
        executable
  * debian/patches/0005-Fix-SELinux-linking-issues.patch: updated to work
    when both apparmor and selinux are available. This patch should be
    dropped in 0.7.4.
  * debian/patches/9007-default-config-test-case.patch: updated to not fail
    if building in a deep directory
  * debian/patches/9014-event-fuzz.patch: add a little fuzz to not be quite
    so precise with expected expiry time. Fixes FTBFS with HZ=100 kernels.
    Can be dropped in 0.7.5.
  * debian/patches/9015-hal-startup-failure-is-nonfatal.patch: disable hal
    driver if hald is not running instead of dying. Can be dropped in
    0.7.4.
  * debian/control: temporarily remove Build-Depends on libcap-ng-dev, which
    isn't available in Ubuntu main yet
  * revert change to new source format 3.0 (quilt) since Launchpad can't
    handle it yet (see LP: #293106)

 -- Jamie Strandboge <jamie@ubuntu.com>  Wed, 02 Dec 2009 09:22:21 -0600

libvirt (0.7.2-4) unstable; urgency=low

  * [213ca47] switch to new source format 3.0 (quilt)
  * [f5a10e9] Depend on hal (Closes: #556730)
  * [7d1422d] Drop build-dep on libpolkit-dbus-dev (Closes: #549500)
  * [95ad85c] Depend on libcap-ng-dev for lxc driver.

 -- Guido Günther <agx@sigxcpu.org>  Wed, 25 Nov 2009 20:39:17 +0100

libvirt (0.7.2-3) unstable; urgency=low

  * [2c0aa82] Fix qemu:///session Backported from upsgtream's
    79218cdd9887b132eb0f29fe2048f89e90beae1 (Closes: #554869)

 -- Guido Günther <agx@sigxcpu.org>  Sat, 07 Nov 2009 12:50:54 +0100

libvirt (0.7.2-2) unstable; urgency=low

  [ Laurent Léonard ]
  * [a9ea205] Change requirement of libvirt-bin in libvirt- suspendonreboot.
  * [a4db804] Update debian/patches/0006-Don-t-let-parent-of-daemon-
    exit-until-basic-initiali.patch. Fix use of an uninitialized variable that
    was causing a bug on i386 systems.
  * [59e1e53] Redo patches.

  [ Guido Günther ]
  * upload to unstable
  * [43f106a] Only remove masquerade roles for VIR_NETWORK_FORWARD_NAT
    (Closes: #549949) - thanks to Rob S. Wolfram for testing

 -- Guido Günther <agx@sigxcpu.org>  Thu, 05 Nov 2009 20:44:21 +0100

libvirt (0.7.2-1) experimental; urgency=low

  [ Laurent Léonard ]
  * [51a4814] Imported Upstream version 0.7.2
  * [12268f6] Update patches.
  * [175d497] Fix SELinux linking issues. Pulled from upstream
    309acaa0230494b8ec08d03375c10238cb2daf55.
  * [5cfdaf8] Update libvirt-doc docs.
  * [dc2059f] Update libvirt-bin manpages.
  * [a62a4a7] Update libvirt-bin examples.
  * [9e38cbc] Update libvirt0 symbols.
  * [412b12f] Make init.d script provide itself.
  * [35451bf] Update debian/rules to support new example files.
  * [43b7dac] Don't let parent of daemon exit until basic initialization is
    done.
  * [5a37e69] Make init.d provide libvirtd for backward compatibility.

 -- Guido Günther <agx@sigxcpu.org>  Mon, 26 Oct 2009 20:14:23 +0100

libvirt (0.7.1-2) unstable; urgency=low

  * [f5299d3] document changes and release 0.7.1-1
  * [f137c00] Allow for older versions of dpkg-dev to ease backports.
  * [74f5832] Use Policykit 1.0 (Closes: #549500)

 -- Guido Günther <agx@sigxcpu.org>  Fri, 09 Oct 2009 20:32:02 +0200

libvirt (0.7.1-1) unstable; urgency=low

  [ Laurent Léonard ]
  * [40fb620] Bump Debhelper version to 7.
  * [e0e89f2] Bump Standards-Version to 3.8.3.
  * [50a862f] Clean debian/rules.
  * [e9c9906] Change build dependency on libreadline5-dev to
    libreadline-dev.
  * [b6cb738] Imported Upstream version 0.7.1
  * [780f6a7] Redo patches.
  * [3d66f37] Update libvirt-bin examples.
  * [c01ed84] Update libvirt0 symbols.

 -- Guido Günther <agx@sigxcpu.org>  Sat, 26 Sep 2009 17:15:02 +0200

libvirt (0.7.0-1ubuntu15) lucid; urgency=low

  * Run test suite at build time.
  * Add libxml2-utils dependency. Needed by the test suite.
  * Remove "Connecting to uri: " notice from virsh. It breaks the test
    suite, the information is readily available with the "uri" command
    inside virsh, and it's a usability delta with upstream, so
    constantly causes confusion.

 -- Soren Hansen <soren@ubuntu.com>  Fri, 27 Nov 2009 11:21:53 +0100

libvirt (0.7.0-1ubuntu14) lucid; urgency=low

  * debian/patches/9093-lp460271.patch: require absolute path for dynamic
    added files (LP: #460271)
  * debian/patches/9094-lp453335.patch: suppress confusing and misleading
    apparmor denied message when kvm/qemu tries to open a libvirt specified
    readonly file (such as a cdrom) with write permissions. libvirt uses the
    readonly attribute for the security driver only, and has no way of telling
    kvm/qemu that the device should be opened readonly. (LP: #453335)
  * debian/apparmor/usr.sbin.libvirtd: allow 'inet dgram' for migration to
    work (LP: #461528)
  * debian/apparmor/usr.sbin.libvirtd: properly support qemu+tcp:// by
    allowing 'inet6 stream' and 'inet6 dgram' (LP: #462000)

 -- Jamie Strandboge <jamie@ubuntu.com>  Mon, 09 Nov 2009 17:11:05 -0600

libvirt (0.7.0-1ubuntu13) karmic; urgency=low

  * allow save/restore to work in $HOME. This is a workaround until upstream
    https://bugzilla.redhat.com/show_bug.cgi?id=529363 is fixed. (LP: #457716)
  * debian/libvirt-bin.cron.daily: don't comlain if no domain XML definitions
    or domain AppArmor profiles. Based on work by Loïc Minier. (LP: #457607)

 -- Jamie Strandboge <jamie@ubuntu.com>  Fri, 23 Oct 2009 03:52:33 -0500

libvirt (0.7.0-1ubuntu12) karmic; urgency=low

  * debian/apparmor/libvirt-qemu: a couple more fixes for pulseaudio
    LP: #453329

 -- Jamie Strandboge <jamie@ubuntu.com>  Fri, 16 Oct 2009 17:06:15 -0500

libvirt (0.7.0-1ubuntu11) karmic; urgency=low

  * debian/patches/9091-apparmor.patch:
    - src/virt-aa-helper.c: update to parse XML for guest's architecture and
      os.type rather than just trying to make something up.
    - tests/virt-aa-helper-test: add some tests for the above and fix another
      test
    - LP: #448671

 -- Jamie Strandboge <jamie@ubuntu.com>  Wed, 14 Oct 2009 14:55:20 -0500

libvirt (0.7.0-1ubuntu10) karmic; urgency=low

  * debian/patches/0005-Close-logfile-fd-after-spawning-qemu.patch: fix
    egregious file descriptor leak with cherry-pick from upstream git,
    LP: #438815

 -- Dustin Kirkland <kirkland@ubuntu.com>  Tue, 06 Oct 2009 18:57:22 -0500

libvirt (0.7.0-1ubuntu9) karmic; urgency=low

  * allow access for sound (LP: #437854)
    - abstractions/libvirt-qemu: add very specific rules for allowing ALSA. We
      do not use the audio abstraction because the virtual machine runs as root
      and therefore DAC cannot be used as a fallback.
    - debian/README.Debian: add some text to encourage review of the AppArmor
      profiles and abstraction when using in production environments
  * debian/libvirt-bin.cron.daily: added to clean out old profiles that are no
    longer associated with a virtual machine definition (LP: #438165)
  * debian/patches/9091-apparmor.patch:
    - quote the pid, monitor and logfile in case any of them have weird
      characters (complete fix for LP: #432810)
    - support <readonly/> for disks

 -- Jamie Strandboge <jamie@ubuntu.com>  Mon, 05 Oct 2009 16:31:12 -0500

libvirt (0.7.0-1ubuntu8) karmic; urgency=low

  * debian/patches/9091-apparmor.patch: sync with upstream for maintenance,
    licensing compliance with upstream and bug fixes:
    - handle files with spaces in the name (LP: #432810)
    - add serial, console, kernel and initrd support (LP: #432581)
    - allow read only access to /boot, /vmlinuz and /initrd.img
    - allow access to character devices (eg USB devices)
    - have virt-aa-helper accept XML on stdin, which allows for adding
      other devices in the future and helps ensure we always have the most
      up to date definition
    - update profile on attach and detach of devices (LP: #435527)
    - add --dryrun option to virt-aa-helper, and greatly improve the
      virt-aa-helper-test script
  * revert workaround for LP: #431090 now that kernel, initrd, et al is
    properly supported
  * debian/apparmor/usr.sbin.libvirtd: add various capabilities
    recommended by upstream to prevent potential regressions

 -- Jamie Strandboge <jamie@ubuntu.com>  Tue, 22 Sep 2009 20:04:58 -0500

libvirt (0.7.0-1ubuntu7) karmic; urgency=low

  * debian/apparmor/libvirt-qemu: add chown capability (LP: #434417)

 -- Jamie Strandboge <jamie@ubuntu.com>  Tue, 22 Sep 2009 08:03:21 -0500

libvirt (0.7.0-1ubuntu6) karmic; urgency=low

  * debian/apparmor/libvirt-qemu: workaround eucalyptus serial console,
    kernel and initrd location. This should be removed after virt-aa-helper is
    able to get these from XML. (LP: #431090)

 -- Jamie Strandboge <jamie@ubuntu.com>  Thu, 17 Sep 2009 11:35:42 -0500

libvirt (0.7.0-1ubuntu5) karmic; urgency=low

  * debian/apparmor/usr.sbin.libvirtd: switch to enforcing by default. Please
    note that this was only in complain mode temporarily to work around kernel
    bugs in the 2.6.31-9 kernel. Confinement of virtual machines (controlled
    by /etc/apparmor.d/libvirt/TEMPLATE) was already in enforcing mode.
    (LP: #427338)
  * debian/README.Debian: update AppArmor section based on the upstream
    documentation

 -- Jamie Strandboge <jamie@ubuntu.com>  Thu, 10 Sep 2009 08:05:45 -0500

libvirt (0.7.0-1ubuntu4) karmic; urgency=low

  * debian/libvirt-bin.postinst: add each admin user to libvirtd,
    LP: #410226; note that this is only a partial fix, as admin users
    added after libvirt's install will need to be individually added
    to libvirtd; however, this should fix a huge number of
    single-admin-user-in-default-Ubuntu-system annoyances
  * debian/control: bump standards version

 -- Dustin Kirkland <kirkland@ubuntu.com>  Tue, 08 Sep 2009 17:56:52 -0500

libvirt (0.7.0-1ubuntu3) karmic; urgency=low

  * debian/apparmor/libvirt-qemu: allow access to /dev/kqemu
  * debian/apparmor/usr.bin.virt-aa-helper: use @{PROC} instead of /proc

 -- Jamie Strandboge <jamie@ubuntu.com>  Wed, 26 Aug 2009 12:19:24 -0500

libvirt (0.7.0-1ubuntu2) karmic; urgency=low

  * Add AppArmor support (LP: #388422):
    - debian/patches/9090-reenable-nonfile-labels.patch: add back in
      virDomainObjPtr argument to RestoreSecurityImageLabel since AppArmor
      labels are not stored on disk
    - debian/patches/9091-apparmor.patch: add AppArmor security driver
    - debian/patches/9092-apparmor-autoreconf.patch: after installing libtool
      and the build dependencies, run autoreconf to pull in changes to
      Makefile.am and configure.in in 9091-apparmor.patch
    - debian/rules: use --with-apparmor and copy debian/apparmor/* to
      debian/tmp
    - debian/control: Build-Depends on libapparmor-dev and Suggests apparmor
      >= 2.3+1289-0ubuntu14
    - add profiles and abstractions to debian/apparmor. usr.sbin.libvirtd will
      default to complain mode until LP: #401931 is sorted out
    - debian/libvirt-bin.dirs: add /etc/apparmor.d/libvirt,
      /etc/apparmor.d/abstractions, and /etc/apparmor.d/force-complain
    - debian/libvirt-bin.install: install profiles and abstractions
    - debian/libvirt-bin.preinst: newly added to force complain on certian
      upgrades
    - debian/libvirt-bin.postinst: (re)load profile
    - debian/libvirt-bin.postrm: remove force-complain profile on purge
  * 9006-increase-unix-socket-timeout.patch:
    increase timeout waiting for unix socket in src/qemu_driver.c, set to 30
    seconds, which 10x longer than before, and matches the logoutput timeout
    adjustment in 9003-increase-logoutput-timeout.patch. This is needed with
    the new qemudOpenMonitorUnix() function introduced in 0.7.0.
  * add apport hook:
    - add debian/libvirt-bin.apport
    - debian/libvirt-bin.dirs: add /usr/share/apport/package-hooks
    - debian/libvirt-bin.install: add source_libvirt-bin.py
    - debian/rules: install libvirt-bin.apport

 -- Jamie Strandboge <jamie@ubuntu.com>  Tue, 25 Aug 2009 11:51:42 -0500

libvirt (0.7.0-1ubuntu1) karmic; urgency=low

  * Merge from debian experimental, remaining changes:
    - debian/control:
      + Don't build-depend on QEmu.
      + Bump bridge-utils, dnsmasq-base, netcat-openbsd, and iptables
        to Depends of libvirt-bin.
      + Add versioned Conflicts/Replaces to libvirt0 for libvirt0-dbg,
        since we used to ship them as such.
      + We call libxen-dev libxen3-dev, so change all references.
      + Build-Depends on open-iscsi-utils instead of open-iscsi due to
        LP: #414986
    - 9000-delayed_iff_up_bridge.patch:
      Don't try to bring up the bridge before at least one interface has been
      added to it.
    - 9001-dont_clobber_existing_bridges.patch:
      Assign the name of the virtual bridge dynamically to avoid interfering
      with existing bridges.
    - 9002-better_default_uri_virsh.patch:
      Default to qemu:///system if the user has write access to the libvirt
      socket, otherwise qemu:///session.
    - 9003-increase-logoutput-timeout.patch:
      increase timeout waiting for log output in src/qemu_driver.c, set to 30
      seconds, which 10x longer than before, and matches the disk-wait in
      mdadm. (LP #344400)
    - 9004-better-default-arch.patch:
      If a domain does not specify its architecture, attempt to match the host.
      (LP #344913)
    - 9005-libvirtd-group-name.patch:
      Rename libvirt group to libvirtd.
    - rename the libvirt group to libvirtd in postinst/postrm
  * Dropped the following patches from debian/patches (they don't apply any
    more were not applied in 0.6.4-1ubuntu2):
    - dynamic_bridge_names.patch
    - event-loop-hang.diff
    - more-flexible-emulator-on-x86.patch
    - xen-events-handling-fix.diff

 -- Jamie Strandboge <jamie@ubuntu.com>  Thu, 13 Aug 2009 20:24:24 -0500

libvirt (0.7.0-1) experimental; urgency=low

  [ Laurent Léonard ]
  * [4fb1a38] Imported Upstream version 0.7.0
  * [5578fd3] Drop 0005-Fix-PCI-device-hotplug-unplug-with-newer-
    QEMU.patch. Fixed upstream.
  * [9a8afd0] Redo patches.
  * [937ab63] Update symbols.
  * [b4bd1ea] Update section in doc-base control file.

 -- Guido Günther <agx@sigxcpu.org>  Sun, 09 Aug 2009 13:35:42 +0200

libvirt (0.6.5-3) unstable; urgency=low

  * [72a8eb6] Add a versioned dependency on dpkg-dev (Closes: #537316)
  * [ae20998] fix Debian Xen path patch to also cover the testsuite
  * [b2a1c47] New patch 0001-Fix-PCI-device-hotplug-unplug-with-newer-
    QEMU.patch pulled from upstream 326ecb7. Fixes PCI hotplug with
    newer kvm.

 -- Guido Günther <agx@sigxcpu.org>  Wed, 29 Jul 2009 12:17:52 +0200

libvirt (0.6.5-2) unstable; urgency=low

  * [45b9fdf] build-conflict on dpkg-dev (= 1.15.3) (Closes: #536673)

 -- Guido Günther <agx@sigxcpu.org>  Sun, 12 Jul 2009 15:03:08 +0200

libvirt (0.6.5-1) unstable; urgency=low

  [ Guido Günther ]
  * [05e9a39] build-depend on policykit so polkit auth works with virsh
    as well

  [ C.J. Adams-Collier ]
  * [a161c5f] allow to qemu to emulate arm

  [ Guido Günther ]
  * [b1e4c4b] Imported Upstream version 0.6.5
  * [e764583] change private symbols to 0.6.5
  * [f94fb48] drop 0005-allow-to-qemu-to-emulate-arm.patch fixed upstream.
  * [7ad7896] bump standards version
  * [e2c5867] tighten libvirt-bin's dependency on libvirt0 since libvirtd uses
    private symbols

 -- Guido Günther <agx@sigxcpu.org>  Sun, 05 Jul 2009 13:07:53 +0200

libvirt (0.6.4-1ubuntu2) karmic; urgency=low

  * Also rename the libvirt group to libvirtd in postinst/postrm.
    (LP: #392696)

 -- Soren Hansen <soren@ubuntu.com>  Fri, 26 Jun 2009 22:49:45 +0200

libvirt (0.6.4-1ubuntu1) karmic; urgency=low

  * Merge from debian unstable, remaining changes:
    - debian/control:
      + Don't build-depend on QEmu.
      + Add "XS-Debian-" prefix to Debian's Vcs headers.
      + Bump bridge-utils, dnsmasq-base, netcat-openbsd, and iptables
        to Depends of libvirt-bin.
      + s/interract/interact/g
      + Add versioned Conflicts/Replaces to libvirt0 for libvirt0-dbg,
        since we used to ship them as such.
    - 9000-delayed_iff_up_bridge.patch:
      Don't try to bring up the bridge before at least one interface has been
      added to it.
    - 9001-dont_clobber_existing_bridges.patch
      Assign the name of the virtual bridge dynamically to avoid interfering
      with existing bridges.
    - 9002-better_default_uri_virsh.patch:
      Default to qemu:///system if the user has write access to the libvirt
      socket, otherwise qemu:///session.
    - 9003-increase-logoutput-timeout.patch:
      increase timeout waiting for log output in src/qemu_driver.c, set to 30
      seconds, which 10x longer than before, and matches the disk-wait in
      mdadm. (LP #344400)
    - 9004-better-default-arch.patch:
      If a domain does not specify its architecture, attempt to match the host.
      (LP #344913)
    - 9005-libvirtd-group-name.patch:
      Rename libvirt group to libvirtd.
    - We call libxen-dev libxen3-dev, so change all references.

 -- Soren Hansen <soren@ubuntu.com>  Mon, 22 Jun 2009 11:14:57 +0200

libvirt (0.6.4-1) unstable; urgency=low

  * [dd3adb2] Imported Upstream version 0.6.4
  * [2320162] update symbols file
  * [89c9720] remove bashism (Closes: #530122)
  * [30d86c1] drop patches fixed upstream:
        0005-don-t-crash-with-def-NULL.patch
        0006-Fix-QEMU-ARGV-detection-with-kvm-85.patch
        0007-Declare-support-for-QEMU-migration-in-capabilities.patch

 -- Guido Günther <agx@sigxcpu.org>  Thu, 04 Jun 2009 12:50:01 +0200

libvirt (0.6.3-4) unstable; urgency=low

  * [3607f2f] Install libvirt_lxc that got list somewhere between our
              testbuilds. (Closes: #529578)
  * [070ddd5] install augeas lense
  * [c9b034d] install schema files

 -- Guido Günther <agx@sigxcpu.org>  Wed, 20 May 2009 14:33:18 +0200

libvirt (0.6.3-3) unstable; urgency=low

  * [4087b7d] disable lxc on ia64 to work around FTBFS until we have
              access to a test machine
  * [df5f5a0] pull some kvm/qemu related patches from upstream
              (Closes: #529324)

 -- Guido Günther <agx@sigxcpu.org>  Tue, 19 May 2009 19:14:57 +0200

libvirt (0.6.3-2) unstable; urgency=low

  * [35898d3] fix crash when libvirt_lxc is called without arguments
  * [449ca60] enable lxc support (Closes: #526718) - thanks to Daniel
              Pittman for testing this
  * [335a4e6] update description with supported virtualization solutions
  * [92eba47] delay libvirt-bin start until after avahi
  * [8ebd17d] update startup priorities due to changed libvirt-bin
               startup priority. Also add an LSB header. (Closes: #526944)

 -- Guido Günther <agx@sigxcpu.org>  Thu, 07 May 2009 13:28:40 +0200

libvirt (0.6.3-1) unstable; urgency=low

  * [0cb2f83] Imported Upstream version 0.6.3
        * virtual box support
  * [06fe518] 0001-remove-RHism.diff.patch: use invoke-rc.d
  * [ec2fd52] drop patches merged upstream:
        * 0003-allow-libvirt-group-to-access-the-socket.patch  series
        * 0004-fix-Debian-specific-path-to-hvm-loader.patch
  * [6977bde] enable vbox support
  * [93c4423] add symbols file

 -- Guido Günther <agx@sigxcpu.org>  Sun, 03 May 2009 23:33:28 +0200

libvirt (0.6.2-2) unstable; urgency=low

  * [031b9c1] Don't hardcode buffer size for getgrnam_r. Works around
              #520744 and fixes possible problems with implementations having
              _SC_GETGR_R_SIZE_MAX != 1024.
  * [bbe7743] respect log priority for qemu domain logs (Closes: #524145)
  * [a2e4cb0] don't rely on log_end_msg returning 0 this isn't the case
              with splashy. (Closes: #523712)
  * [ddfafda] move debug package into section debug

 -- Guido Günther <agx@sigxcpu.org>  Thu, 16 Apr 2009 15:28:31 +0200

libvirt (0.6.2-1) unstable; urgency=low

  * [99fd06c] Imported Upstream version 0.6.2 (Closes: #521785)
  * [78cd5c8] drop /var/run/libvirt created by init script
  * [2a7cb3b] move startup of libvirtd after hal (Closes: #522310)
  * [b8707ed] bump standards version 0.8.1 (no changes necessary)

 -- Guido Günther <agx@sigxcpu.org>  Thu, 09 Apr 2009 22:48:57 +0200

libvirt (0.6.1-1) unstable; urgency=low

  * [3be7341] Imported Upstream version 0.6.1
  * [38fde15] rediff Debian specific patches
  * [9b59a19] drop patches applied upstream:
        * 0004-Don-t-hardcode-ssh-port.patch
        * 0005-minimal-workaround-for-qemu-startup-race.patch
  * [95d4b7f] drop patches backported from upstream
        * 0009-libvirt_proxy-Fix-use-of-uninitalized-memory.patch
  * [8171d83] build-dep on module-init-tools so configure can figure out
    the path to modprobe

 -- Guido Günther <agx@sigxcpu.org>  Thu, 05 Mar 2009 13:58:41 +0100

libvirt (0.6.1-0ubuntu5) jaunty; urgency=low

  * Fix logic error when applying %d bridge name rewriting. (LP: #350780)

 -- Soren Hansen <soren@ubuntu.com>  Thu, 16 Apr 2009 20:48:49 +0200

libvirt (0.6.1-0ubuntu4) jaunty; urgency=low

  [ Marc Deslauriers <marc.deslauriers@ubuntu.com> ]
  * 0008-increase-logoutput-timeout.patch: increase timeout waiting
    for log output in src/qemu_driver.c, set to 30 seconds, which 10x
    longer than before, and matches the disk-wait in mdadm, LP: #344400

 -- Dustin Kirkland <kirkland@ubuntu.com>  Fri, 27 Mar 2009 10:57:53 -0500

libvirt (0.6.1-0ubuntu3) jaunty; urgency=low

  * Fix "libvirt's defaults are slightly less than sane" (LP: #344913)
    - more-flexible-emulator-on-x86.patch (from upstream)
    - default-arch.patch

 -- Soren Hansen <soren@ubuntu.com>  Thu, 19 Mar 2009 00:23:14 +0100

libvirt (0.6.1-0ubuntu2) jaunty; urgency=low

  * Add fix for event loop hang (LP: #344195)
    http://article.gmane.org/gmane.comp.emulators.libvirt/12437
  * Add fix for Xen events handling.
    http://git.et.redhat.com/?p=libvirt.git;a=commit;h=124cfcbc2bcd1b71b51e720b9bfc7d8e69e8af89 

 -- Soren Hansen <soren@ubuntu.com>  Fri, 13 Mar 2009 16:51:33 +0100

libvirt (0.6.1-0ubuntu1) jaunty; urgency=low

  * New upstream release. (FFe: LP: #339868)
  * Dropped 0004-Don-t-hardcode-ssh-port.patch: Included upstream.
  * Rewrote dynamic_bridge_names.patch to work with refactored upstream
    bridging code.

 -- Soren Hansen <soren@ubuntu.com>  Mon, 09 Mar 2009 11:18:01 +0100

libvirt (0.6.0-1ubuntu3) jaunty; urgency=low

  * No change rebuild for python2.6.

 -- Matthias Klose <doko@ubuntu.com>  Wed, 25 Feb 2009 12:17:13 +0000

libvirt (0.6.0-1ubuntu2) jaunty; urgency=low

  * Accidentally dropped our changes to
    0003-allow-libvirt-group-to-access-the-socket.patch, causing the
    group as which libvirtd expected to run to be wrong. Change it back
    to "libvirtd" rather than "libvirt". (LP: #328093)

 -- Soren Hansen <soren@ubuntu.com>  Wed, 11 Feb 2009 16:10:28 +0100

libvirt (0.6.0-1ubuntu1) jaunty; urgency=low

  * Merge with Debian experimental. Remaining changes:
    - debian/control:
      + Don't build-depend on QEmu.
      + Add "XS-Debian-" prefix to Debian's Vcs headers.
      + Bump bridge-utils, dnsmasq-base, netcat-openbsd, and iptables
        to Depends of libvirt-bin.
      + s/interract/interact/g
      + Add versioned Conflicts/Replaces to libvirt0 for libvirt0-dbg,
        since we used to ship them as such.
    - Rename libvirt group to libvirtd.
    - 0005-delayed_iff_up_bridge.patch: Don't try to bring up the bridge
      before at least one interface has been added to it.
    - dont_clobber_existing_bridges.patch: Assign the name of the virtual
      bridge dynamically to avoid interfering with existing bridges.
    - better_default_uri_virsh.patch: Default to qemu:///system if the
      user has write access to the libvirt socket, otherwise
      qemu:///session.
    - We call libxen-dev libxen3-dev, so change all references.
    - Included (but did not enable) opennebula patch (since it's not in
      main yet).

 -- Soren Hansen <soren@ubuntu.com>  Wed, 11 Feb 2009 01:01:42 +0100

libvirt (0.6.0-1) experimental; urgency=low

  * [30be86d] Imported Upstream version 0.6.0
  * [179781c] drop patches
          * fixed upstream:
                0006-Fix-missing-read-only-access-checks-CVE-2008-5086.patch
          * applied upstream:
                0004-Open-qemu-monitor-log-O_APPEND-instead-of-O_TRUNC.patch
                0005-qemu-fix-parallel-serial-mode-tcp-and-unix.patch
                0007-don-t-fail-on-missing-locales.patch
  * [d80a176] adjust remaining patches to new upstream version
  * [208c924] add minimal workaround for qemu startup race
  * [6e8caa0] restart libvirt daemon on upgrades if possible
    (Closes: #492694, #499008)

 -- Guido Günther <agx@sigxcpu.org>  Thu, 05 Feb 2009 18:40:10 +0100

libvirt (0.5.1-7) unstable; urgency=low

  * [1238706] Recommend dnsmasq-base instead of dnsmasq this keeps us
    out of all the dnsmasq already running troubles. (Closes: #516443) -
    thanks to Bin Zhang for the suggestion and the doc update
  * [5c9dfd7] don't rotate empty logfiles (Closes: #517040)
  * [1c9a023] libvirt_proxy: Fix use of uninitalized memory We currently
    don't build this code (CVE-2009-0036).
  * [4ea1ea9] fix path to hvmloader (Closes: #517059)
  * [879b632] suggest devhelp
  * [f22f1ef] add ${misc:Depends}
  * [c6f579e] README.Debian: fix typo

 -- Guido Günther <agx@sigxcpu.org>  Thu, 26 Feb 2009 14:45:32 +0100

libvirt (0.5.1-6) unstable; urgency=low

  * upload to unstable

 -- Guido Günther <agx@sigxcpu.org>  Mon, 16 Feb 2009 21:27:21 +0100

libvirt (0.5.1-5) experimental; urgency=low

  * [d4a69d1] don't fail on missing locales (Closes: #512721)
  * [cecac4c] don't hardcode ssh port - based on a patch by Adrian
    Bridgett. (Closes: #513605)
  * [4565a65] drop superflous headers and footers from remaining patches

 -- Guido Günther <agx@sigxcpu.org>  Fri, 30 Jan 2009 23:06:29 +0100

libvirt (0.5.1-4ubuntu1) jaunty; urgency=low

  * Merge with Debian experimental.
    - debian/control:
      + Don't build-depend on QEmu.
      + Add "XS-Debian-" prefix to Debian's Vcs headers.
      + Bump bridge-utils, dnsmasq-base, netcat-openbsd, and iptables
        to Depends of libvirt-bin.
      + s/interract/interact/g
      + Add versioned Conflicts/Replaces to libvirt0 for libvirt0-dbg,
        since we used to ship them as such.
    - Rename libvirt group to libvirtd.
    - 0005-delayed_iff_up_bridge.patch: Don't try to bring up the bridge
      before at least one interface has been added to it.
    - dont_clobber_existing_bridges.patch: Assign the name of the virtual
      bridge dynamically to avoid interfering with existing bridges.
    - better_default_uri_virsh.patch: Default to qemu:///system if the
      user has write access to the libvirt socket, otherwise
      qemu:///session.
    - We call libxen-dev libxen3-dev, so change all references.
  * Included (but did not enable) opennebula patch (since it's not in
    the archive yet).

 -- Soren Hansen <soren@ubuntu.com>  Thu, 08 Jan 2009 23:01:16 +0100

libvirt (0.5.1-4) experimental; urgency=low

  * [2fd5224] apply upstream patch for CVE-2008-5086 (Closes: #509106)

 -- Guido Günther <agx@sigxcpu.org>  Thu, 18 Dec 2008 16:12:00 +0100

libvirt (0.5.1-3) experimental; urgency=low

  * [d30438c] create libvirt log directory (Closes: #508129)
  * [417a23c] qemu: fix parallel/serial mode "tcp" and "unix"
    (Closes: #507608)

 -- Guido Günther <agx@sigxcpu.org>  Thu, 11 Dec 2008 12:38:01 +0100

libvirt (0.5.1-2) experimental; urgency=low

  * [4cd547b] create /var/run/libvirt (Closes: #507578)
  * [fe96870] merge back master
  * [d46313f] drop patches for issues fixed upstream
     - 0007-also-look-for-usr-bin-kvm.patch
     - 0008-Increase-initial-qemu-monitor-read-timeout.patch
     - 0009-Open-qemu-monitor-log-O_APPEND-instead-of-O_TRUNC.patch
     - 0010-raise-error-on-invalid-volume-format.patch

 -- Guido Günther <agx@sigxcpu.org>  Sat, 06 Dec 2008 10:37:12 +0100

libvirt (0.5.1-1) experimental; urgency=low

  * [d76b3a1] Imported Upstream version 0.5.1 (Closes: #507677, #507547)
  * [2e550ae] enable hal for device enumeration
  * [0d9116a] rotate qemu monitor logs (Closes: #507553) - thanks to
    Harald Staub
  * [5f85e66] depend on logrotate
  * [6e955a3] open qemu monitor O_APPEND instead of O_TRUNC for logrotate
  * [7dbea84] drop 0004-xen-prefer-xenstoraged-driver-for-
    listDomains.patch - applied upstream

 -- Guido Günther <agx@sigxcpu.org>  Fri, 05 Dec 2008 09:36:54 +0100

libvirt (0.5.0-1) experimental; urgency=low

  * [717ef21] Imported Upstream version 0.5.0
  * [b7a1fbd] enable OpenVZ support (Closes: #504597) - thanks to Pierre
    Chifflier for the patch
  * [ee3590a] drop patches, fixed upstream:
        * 0004-support-virtio-and-scsi-disks-in-qemudDomainBlockSta.patch
        * 0005-fix-define-vs.-defined-typos.patch
  * [f4f601f] bump shlibs to 0.5.0

 -- Guido Günther <agx@sigxcpu.org>  Fri, 28 Nov 2008 16:40:38 +0100

libvirt (0.4.6-10) unstable; urgency=low

  * [5878698] cherry-pick patch for CVE-2008-5086 from experimental

 -- Guido Günther <agx@sigxcpu.org>  Thu, 18 Dec 2008 16:59:45 +0100

libvirt (0.4.6-9) unstable; urgency=low

  * [d30438c] create libvirt log directory (Closes: #508129)

 -- Guido Günther <agx@sigxcpu.org>  Mon, 08 Dec 2008 10:12:28 +0100

libvirt (0.4.6-8) unstable; urgency=low

  * [e771da9] drop superflous 0011-Fix-segfault-on-missing-volume-
    format.patch - not needed.

 -- Guido Günther <agx@sigxcpu.org>  Fri, 05 Dec 2008 10:17:01 +0100

libvirt (0.4.6-7) unstable; urgency=low

  * [ea12bd9] create /var/run/libvirt fixes /var/run on tmpfs
    (Closes: #507578)
  * [97e5706] also look for /usr/bin/kvm (Closes: #507547)
  * [311b4c1] increase initial qemu monitor read timeout
    (Closes: #499720)
  * [fbe4e00] open qemu monitor log O_APPEND instead of O_TRUNC
  * [f8ce017] raise error on invalid volume format
  * [40edcf8] rotate qemu monitor logs (Closes: #507553) - thanks to
    Harald Staub
  * [46ea43a] fix segfault on missing volume format (Closes: #507677) -
    thanks to Daniel Veillard
  * [ee377f3] bump shlibs version to 0.4.6
  * [504d55d] depend on logrotate

 -- Guido Günther <agx@sigxcpu.org>  Thu, 04 Dec 2008 17:50:45 +0100

libvirt (0.4.6-6) unstable; urgency=low

  * [ff8e9ae] README.Debian: clarify xen configuration
  * [c07c68f] prefer xenstoraged driver for listDomains - avoids seeing "ghost
    domains" due to bugs in several versions of the xen HV

 -- Guido Günther <agx@sigxcpu.org>  Thu, 27 Nov 2008 18:06:48 +0100

libvirt (0.4.6-5ubuntu2) jaunty; urgency=low

  * SECURITY UPDATE: fix privilege escalation due to missing read only
    connection checks
    - debian/patches/0009-CVE-2008-5086.patch: update functions in
      src/libvirt.c to check against VIR_CONNECT_RO and return with operation
      denied error
    - CVE-2008-5086

 -- Jamie Strandboge <jamie@ubuntu.com>  Tue, 16 Dec 2008 10:47:09 -0600

libvirt (0.4.6-5ubuntu1) jaunty; urgency=low

  * Merge from debian unstable, remaining changes:
    - debian/control:
      + Don't build-depend on QEmu.
      + Add "XS-Debian-" prefix to Debian's Vcs headers.
      + Bump bridge-utils, dnsmasq-base, netcat-openbsd, and iptables to Depends
        of libvirt-bin.
      + s/interract/interact/g
      + Add versioned Conflicts/Replaces to libvirt0 for libvirt0-dbg, since
        we used to ship them as such.
    - Create /var/run/libvirt in libvirt-bin's init script.
    - Rename libvirt group to libvirtd.
    - 0005-delayed_iff_up_bridge.patch: Don't try to bring up the bridge before at
      least one interface has been added to it.
    - dont_clobber_existing_bridges.patch: Assign the name of the virtual
      bridge dynamically to avoid interfering with existing bridges.
    - better_default_uri_virsh.patch: Default to qemu:///system if the user
      has write access to the libvirt socket, otherwise qemu:///session.
    - We call libxen-dev libxen3-dev, so change all references.
  * Add qemu migration patch (from upstream git (adjusted for 0.4.6)).
  * Add dynamic_bridge_names.patch to again support dynamic bridge names.

 -- Soren Hansen <soren@ubuntu.com>  Tue, 18 Nov 2008 18:04:40 +0100

libvirt (0.4.6-5) unstable; urgency=low

  * [411ada3] add more details about dnsmasq vs. libvirtd (Closes: #504605)
  * [2f8f07d] add default image dir virt-manager assumes they exist and
    they're used in the SELinux policies too. (Closes: #505577)
  * [9eb3a83] fix #define vs. #defined typos - affects non Linux architectures
    and fixes the build with gcc 4.4 (Closes: #505607) - thanks to Martin
    Michlmayr
  * [0e21634] fix uploader

 -- Guido Günther <agx@sigxcpu.org>  Fri, 14 Nov 2008 14:54:48 +0100

libvirt (0.4.6-4) unstable; urgency=low

  * upload to unstable
  * [50b27f5] add libvirt-suspendonreboot script (Closes: #501155) -
    thanks to Andreas Barth

 -- Guido Günther <agx@sigxcpu.org>  Sat, 01 Nov 2008 19:33:36 +0100

libvirt (0.4.6-3) experimental; urgency=low

  * [8fa5a3c] add a versioned recommends on qemu (Closes: #501692)
  * [d1539bc] recommend pkg-config
  * [f08bb18] explain libvirt group (Closes: #501824)

 -- Guido Günther <agx@sigxcpu.org>  Sun, 12 Oct 2008 20:27:25 +0200

libvirt (0.4.6-2) experimental; urgency=low

  * [2039095] tighten libvirt dependency
  * [06dbe8a] qemu/kvm: fix domain block stats for virtio and scsi devices

 -- Guido Günther <agx@sigxcpu.org>  Thu, 02 Oct 2008 22:03:05 +0200

libvirt (0.4.6-1) experimental; urgency=low

  * [e20d3d4] Imported Upstream version 0.4.6
  * [0c840ab] disable numactl
  * [ca2c5cb] cleanup doc installation (Closes: #492075)
  * [714ab94] drop 0004-for-kvm-determine-maxVCPUs-at-runtime.patch - applied
    upstream
  * [e7563a8] drop 0005-fix-crash-when-no-emulator-is-defined-for-kvm-
    qemu.patch - fixed upstream

 -- Guido Guenther <agx@sigxcpu.org>  Thu, 25 Sep 2008 12:31:45 +0200

libvirt (0.4.5-2) experimental; urgency=low

  * [17647cd] libvirt-bin.default: add keytab default
  * [0ef01e7] fix runtime vcpu detection (0004-for-kvm-determine-
    maxVCPUs-at-runtime.patch) (Closes: #495950)
  * [b91e1eb] don't crash when no emulator is defined (0005-fix-crash-
    when-no-emulator-is-defined-for-kvm-qemu.patch)

 -- Guido Guenther <agx@sigxcpu.org>  Mon, 22 Sep 2008 20:11:04 +0200

libvirt (0.4.5-1) experimental; urgency=low

  * [ab8b4e6] Imported Upstream version 0.4.5
  * [4aaef27] tighten dependency on libvirt
  * [fa253be] drop 0002-qemu-path.diff.patch - fixed upstream
  * [87fc2db] drop 0005-check-for-the-existence-of-the-migrate-
    command.patch applied upstream
  * [bc311aa] drop 0006-wrong-open-failure-detection.patch applied
    upstream
  * [38e615d] rebase the remaining patches
  * [9a04bb7] bump shlibs version to 0.4.5
  * [9fadd6f] disable LXC
  * [179c869] build-dep on libselinux1-dev for selinux support

 -- Guido Guenther <agx@sigxcpu.org>  Thu, 18 Sep 2008 19:02:55 +0200

libvirt (0.4.4-3ubuntu3) intrepid; urgency=low

  * debian/patches/0008-lp287533.patch: allow 16 VCPUs when using kvm
    (LP: #287533)

 -- Jamie Strandboge <jamie@ubuntu.com>  Wed, 22 Oct 2008 10:13:12 -0500

libvirt (0.4.4-3ubuntu2) intrepid; urgency=low

  * Make QEmu a suggested package of libvirt0 rather than a recommended one. 
  * Make kvm a recommended package of libvirt0.

 -- Soren Hansen <soren@ubuntu.com>  Mon, 11 Aug 2008 16:18:03 +0200

libvirt (0.4.4-3ubuntu1) intrepid; urgency=low

  * Merge from debian unstable, remaining changes:
    - debian/control:
      + DebianMaintainerField
      + Don't build-depend on QEmu.
      + Add "XS-Original-" prefix to Debian's Vcs headers.
      + Bump bridge-utils, dnsmasq-base, netcat-openbsd, and iptables to Depends
        of libvirt-bin.
      + s/interract/interact/g
      + Add versioned Conflicts/Replaces to libvirt0 for libvirt0-dbg, since
        we used to ship them as such.
    - Create /var/run/libvirt in libvirt-bin's init script.
    - Rename libvirt group to libvirtd.
    - 0005-delayed_iff_up_bridge.patch: Don't try to bring up the bridge before at
      least one interface has been added to it.
    - dont_clobber_existing_bridges.patch: Assign the name of the virtual
      bridge dynamically to avoid interfering with existing bridges.
    - better_default_uri_virsh.patch: Default to qemu:///system if the user
      has write access to the libvirt socket, otherwise qemu:///session.
    - We call libxen-dev libxen3-dev, so change all references.

 -- Soren Hansen <soren@ubuntu.com>  Mon, 11 Aug 2008 15:36:54 +0200

libvirt (0.4.4-3) unstable; urgency=low

  * upload to unstable
  * [96c6727] add /var/cache/libvirt needed by qemuDriver for temporary
    storage
  * [794f95c] bump standards version to 3.8.0
  * [05184af] add README.source

 -- Guido Guenther <agx@sigxcpu.org>  Wed, 23 Jul 2008 11:30:31 -0400

libvirt (0.4.4-2) experimental; urgency=low

  * [facb983] README.Debian explain "default" network startup
  * [395a510] add /var/lib/libvirt needed for the dnsmasq lease file
  * [9c588ac] promote bridge-utils & dnsmasq to Recommends: since
    they're needed for the default NAT network
  * [9ed2cd4] recommend iptables - needed for the default NAT network

 -- Guido Guenther <agx@sigxcpu.org>  Wed, 23 Jul 2008 00:23:58 -0400

libvirt (0.4.4-1) experimental; urgency=low

  * [0ff1e68] new upstream version
  * [2098f96] rebase patches for 0.4.4
  * [abbd15e] enable with-storage-disk now that we have parted1.8
  * [3942b25] start libvirtd by default

 -- Guido Guenther <agx@sigxcpu.org>  Fri, 27 Jun 2008 10:06:00 +0200

libvirt (0.4.4-0ubuntu1) intrepid; urgency=low

  * New upstream release
    - Drop nic-model, disk-bus, and ancient_parted.patch. They're all
      upstream now (in some form).
    - Add new libdevmapper-dev build-dependency.

 -- Soren Hansen <soren@ubuntu.com>  Wed, 25 Jun 2008 18:51:21 +0200

libvirt (0.4.2-6ubuntu1) UNRELEASED; urgency=low

  * Merge from debian unstable, remaining changes:
    - debian/control:
      + DebianMaintainerField
      + Don't build-depend on QEmu.
      + Add "XS-Original-" prefix to Debian's Vcs headers.
      + Bump bridge-utils, dnsmasq-base, netcat-openbsd, and iptables to Depends
        of libvirt-bin.
      + s/interract/interact/g
    - debian/libvirt-bin.default
      + Make libvirtd start by default
    - Add /var/lib/libvirt to libvirt-bin package. (dnsmasq needs it to store
      its state info.
    - Create /var/run/libvirt in libvirt-bin's init script.
    - Rename libvirt group to libvirtd.
    - Build iscsi and disk storage support.
    - delayed_iff_up_bridge.patch: Don't try to bring up the bridge before at
      least one interface has been added to it.
    - dont_clobber_existing_bridges.patch: Assign the name of the virtual
      bridge dynamically to avoid interfering with existing bridges.
    - nic-model.patch: Add support for <model type='foo'/> NIC configuration.
    - disk-bus.patch:  Add support for bus='foo' attributes for disk targets.
    - better_default_uri_virsh.patch: Default to qemu:///system if the user
      has write access to the libvirt socket, otherwise qemu:///session.
    - ancient_parted.patch: Fix builds against libparted1.7
    - We call libxen-dev libxen3-dev, so change all references.

 -- Soren Hansen <soren@ubuntu.com>  Wed, 25 Jun 2008 16:40:46 +0200

libvirt (0.4.2-6) unstable; urgency=low

  * reenable open-iscsi support  - thanks to to the open-iscsi
    maintainers for fixing this up
  * build a libvirt0-dbg package
  * register documentation with doc-base  (Closes: #480294) - thanks to
    Tzafrir Cohen for the patch
  * control: fix typo
  * README.Debian: explain debugging

 -- Guido Guenther <agx@sigxcpu.org>  Thu, 15 May 2008 18:04:20 +0200

libvirt (0.4.2-5ubuntu2) intrepid; urgency=low

  * We call libxen-dev libxen3-dev.
  * Make libvirt-dev installable alongside libvirt0-dbg.

 -- Soren Hansen <soren@ubuntu.com>  Fri, 02 May 2008 10:59:50 +0200

libvirt (0.4.2-5ubuntu1) intrepid; urgency=low

  * Merge from debian unstable, remaining changes:
    - debian/control:
      + DebianMaintainerField
      + Don't build-depend on QEmu.
      + Add "XS-Original-" prefix to Debian's Vcs headers.
      + Bump bridge-utils, dnsmasq-base, netcat-openbsd, and iptables to Depends
        of libvirt-bin.
      + s/interract/interact/g
    - Add libvirt0-dbg package
    - debian/libvirt-bin.default
      + Make libvirtd start by default
    - Add /var/lib/libvirt to libvirt-bin package. (dnsmasq needs it to store
      its state info.
    - Create /var/run/libvirt in libvirt-bin's init script.
    - Install PolicyKit and sasl stuff in libvirt-bin.
    - Rename libvirt group to libvirtd.
    - Build iscsi and disk storage support.
    - delayed_iff_up_bridge.patch: Don't try to bring up the bridge before at
      least one interface has been added to it.
    - dont_clobber_existing_bridges.patch: Assign the name of the virtual
      bridge dynamically to avoid interfering with existing bridges.
    - nic-model.patch: Add support for <model type='foo'/> NIC configuration.
    - disk-bus.patch:  Add support for bus='foo' attributes for disk targets.
    - better_default_uri_virsh.patch: Default to qemu:///system if the user
      has write access to the libvirt socket, otherwise qemu:///session.
    - ancient_parted.patch: Fix builds against libparted1.7

 -- Soren Hansen <soren@ubuntu.com>  Fri, 02 May 2008 01:50:32 +0200

libvirt (0.4.2-5) unstable; urgency=low

  * no need to depend on python-all-dev we only build an extension for
    the current python version

 -- Guido Guenther <agx@sigxcpu.org>  Tue, 22 Apr 2008 11:26:13 +0200

libvirt (0.4.2-4) unstable; urgency=low

  * only build-dep on qemu on architectures that have it
    (Closes: #476290)
  * the packages containing the daemon should suggest polkit

 -- Guido Guenther <agx@sigxcpu.org>  Fri, 18 Apr 2008 10:41:38 +0200

libvirt (0.4.2-3) unstable; urgency=low

  * drop the {build-,}dependency on open-iscsi too
  * suggest policykit

 -- Guido Guenther <agx@sigxcpu.org>  Mon, 14 Apr 2008 15:27:20 +0200

libvirt (0.4.2-2) unstable; urgency=low

  * disable the iscsi storage backend until #423368 is fixed in unstable
  * disable polkit authentication by default so the libvirt stays accessible
    for members of the libvirt group

 -- Guido Guenther <agx@sigxcpu.org>  Mon, 14 Apr 2008 14:20:23 +0200

libvirt (0.4.2-1) unstable; urgency=low

  * drop no-mac.diff - applied upstream
  * no need to explicitly link against libpthread
  * always enable debugging
  * add Homepage URL
  * add Vcs-{Git,Browser} fields
  * symlink devhelp docs
  * enable policy kit

 -- Guido Guenther <agx@sigxcpu.org>  Fri, 11 Apr 2008 17:54:06 +0200

libvirt (0.4.1-1) experimental; urgency=low

  * new upstream version
       * Xen 3.2 fixes
       * storage pool support
  * partition based storage pools are disabled, since this needs parted 1.8
    which is only in experimental
  * update patches for new upstream release
       * boot-dev-error.diff - applied upstream
       * qemu-parse-error.diff - applied upstream
       * qemu-path.diff - adjust to new hypervisor detection code
       * rediff the rest
  * new patches:
       * no-mac.diff: don't set mac address on tun device since it breaks kvm
  * bump shlibs version

 -- Guido Guenther <agx@sigxcpu.org>  Fri, 07 Mar 2008 10:17:21 +0100

libvirt (0.4.0-6) unstable; urgency=low

  * depend on libxen-dev (Closes:#467598)
  * allow members of the libvirt group to manage virtual machines

 -- Guido Guenther <agx@sigxcpu.org>  Sun, 02 Mar 2008 16:11:49 +0100

libvirt (0.4.0-5) unstable; urgency=low

  * thanks to the xen maintainers Debian now has a working libxen-dev, so
    enable xen support in the default build (Closes: #453826)
  * recommend netcat-openbsd for unix domain socket support (Closes: #453627)
  * README.Debian: document necessary xend options
  * fix spelling of Python

 -- Guido Guenther <agx@sigxcpu.org>  Wed, 20 Feb 2008 11:14:22 +0100

libvirt (0.4.0-4) unstable; urgency=low

  * don't segfault on broken boot device configuration (Closes: #463686)
  * don't segfault due to missing errorhandling in the XML parsing code

 -- Guido Guenther <agx@sigxcpu.org>  Tue, 05 Feb 2008 13:12:54 +0100

libvirt (0.4.0-3) unstable; urgency=low

  * add and remove the libvirt group for the socket
  * be a bit more verbose on libvirtd reload
  * depend on adduser since we add the libvirt user
  * don't restart libvirtd on upgrades since it kills running qemus
  * enable debugging via DEB_BUILD_OPTS

 -- Guido Guenther <agx@sigxcpu.org>  Sun, 03 Feb 2008 14:21:46 +0100

libvirt (0.4.0-2ubuntu8) hardy; urgency=low

  * disk-bus.patch:
    - Add bus attribute to disk/target tags. Allows you to create virtio disks.
      (LP: #213991)
  * nic-model.patch:
    - Add <model type='foo'/> support to network interfaces. (LP: #213991)
  * graceful_shutdown.patch:
    - Rather than pulling the power from virtual machines, send an ACPI power
      button event and let the OS handle it.
  * better_default_uri_virsh.patch:
    - Updated patch: Output connection URI to stderr instead of stdout to avoid
      breaking scripts that use virsh.

 -- Soren Hansen <soren@ubuntu.com>  Wed, 16 Apr 2008 10:35:03 +0200

libvirt (0.4.0-2ubuntu7) hardy; urgency=low

  * better_default_uri_virsh.patch:
    - Make virsh connect to qemu:///system by default if the user has write
      access to /var/run/libvirt/libvirt-sock and qemu:///session if not.

 -- Soren Hansen <soren@ubuntu.com>  Tue, 01 Apr 2008 10:32:59 +0200

libvirt (0.4.0-2ubuntu6) hardy; urgency=low

  * *Actually* apply our patches to the -dbg version.

 -- Soren Hansen <soren@ubuntu.com>  Tue, 11 Mar 2008 14:49:03 +0100

libvirt (0.4.0-2ubuntu5) hardy; urgency=low

  * Create /var/lib/libvirt in libvirt-bin. (LP: #191636)

 -- Soren Hansen <soren@ubuntu.com>  Wed, 13 Feb 2008 22:17:33 +0100

libvirt (0.4.0-2ubuntu4) hardy; urgency=low

  * dont_clobber_existing_bridges.patch:
    - Change bridge name from virbr0 to virbr%d, to ensure we never clobber
      existing bridges.
  * Add iptables dependency

 -- Soren Hansen <soren@ubuntu.com>  Wed, 13 Feb 2008 00:53:20 +0100

libvirt (0.4.0-2ubuntu3) hardy; urgency=low

  * Build against libxen3-dev instead of libxen3.2-dev.
  * libvirt-bin:
    + Replace "Suggests: dnsmasq" with "Depends: dnsmasq-base".
    + Add dependency on netcat-openbsd (to enable qemu+ssh:// style remote
      management)

 -- Soren Hansen <soren@ubuntu.com>  Fri, 08 Feb 2008 17:24:48 +0100

libvirt (0.4.0-2ubuntu2) hardy; urgency=low

  * Build against libxen-3.2 instead of 3.1.
  * Bump bridge-utils from Suggests: to Depends:.

 -- Soren Hansen <soren@ubuntu.com>  Tue, 05 Feb 2008 10:34:31 +0100

libvirt (0.4.0-2ubuntu1) hardy; urgency=low

  * Merge from debian unstable, remaining changes:
    - DebianMaintainerField.
    - Add libxen3.1-dev to enable Xen management.
    - Add libpolkit-dbus-dev to enable polkit integration.
    - Build libvirt0-dbg flavour.
    - Start libvirtd by default.
    - Install polkit policy.
    - Install sasl config.
    - Install sample qemu and libvirtd config.
    - Create libvirtd group in postinst.
    - libvirt-remote-ssh.patch: Fix foo+ssh:// urls.
    - delayed_iff_up_bridge.patch: Don't try to IFF_UP the bridge interface
      until an interface gets added to it.
  * Create /var/run if it doesn't exist (LP: #178106).

 -- Soren Hansen <soren@ubuntu.com>  Wed, 30 Jan 2008 16:43:11 +0100

libvirt (0.4.0-2) unstable; urgency=low

  * libvirt-bin.init: fix the reload target
  * add configuration examples

 -- Guido Guenther <agx@sigxcpu.org>  Sat, 15 Dec 2007 18:59:11 +0100

libvirt (0.4.0-1) unstable; urgency=low

  * new upstream version
  * enable sasl support
  * leave policykit support disabled since it's not in unstable yet
  * bump shlibs version
  * remove CVS metadata
  * rediff patches
  * libvirtd-bin.init: libvirtd supports reload

 -- Guido Guenther <agx@sigxcpu.org>  Fri, 21 Dec 2007 16:49:13 +0100

libvirt (0.4.0-0ubuntu3) hardy; urgency=low

  * Clean up debian/rules (should reenable concurrent builds).
  * Don't restart libvirt on upgrades (if there's a good reason, we'll
    add it to postinst/prerm with checks for specific versions).

 -- Soren Hansen <soren@ubuntu.com>  Fri, 18 Jan 2008 19:07:19 +0100

libvirt (0.4.0-0ubuntu2) hardy; urgency=low

  * IFF_UP'ing a bridge interface doesn't work until the first interface has
    been added to it.
  * Fix remote ssh connections.

 -- Soren Hansen <soren@ubuntu.com>  Tue, 15 Jan 2008 10:53:25 +0100

libvirt (0.4.0-0ubuntu1) hardy; urgency=low

  * New upstream release.
  * Don't change the default URI. It appears that too many applications
    still depend on this broken behaviour.
  * Change maintainer to ubuntu-core-dev.

 -- Soren Hansen <soren@ubuntu.com>  Fri, 21 Dec 2007 11:24:02 +0100

libvirt (0.3.3-6ubuntu1) hardy; urgency=low

  * Merge from debian unstable, remaining changes:
    - Add libvirt0-dbg package.
    - Start libvirtd by default.
    - Create libvirtd group, and have libvirtd's sockets have group ownership
      "libvirtd".
    - Add libxen as a build-dependency to enable libvirt's Xen features.

 -- Soren Hansen <soren@ubuntu.com>  Thu, 20 Dec 2007 11:28:00 +0100

libvirt (0.3.3-6) unstable; urgency=low

  * don't include precompiled examples in the doc package (Closes: #456825)
  * remove RHism from manpage (Closes: #455859)
  * bump standards version

 -- Guido Guenther <agx@sigxcpu.org>  Wed, 19 Dec 2007 13:45:58 +0100

libvirt (0.3.3-5.xen0) unstable; urgency=low

  * rebuild with xen support

 -- Guido Guenther <agx@sigxcpu.org>  Tue, 08 Jan 2008 11:00:24 +0100

libvirt (0.3.3-5) unstable; urgency=low

  * make libs match overrides
  * move to team maintenance
  * suggest dnsmasq and bridge-utils for qemu networking
  * remove stale PID files

 -- Guido Guenther <agx@sigxcpu.org>  Thu, 13 Dec 2007 21:34:16 +0100

libvirt (0.3.3-4.xen0) unstable; urgency=low

  * UNRELEASED
  * build with xen support
  * debian/control: we also support xen

 -- Guido Guenther <agx@sigxcpu.org>  Thu, 06 Dec 2007 15:43:03 +0100

libvirt (0.3.3-4ubuntu5) hardy; urgency=low

  * Made default_uri a configurable.

 -- Soren Hansen <soren@ubuntu.com>  Wed, 19 Dec 2007 00:56:31 +0100

libvirt (0.3.3-4ubuntu4) hardy; urgency=low

  * Add "Provides: libvirt0" to libvirt0-dbg.
  * Make virsh understand that the default URI is not xen:///.

 -- Soren Hansen <soren@ubuntu.com>  Wed, 19 Dec 2007 00:13:10 +0100

libvirt (0.3.3-4ubuntu3) hardy; urgency=low

  * Change default URI to qemu:///session
  * Add libvirt0-dbg package, which is just like libvirt0, but built
    with --enable-debug=yes.

 -- Soren Hansen <soren@ubuntu.com>  Thu, 13 Dec 2007 21:37:39 +0100

libvirt (0.3.3-4ubuntu2) hardy; urgency=low

  * Start libvirtd by default.
  * Create libvirtd group, and have libvirtd's sockets have group ownership
    "libvirtd".

 -- Soren Hansen <soren@ubuntu.com>  Thu, 13 Dec 2007 15:08:29 +0100

libvirt (0.3.3-4ubuntu1) hardy; urgency=low

  * Fakesync with Debian.
  * Reenable Xen.

 -- Soren Hansen <soren@ubuntu.com>  Thu, 06 Dec 2007 13:33:13 +0100

libvirt (0.3.3-4) unstable; urgency=low

  * put packages into the proper sections
  * fix messed up Standards-Version (Closes: #453900)

 -- Guido Guenther <agx@sigxcpu.org>  Sun, 02 Dec 2007 14:50:11 +0100

libvirt (0.3.3-3.xen0) unstable; urgency=low

  * build with xen support - depend on our hacked up xen-utils for that

 --  Guido Guenther <agx@sigxcpu.org>  Sat, 01 Dec 2007 16:27:32 +0000

libvirt (0.3.3-3) unstable; urgency=low

  * add initscript to start libvirtd

 -- Guido Guenther <agx@sigxcpu.org>  Wed, 28 Nov 2007 10:30:29 +0100

libvirt (0.3.3-2) unstable; urgency=low

  * debian/copyright:
      * update FSF address
      * update upstream author and copyright information
  * install the virsh manpage
  * use binary:Version instead of Source-Version

 -- Guido Guenther <agx@sigxcpu.org>  Fri, 23 Nov 2007 22:31:26 +0100

libvirt (0.3.3-1) unstable; urgency=low

  * repackage for Debian (Closes: #384300)
  * enable avahi
  * build with qemu/kvm support
  * disable xen support until #402249 is fixed
  * disable qemu autonetwork for now, causes libvirtd to seqfault
  * fix path to kvm
  * switch off DH_VERBOSE
  * thanks to the Ubuntu maintainers for their work!

 -- Guido Guenther <agx@sigxcpu.org>  Fri, 23 Nov 2007 01:58:56 +0100

libvirt (0.3.3-0ubuntu1) hardy; urgency=low

  * New upstream release.
  * Update maintainer.

 -- Soren Hansen <soren@ubuntu.com>  Wed, 14 Nov 2007 23:09:33 +0100

libvirt (0.3.0-0ubuntu2) gutsy; urgency=low

  * Add lingnutls-dev Build-Dep.

 -- Fabio M. Di Nitto <fabbione@ubuntu.com>  Mon, 16 Jul 2007 12:10:41 +0200

libvirt (0.3.0-0ubuntu1) gutsy; urgency=low

  * Import new upstram release that can actually build on xen-3.1.

 -- Fabio M. Di Nitto <fabbione@ubuntu.com>  Mon, 16 Jul 2007 10:23:04 +0200

libvirt (0.2.2-0ubuntu1) gutsy; urgency=low

  * Depends on libxen3.1-dev.

 -- Chuck Short <zulcss@ubuntu.com>  Fri, 13 Jul 2007 11:04:00 -0400

libvirt (0.2.2-0ubuntu0) gutsy; urgency=low

  * New upstream version.
  * Updated libvirt-bin.install, thanks to Marcelo Boveto Shima.

 -- Chuck Short <zulcss@ubuntu.com>  Sun, 24 Jun 2007 09:54:54 -0400

libvirt (0.1.8-0ubuntu2) feisty; urgency=low

  * Rebuild for python2.5 as the default python version.

 -- Matthias Klose <doko@ubuntu.com>  Fri, 12 Jan 2007 13:21:55 +0000

libvirt (0.1.8-0ubuntu1) feisty; urgency=low

  * Initial release

 -- Andrew Mitchell <ajmitch@ubuntu.com>  Mon, 23 Oct 2006 20:00:28 +1300

